<!DOCTYPE html>
<html>
<head>
  <title>baseClone.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "node_modules/lodash/internal/baseClone.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>baseClone.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> arrayCopy = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./arrayCopy'</span>),
    arrayEach = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./arrayEach'</span>),
    baseAssign = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./baseAssign'</span>),
    baseForOwn = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./baseForOwn'</span>),
    initCloneArray = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./initCloneArray'</span>),
    initCloneByTag = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./initCloneByTag'</span>),
    initCloneObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./initCloneObject'</span>),
    isArray = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lang/isArray'</span>),
    isObject = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lang/isObject'</span>);

<span class="hljs-comment">/** `Object#toString` result references. */</span>
<span class="hljs-keyword">var</span> argsTag = <span class="hljs-string">'[object Arguments]'</span>,
    arrayTag = <span class="hljs-string">'[object Array]'</span>,
    boolTag = <span class="hljs-string">'[object Boolean]'</span>,
    dateTag = <span class="hljs-string">'[object Date]'</span>,
    errorTag = <span class="hljs-string">'[object Error]'</span>,
    funcTag = <span class="hljs-string">'[object Function]'</span>,
    mapTag = <span class="hljs-string">'[object Map]'</span>,
    numberTag = <span class="hljs-string">'[object Number]'</span>,
    objectTag = <span class="hljs-string">'[object Object]'</span>,
    regexpTag = <span class="hljs-string">'[object RegExp]'</span>,
    setTag = <span class="hljs-string">'[object Set]'</span>,
    stringTag = <span class="hljs-string">'[object String]'</span>,
    weakMapTag = <span class="hljs-string">'[object WeakMap]'</span>;

<span class="hljs-keyword">var</span> arrayBufferTag = <span class="hljs-string">'[object ArrayBuffer]'</span>,
    float32Tag = <span class="hljs-string">'[object Float32Array]'</span>,
    float64Tag = <span class="hljs-string">'[object Float64Array]'</span>,
    int8Tag = <span class="hljs-string">'[object Int8Array]'</span>,
    int16Tag = <span class="hljs-string">'[object Int16Array]'</span>,
    int32Tag = <span class="hljs-string">'[object Int32Array]'</span>,
    uint8Tag = <span class="hljs-string">'[object Uint8Array]'</span>,
    uint8ClampedTag = <span class="hljs-string">'[object Uint8ClampedArray]'</span>,
    uint16Tag = <span class="hljs-string">'[object Uint16Array]'</span>,
    uint32Tag = <span class="hljs-string">'[object Uint32Array]'</span>;

<span class="hljs-comment">/** Used to identify `toStringTag` values supported by `_.clone`. */</span>
<span class="hljs-keyword">var</span> cloneableTags = {};
cloneableTags[argsTag] = cloneableTags[arrayTag] =
cloneableTags[arrayBufferTag] = cloneableTags[boolTag] =
cloneableTags[dateTag] = cloneableTags[float32Tag] =
cloneableTags[float64Tag] = cloneableTags[int8Tag] =
cloneableTags[int16Tag] = cloneableTags[int32Tag] =
cloneableTags[numberTag] = cloneableTags[objectTag] =
cloneableTags[regexpTag] = cloneableTags[stringTag] =
cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = <span class="hljs-literal">true</span>;
cloneableTags[errorTag] = cloneableTags[funcTag] =
cloneableTags[mapTag] = cloneableTags[setTag] =
cloneableTags[weakMapTag] = <span class="hljs-literal">false</span>;

<span class="hljs-comment">/** Used for native method references. */</span>
<span class="hljs-keyword">var</span> objectProto = <span class="hljs-built_in">Object</span>.prototype;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Used to resolve the <a href="http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring"><code>toStringTag</code></a>
of values.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> objToString = objectProto.toString;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>The base implementation of <code>_.clone</code> without support for argument juggling
and <code>this</code> binding <code>customizer</code> functions.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">value</span>
<span>The value to clone.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[isDeep]</span>
<span class="dox_type">boolean</span>
<span>Specify a deep clone.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[customizer]</span>
<span class="dox_type">Function</span>
<span>The function to customize cloning values.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[key]</span>
<span class="dox_type">string</span>
<span>The key of <code>value</code>.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[object]</span>
<span class="dox_type">Object</span>
<span>The object <code>value</code> belongs to.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[stackA=[]]</span>
<span class="dox_type">Array</span>
<span>Tracks traversed source objects.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[stackB=[]]</span>
<span class="dox_type">Array</span>
<span>Associates clones with source counterparts.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baseClone</span>(<span class="hljs-params">value, isDeep, customizer, key, object, stackA, stackB</span>) </span>{
  <span class="hljs-keyword">var</span> result;
  <span class="hljs-keyword">if</span> (customizer) {
    result = object ? customizer(value, key, object) : customizer(value);
  }
  <span class="hljs-keyword">if</span> (result !== <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">return</span> result;
  }
  <span class="hljs-keyword">if</span> (!isObject(value)) {
    <span class="hljs-keyword">return</span> value;
  }
  <span class="hljs-keyword">var</span> isArr = isArray(value);
  <span class="hljs-keyword">if</span> (isArr) {
    result = initCloneArray(value);
    <span class="hljs-keyword">if</span> (!isDeep) {
      <span class="hljs-keyword">return</span> arrayCopy(value, result);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> tag = objToString.call(value),
        isFunc = tag == funcTag;

    <span class="hljs-keyword">if</span> (tag == objectTag || tag == argsTag || (isFunc &amp;&amp; !object)) {
      result = initCloneObject(isFunc ? {} : value);
      <span class="hljs-keyword">if</span> (!isDeep) {
        <span class="hljs-keyword">return</span> baseAssign(result, value);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> cloneableTags[tag]
        ? initCloneByTag(value, tag, isDeep)
        : (object ? value : {});
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Check for circular references and return its corresponding clone.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  stackA || (stackA = []);
  stackB || (stackB = []);

  <span class="hljs-keyword">var</span> length = stackA.length;
  <span class="hljs-keyword">while</span> (length--) {
    <span class="hljs-keyword">if</span> (stackA[length] == value) {
      <span class="hljs-keyword">return</span> stackB[length];
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Add the source value to the stack of traversed objects and associate it with its clone.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  stackA.push(value);
  stackB.push(result);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Recursively populate clone (susceptible to call stack limits).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  (isArr ? arrayEach : baseForOwn)(value, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">subValue, key</span>) </span>{
    result[key] = baseClone(subValue, isDeep, customizer, key, value, stackA, stackB);
  });
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-built_in">module</span>.exports = baseClone;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
