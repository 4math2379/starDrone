<!DOCTYPE html>
<html>
<head>
  <title>README.markdown</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/sphero/README.markdown";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#sphero.js">sphero.js</a>
      </div>

      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#connecting-to-sphero">Connecting to Sphero</a>
      </div>

      <div class="heading h3">
        <a href="#os-x">OS X</a>
      </div>

      <div class="heading h3">
        <a href="#linux-ubuntu">Linux - Ubuntu</a>
      </div>

      <div class="heading h3">
        <a href="#windows">Windows</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h2">
        <a href="#compatibility">Compatibility</a>
      </div>

      <div class="heading h2">
        <a href="#development">Development</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="sphero.js">
  <h1>
    <a href="#sphero.js" name="sphero.js" class="pilcrow"></a>
sphero.js
  </h1>
</div>
<p>The official Orbotix JavaScript SDK module to programmatically control Sphero robots.</p>
<p><a href="https://travis-ci.org/orbotix/sphero.js"><img src="https://travis-ci.org/orbotix/sphero.js.svg?branch=master" alt="Build Status"></a> <a href="https://codeclimate.com/github/orbotix/sphero.js"><img src="https://codeclimate.com/github/orbotix/sphero.js/badges/gpa.svg" alt="Code Climate"></a> <a href="https://codeclimate.com/github/orbotix/sphero.js/coverage"><img src="https://codeclimate.com/github/orbotix/sphero.js/badges/coverage.svg" alt="Test Coverage"></a></p>
<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h2>
</div>
<pre><code>$ npm install sphero
</code></pre>
<div class="pilwrap" id="connecting-to-sphero">
  <h2>
    <a href="#connecting-to-sphero" name="connecting-to-sphero" class="pilcrow"></a>
Connecting to Sphero
  </h2>
</div>
<div class="pilwrap" id="os-x">
  <h3>
    <a href="#os-x" name="os-x" class="pilcrow"></a>
OS X
  </h3>
</div>
<p>To connect to your Sphero, you first need to pair it. To pair your device on OS X, open the Bluetooth settings in <strong>System Preferences</strong> &gt; <strong>Bluetooth</strong>. From this menu, locate your Sphero in the Devices list and click the <strong>Pair</strong> button to pair it with your computer.</p>
<p>Once you've successfully paired your Sphero, open your terminal, go to your <code>/dev</code> folder and locate the serial device connection (or use <code>ls -a /dev | grep tty.Sphero</code>) for your newly paired Sphero; it should look something like <code>tty.Sphero-RGB-AMP-SPP</code>. Note, your device will likely be different depending on its preset color code (the three colors your Sphero cycles through when you first turn it on). The previous example is for a Sphero with a Red, Green and Blue (RGB) color code.</p>
<p>So, your Sphero port will be at</p>
<pre><code>/dev/tty.Sphero-XXX-XXX-XXX
</code></pre>
<hr>
<div class="pilwrap" id="linux-ubuntu">
  <h3>
    <a href="#linux-ubuntu" name="linux-ubuntu" class="pilcrow"></a>
Linux - Ubuntu
  </h3>
</div>
<p>To make things easy install <code>Blueman Bluetooth Manager</code>. In Ubuntu this is pretty easy, just open the <strong>Ubuntu Software Center</strong>, type the program name and install it from there. When the installation is complete, open the program and search for devices. Make sure the Sphero is flashing its color code. Once the Sphero appears in the list of devices, select it, click on setup and follow the instructions.</p>
<p>You can connect and disconnect the Sphero from a serialport interface by right clicking on it inside the Blueman list of devices and selecting <code>RN-SPP</code> or <code>disconnect</code>, respectively (after it has been setup and added permanently to the list). Make sure to notice the serialport address Blueman displays after the Sphero connects, as this will be the one used in your code. The serialport address displayed for the Sphero should look something like this:</p>
<pre><code>/dev/rfcomm0
</code></pre>
<hr>
<div class="pilwrap" id="windows">
  <h3>
    <a href="#windows" name="windows" class="pilcrow"></a>
Windows
  </h3>
</div>
<p>Locate the Bluetooth icon in the taskbar (or inside the system task tray button) and follow the necessary steps to pair with your Sphero.</p>
<p>Once you've successfully paired your Sphero, there are two options available to you to check and see which serialport corresponds to the Sphero you just connected. The first option is to right click on the bluetooth icon in the task bar (same you use to pair), click on <code>Open Settings</code>, when the settings window appears, navigate to the <code>COM Ports</code> tab where you should see a list of ports which should list your Sphero. If your Sphero is listed in more than one port, take note of the one that has <code>RN-SPP</code> in the name, and use that one to connect. The list should look something similar to:</p>
<table>
<thead>
<tr>
<th>Port</th>
<th>Direction</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>COM3</td>
<td>Outgoing</td>
<td>Sphero-RPB 'RN-SPP'</td>
</tr>
<tr>
<td>COM4</td>
<td>Incoming</td>
<td>Sphero-RPB</td>
</tr>
</tbody>
</table>
<p>In the above case, you should use serialport <code>COM3</code>.</p>
<p>The second option is to identify the port number. Click the <code>start</code> button and type <code>device manager</code>. Once the program appears in the list, open it. Navigate the tree of devices to <code>Ports</code>, there you should see a list of COM ports, i.e. <code>(COM3, COM4)</code>. From that port list, select the one that belongs to your Sphero. If your Sphero name is not listed in the ports list, you can either try them one by one or use the first method to identify which port belongs to your Sphero. The port address should look something like:</p>
<pre><code>COM2, COM3, COM4
</code></pre>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>To initialize and connect to a Sphero:</p>
<pre><code class="javascript"><span class="hljs-keyword">var</span> sphero = <span class="hljs-built_in">require</span>(<span class="hljs-string">"sphero"</span>),
    orb = sphero(<span class="hljs-string">"/dev/rfcomm0"</span>); <span class="hljs-comment">// change port accordingly</span>

orb.connect(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// Sphero's connected!</span>
  <span class="hljs-comment">// do some cool stuff here!</span>
});
</code></pre>
<p>Once connected, you can give Sphero commands:</p>
<pre><code class="javascript">orb.connect(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// roll Sphero forward</span>
  orb.roll(<span class="hljs-number">150</span>, <span class="hljs-number">0</span>);

  <span class="hljs-comment">// turn Sphero green</span>
  orb.color(<span class="hljs-string">"green"</span>);

  <span class="hljs-comment">// have Sphero tell you when it detect collisions</span>
  orb.detectCollisions();

  <span class="hljs-comment">// when Sphero detects a collision, turn red for a second, then back to green</span>
  orb.on(<span class="hljs-string">"collision"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"collision detected"</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"  data:"</span>, data);

    orb.color(<span class="hljs-string">"red"</span>);

    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      orb.color(<span class="hljs-string">"green"</span>);
    }, <span class="hljs-number">1000</span>);
  });
});
</code></pre>
<p>For more examples, check out the <code>examples</code> dir, or the JavaScript SDK documentation on the Sphero developer portal. When running these examples, don't forget to pass the port as an ENV variable like this:</p>
<pre><code>PORT=/your/port node example.js
</code></pre>
<div class="pilwrap" id="compatibility">
  <h2>
    <a href="#compatibility" name="compatibility" class="pilcrow"></a>
Compatibility
  </h2>
</div>
<p>The Sphero.js module is currently compatible with Node.js versions 0.10.x thru 5.x</p>
<p>In order to install it with Node.js 5.x+, you will need to have g++ v4.8 or higher.</p>
<div class="pilwrap" id="development">
  <h2>
    <a href="#development" name="development" class="pilcrow"></a>
Development
  </h2>
</div>
<p>Use <code>npm install</code> to install development dependencies. You will also need to install <a href="http://gruntjs.com">Grunt</a> by running <code>npm install -g grunt-cli</code></p>
<p>You can then run tests with <code>grunt test</code>.</p>
<p>Use <code>grunt lint</code> to run ESLint against both <code>lib</code> and <code>spec/lib</code>.</p>
<p>The <code>grunt</code> command by itself will run both of the above tasks.</p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>Copyright (c) 2015 Orbotix.
MIT Licensed.
For more details, see the <code>LICENSE</code> file.</p>
</div>
  </div>
</body>
</html>
