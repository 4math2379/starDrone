<!DOCTYPE html>
<html>
<head>
  <title>sphero.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/sphero/lib/devices/sphero.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>sphero.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">var</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../utils"</span>),
    commands = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../commands/sphero"</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sphero</span>(<span class="hljs-params">device</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Sphero Virtual Device Address = 0x02</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> command = device.command.bind(device, <span class="hljs-number">0x02</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Heading command tells Sphero to adjust it's orientation, by
commanding a new reference heading (in degrees).</p>
</div>
<div class="body">
<p>If stabilization is enabled, Sphero will respond immediately to this.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">heading</span>
<span class="dox_type">Number</span>
<span>Sphero's new reference heading, in degrees (0-359)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setHeading = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">heading, callback</span>) </span>{
    heading = utils.intToHexArray(heading, <span class="hljs-number">2</span>);
    command(commands.setHeading, heading, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Stabilization command turns Sphero's internal stabilization on or
off, depending on the flag provided.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">flag</span>
<span class="dox_type">Number</span>
<span>stabilization setting flag (0 - off, 1 - on)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setStabilization = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag, callback</span>) </span>{
    flag &amp;= <span class="hljs-number">0x01</span>;
    command(commands.setStabilization, [flag], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Rotation Rate command allows control of the rotation rate Sphero
uses to meet new heading commands.</p>
</div>
<div class="body">
<p>A lower value offers better control, but with a larger turning radius.</p>
<p>Higher values yield quick turns, but Sphero may lose control.</p>
<p>The provided value is in units of 0.784 degrees/sec.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">rotation</span>
<span class="dox_type">Number</span>
<span>new rotation rate (0-255)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setRotationRate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rotation, callback</span>) </span>{
    rotation &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.setRotationRate, [rotation], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Chassis ID command returns the 16-bit chassis ID Sphero was
assigned at the factory.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with a response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getChassisId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getChassisId, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Chassis ID command assigns Sphero's chassis ID, a 16-bit value.</p>
</div>
<div class="body">
<p>This command only works if you're at the factory.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">chassisId</span>
<span class="dox_type">Number</span>
<span>new chassis ID
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setChassisId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chassisId, callback</span>) </span>{
    chassisId = utils.intToHexArray(chassisId, <span class="hljs-number">2</span>);
    command(commands.getChassisId, chassisId, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Self Level command controls Sphero's self-level routine.</p>
</div>
<div class="body">
<p>This routine attempts to achieve a horizontal orientation where pitch/roll
angles are less than the provided Angle Limit.</p>
<p>After both limits are satisfied, option bits control sleep, final
angle(heading), and control system on/off.</p>
<p>An asynchronous message is returned when the self level routine completes.</p>
<p>For more detail on opts param, see the Sphero API documentation.</p>
<p>opts:</p>
<ul>
<li>angleLimit: 0 for defaul, 1 - 90 to set.</li>
<li>timeout: 0 for default, 1 - 255 to set.</li>
<li>trueTime: 0 for default, 1 - 255 to set.</li>
<li>options: bitmask 4bit e.g. 0xF;
};</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>self-level routine options
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.selfLevel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, callback</span>) </span>{
    <span class="hljs-keyword">var</span> data = [
      opts.options,
      opts.angleLimit,
      opts.timeout,
      opts.trueTime
    ];
    command(commands.selfLevel, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Data Streaming command configures Sphero's built-in support for
asynchronously streaming certain system and sensor data.</p>
</div>
<div class="body">
<p>This command selects the internal sampling frequency, packet size,
parameter mask, and (optionally) the total number of packets.</p>
<p>These options are provided as an object, with the following properties:</p>
<ul>
<li><strong>n</strong> - divisor of the maximum sensor sampling rate</li>
<li><strong>m</strong> - number of sample frames emitted per packet</li>
<li><strong>mask1</strong> - bitwise selector of data sources to stream</li>
<li><strong>pcnt</strong> - packet count 1-255 (or 0, for unlimited streaming)</li>
<li><strong>mask2</strong> - bitwise selector of more data sources to stream (optional)</li>
</ul>
<p>For more explanation of these options, please see the Sphero API
documentation.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>object containing streaming data options
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setDataStreaming = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, callback</span>) </span>{
    <span class="hljs-keyword">var</span> n = utils.intToHexArray(opts.n, <span class="hljs-number">2</span>),
        m = utils.intToHexArray(opts.m, <span class="hljs-number">2</span>),
        mask1 = utils.intToHexArray(opts.mask1, <span class="hljs-number">4</span>),
        pcnt = opts.pcnt &amp;= <span class="hljs-number">0xff</span>,
        mask2 = utils.intToHexArray(opts.mask2, <span class="hljs-number">4</span>);

    device.ds = {
      <span class="hljs-attr">mask1</span>: opts.mask1,
      <span class="hljs-attr">mask2</span>: opts.mask2
    };

    <span class="hljs-keyword">var</span> data = [].concat(n, m, mask1, pcnt, mask2);

    command(commands.setDataStreaming, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Configure Collisions command configures Sphero's collision detection
with the provided parameters.</p>
</div>
<div class="body">
<p>These include:</p>
<ul>
<li><strong>meth</strong> - which detection method to use. Supported methods are 0x01,
0x02, and 0x03 (see the collision detection document for details). 0x00
disables this service.</li>
<li><strong>xt, yt</strong> - 8-bit settable threshold for the X (left, right) and
y (front, back) axes of Sphero. 0x00 disables the contribution of that
axis.</li>
<li><strong>xs, ys</strong> - 8-bit settable speed value for X/Y axes. This setting is
ranged by the speed, than added to <code>xt</code> and <code>yt</code> to generate the final
threshold value.</li>
<li><strong>dead</strong> - an 8-bit post-collision dead time to prevent re-triggering.
Specified in 10ms increments.</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>object containing collision configuration opts
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">cb</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.configureCollisions = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, cb</span>) </span>{
    <span class="hljs-keyword">var</span> data = [
      opts.meth,
      opts.xt,
      opts.xs,
      opts.yt,
      opts.ys,
      opts.dead
    ];
    command(commands.setCollisionDetection, data, cb);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Configure Locator command configures Sphero's streaming location data
service.</p>
</div>
<div class="body">
<p>The following options must be provided:</p>
<ul>
<li><strong>flags</strong> - bit 0 determines whether calibrate commands auto-correct the
yaw tare value. When false, positive Y axis coincides with heading 0.
Other bits are reserved.</li>
<li><strong>x, y</strong> - the current (x/y) coordinates of Sphero on the ground plane in
centimeters</li>
<li><strong>yawTare</strong> - controls how the x,y-plane is aligned with Sphero's heading
coordinate system. When zero, yaw = 0 corresponds to facing down the
y-axis in the positive direction. Possible values are 0-359 inclusive.</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>object containing locator service configuration
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.configureLocator = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, callback</span>) </span>{
    <span class="hljs-keyword">var</span> flags = opts.flags &amp; <span class="hljs-number">0xFF</span>,
        x = utils.intToHexArray(opts.x, <span class="hljs-number">2</span>),
        y = utils.intToHexArray(opts.y, <span class="hljs-number">2</span>),
        yawTare = utils.intToHexArray(opts.yawTare, <span class="hljs-number">2</span>);

    <span class="hljs-keyword">var</span> data = [].concat(flags, x, y, yawTare);

    command(commands.locator, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Accelerometer Range command tells Sphero what accelerometer range
to use.</p>
</div>
<div class="body">
<p>By default, Sphero's solid-state accelerometer is set for a range of ±8Gs.
You may wish to change this, perhaps to resolve finer accelerations.</p>
<p>This command takes an index for the supported range, as explained below:</p>
<ul>
<li><code>0</code>: ±2Gs</li>
<li><code>1</code>: ±4Gs</li>
<li><code>2</code>: ±8Gs (default)</li>
<li><code>3</code>: ±16Gs</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">idx</span>
<span class="dox_type">Number</span>
<span>what accelerometer range to use
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setAccelRange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">idx, callback</span>) </span>{
    idx &amp;= idx;
    command(commands.setAccelerometer, [idx], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Read Locator command gets Sphero's current position (X,Y), component
velocities, and speed-over-ground (SOG).</p>
</div>
<div class="body">
<p>The position is a signed value in centimeters, the component velocities are
signed cm/sec, and the SOG is unsigned cm/sec.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with data
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.readLocator = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.readLocator, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set RGB LED command sets the colors of Sphero's RGB LED.</p>
</div>
<div class="body">
<p>An object containaing <code>red</code>, <code>green</code>, and <code>blue</code> values must be provided.</p>
<p>If <code>opts.flag</code> is set to 1 (default), the color is persisted across power
cycles.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>object containing RGB values for Sphero's LED
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setRgbLed = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, callback</span>) </span>{
    <span class="hljs-keyword">var</span> data = [opts.red, opts.green, opts.blue, opts.flag || <span class="hljs-number">0x01</span>];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
      data[i] &amp;= <span class="hljs-number">0xFF</span>;
    }

    command(commands.setRgbLed, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Back LED command allows brightness adjustment of Sphero's tail
light.</p>
</div>
<div class="body">
<p>This value does not persist across power cycles.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">brightness</span>
<span class="dox_type">Number</span>
<span>brightness to set to Sphero's tail light
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setBackLed = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">brightness, callback</span>) </span>{
    command(commands.setBackLed, [brightness], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get RGB LED command fetches the current &quot;user LED color&quot; value, stored
in Sphero's configuration.</p>
</div>
<div class="body">
<p>This value may or may not be what's currently displayed by Sphero's LEDs.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getRgbLed = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getRgbLed, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Roll command tells Sphero to roll along the provided vector.</p>
</div>
<div class="body">
<p>Both a speed and heading are required, the latter is considered relative to
the last calibrated direction.</p>
<p>Permissible heading values are 0 to 359 inclusive.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">speed</span>
<span class="dox_type">Number</span>
<span>what speed Sphero should roll at
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">heading</span>
<span class="dox_type">Number</span>
<span>what heading Sphero should roll towards (0-359)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[state]</span>
<span class="dox_type">Number</span>
<span>optional state parameter
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.roll = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">speed, heading, state, callback</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> state === <span class="hljs-string">"function"</span> || <span class="hljs-keyword">typeof</span> state === <span class="hljs-string">"undefined"</span>) {
      callback = state;
      state = <span class="hljs-number">0x01</span>;
    }

    speed &amp;= <span class="hljs-number">0xFF</span>;
    heading = utils.intToHexArray(heading, <span class="hljs-number">2</span>);
    state &amp;= <span class="hljs-number">0x03</span>;

    <span class="hljs-keyword">var</span> data = [].concat(speed, heading, state);

    command(commands.roll, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Boost command executes Sphero's boost macro.</p>
</div>
<div class="body">
<p>It takes a 1-byte parameter, 0x01 to start boosting, or 0x00 to stop.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">boost</span>
<span class="dox_type">Number</span>
<span>whether or not to boost (1 - yes, 0 - no)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.boost = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">boost, callback</span>) </span>{
    boost &amp;= <span class="hljs-number">0x01</span>;
    command(commands.boost, [boost], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Raw Motors command allows manual control over one or both of
Sphero's motor output values.</p>
</div>
<div class="body">
<p>Each motor (left and right requires a mode and a power value from 0-255.</p>
<p>This command will disable stabilization is both mode's aren't &quot;ignore&quot;, so
you'll need to re-enable it once you're done.</p>
<p>Possible modes:</p>
<ul>
<li><code>0x00</code>: Off (motor is open circuit)</li>
<li><code>0x01</code>: Forward</li>
<li><code>0x02</code>: Reverse</li>
<li><code>0x03</code>: Brake (motor is shorted)</li>
<li><code>0x04</code>: Ignore (motor mode and power is left unchanged</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>object with mode/power values (e.g. lmode, lpower)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setRawMotors = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts, callback</span>) </span>{
    <span class="hljs-keyword">var</span> lmode = opts.lmode &amp; <span class="hljs-number">0x07</span>,
        lpower = opts.lpower &amp; <span class="hljs-number">0xFF</span>,
        rmode = opts.rmode &amp; <span class="hljs-number">0x07</span>,
        rpower = opts.rpower &amp; <span class="hljs-number">0xFF</span>;

    <span class="hljs-keyword">var</span> data = [lmode, lpower, rmode, rpower];

    command(commands.setRawMotors, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Motion Timeout command gives Sphero an ultimate timeout for the
last motion command to keep Sphero from rolling away in the case of
a crashed (or paused) application.</p>
</div>
<div class="body">
<p>This defaults to 2000ms (2 seconds) upon wakeup.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">time</span>
<span class="dox_type">Number</span>
<span>timeout length in milliseconds
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered when done writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setMotionTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">time, callback</span>) </span>{
    time = utils.intToHexArray(time, <span class="hljs-number">2</span>);
    command(commands.setMotionTimeout, time, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Permanent Option Flags command assigns Sphero's permanent option
flags to the provided values, and writes them immediately to the config
block.</p>
</div>
<div class="body">
<p>See below for the bit definitions.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">flags</span>
<span class="dox_type">Array</span>
<span>permanent option flags
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered when done writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setPermOptionFlags = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flags, callback</span>) </span>{
    flags = utils.intToHexArray(flags, <span class="hljs-number">4</span>);
    command(commands.setOptionsFlag, flags, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Permanent Option Flags command returns Sphero's permanent option
flags, as a bit field.</p>
</div>
<div class="body">
<p>Here's possible bit fields, and their descriptions:</p>
<ul>
<li><code>0</code>: Set to prevent Sphero from immediately going to sleep when placed in
the charger and connected over Bluetooth.</li>
<li><code>1</code>: Set to enable Vector Drive, that is, when Sphero is stopped and
a new roll command is issued it achieves the heading before moving along
it.</li>
<li><code>2</code>: Set to disable self-leveling when Sphero is inserted into the
charger.</li>
<li><code>3</code>: Set to force the tail LED always on.</li>
<li><code>4</code>: Set to enable motion timeouts (see DID 02h, CID 34h)</li>
<li><code>5</code>: Set to enable retail Demo Mode (when placed in the charger, ball
runs a slow rainbow macro for 60 minutes and then goes to sleep).</li>
<li><code>6</code>: Set double tap awake sensitivity to Light</li>
<li><code>7</code>: Set double tap awake sensitivity to Heavy</li>
<li><code>8</code>: Enable gyro max async message (NOT SUPPORTED IN VERSION 1.47)</li>
<li><code>6-31</code>: Unassigned</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function triggered with option flags data
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getPermOptionFlags = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getOptionsFlag, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Temporary Option Flags command assigns Sphero's temporary option
flags to the provided values. These do not persist across power cycles.</p>
</div>
<div class="body">
<p>See below for the bit definitions.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">flags</span>
<span class="dox_type">Array</span>
<span>permanent option flags
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered when done writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setTempOptionFlags = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flags, callback</span>) </span>{
    flags = utils.intToHexArray(flags, <span class="hljs-number">4</span>);
    command(commands.setTempOptionFlags, flags, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Temporary Option Flags command returns Sphero's temporary option
flags, as a bit field:</p>
</div>
<div class="body">
<ul>
<li><code>0</code>: Enable Stop On Disconnect behavior</li>
<li><code>1-31</code>: Unassigned</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function triggered with option flags data
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getTempOptionFlags = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getTempOptionFlags, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Configuration Block command retrieves one of Sphero's configuration
blocks.</p>
</div>
<div class="body">
<p>The response is a simple one; an error code of 0x08 is returned when the
resources are currently unavailable to send the requested block back. The
actual configuration block data returns in an asynchronous message of type
0x04 due to its length (if there is no error).</p>
<p>ID = <code>0x00</code> requests the factory configuration block
ID = <code>0x01</code> requests the user configuration block, which is updated with
current values first</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">id</span>
<span class="dox_type">Number</span>
<span>which configuration block to fetch
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getConfigBlock = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, callback</span>) </span>{
    id &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.getConfigBlock, [id], callback);
  };

  device._setSsbBlock = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cmd, pwd, block, callback</span>) </span>{
    pwd = utils.intToHexArray(pwd, <span class="hljs-number">4</span>);
    <span class="hljs-keyword">var</span> data = [].concat(pwd, block);
    command(cmd, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set SSB Modifier Block command allows the SSB to be patched with a new
modifier block - including the Boost macro.</p>
</div>
<div class="body">
<p>The changes take effect immediately.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">pwd</span>
<span class="dox_type">Number</span>
<span>a 32 bit (4 bytes) hexadecimal value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">block</span>
<span class="dox_type">Array</span>
<span>array of bytes with the data to be written
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>a function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setSsbModBlock = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pwd, block, callback</span>) </span>{
    device._setSsbBlock(commands.setSsbParams, pwd, block, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Device Mode command assigns the operation mode of Sphero based on
the supplied mode value.</p>
</div>
<div class="body">
<ul>
<li><strong>0x00</strong>: Normal mode</li>
<li><strong>0x01</strong>: User Hack mode. Enables ASCII shell commands, refer to the
associated document for details.</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mode</span>
<span class="dox_type">Number</span>
<span>which mode to set Sphero to
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setDeviceMode = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">mode, callback</span>) </span>{
    mode &amp;= <span class="hljs-number">0x01</span>;
    command(commands.setDeviceMode, [mode], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Config Block command accepts an exact copy of the configuration
block, and loads it into the RAM copy of the configuration block.</p>
</div>
<div class="body">
<p>The RAM copy is then saved to flash.</p>
<p>The configuration block can be obtained by using the Get Configuration
Block command.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">block</span>
<span class="dox_type">Array</span>
<span><ul>
<li>An array of bytes with the data to be written</li>
</ul>
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span><ul>
<li>To be triggered when done</li>
</ul>
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setConfigBlock = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block, callback</span>) </span>{
    command(commands.setConfigBlock, block, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Device Mode command gets the current device mode of Sphero.</p>
</div>
<div class="body">
<p>Possible values:</p>
<ul>
<li><strong>0x00</strong>: Normal mode</li>
<li><strong>0x01</strong>: User Hack mode.</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getDeviceMode = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getDeviceMode, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get SSB command retrieves Sphero's Soul Block.</p>
</div>
<div class="body">
<p>The response is simple, and then the actual block of soulular data returns
in an asynchronous message of type 0x0D, due to it's 0x440 byte length</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getSsb = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getSsb, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set SSB command sets Sphero's Soul Block.</p>
</div>
<div class="body">
<p>The actual payload length is 0x404 bytes, but if you use the special DLEN
encoding of 0xff, Sphero will know what to expect.</p>
<p>You need to supply the password in order for it to work.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">pwd</span>
<span class="dox_type">Number</span>
<span>a 32 bit (4 bytes) hexadecimal value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">block</span>
<span class="dox_type">Array</span>
<span>array of bytes with the data to be written
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>a function to be triggered after writing
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setSsb = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pwd, block, callback</span>) </span>{
    device._setSsbBlock(commands.setSsb, pwd, block, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Refill Bank command attempts to refill either the Boost bank (0x00) or
the Shield bank (0x01) by attempting to deduct the respective refill cost
from the current number of cores.</p>
</div>
<div class="body">
<p>If it succeeds, the bank is set to the maximum obtainable for that level,
the cores are spent, and a success response is returned with the lower core
balance.</p>
<p>If there aren't enough cores available to spend, Sphero responds with an
EEXEC error (0x08)</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">type</span>
<span class="dox_type">Number</span>
<span>what bank to refill (0 - Boost, 1 - Shield)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.refillBank = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type, callback</span>) </span>{
    type &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.ssbRefill, [type], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Buy Consumable command attempts to spend cores on consumables.</p>
</div>
<div class="body">
<p>The consumable ID is given (0 - 7), as well as the quantity requested to
purchase.</p>
<p>If the purchase succeeds, the consumable count is increased, the cores are
spent, and a success response is returned with the increased quantity and
lower balance.</p>
<p>If there aren't enough cores available to spend, or the purchase would
exceed the max consumable quantity of 255, Sphero responds with an EEXEC
error (0x08)</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">id</span>
<span class="dox_type">Number</span>
<span>what consumable to buy
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">qty</span>
<span class="dox_type">Number</span>
<span>how many consumables to buy
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.buyConsumable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, qty, callback</span>) </span>{
    id &amp;= <span class="hljs-number">0xFF</span>;
    qty &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.ssbBuy, [id, qty], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Use Consumable command attempts to use a consumable if the quantity
remaining is non-zero.</p>
</div>
<div class="body">
<p>On success, the return message echoes the ID of this consumable and how
many of them remain.</p>
<p>If the associated macro is already running, or the quantity remaining is
zero, this returns an EEXEC error (0x08).</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">id</span>
<span class="dox_type">Number</span>
<span>what consumable to use
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be called with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.useConsumable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, callback</span>) </span>{
    id &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.ssbUseConsumeable, [id], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Grant Cores command adds the supplied number of cores.</p>
</div>
<div class="body">
<p>If the first bit in the flags byte is set, the command immediately commits
the SSB to flash. Otherwise, it does not.</p>
<p>All other bits are reserved.</p>
<p>If the password is not accepted, this command fails without consequence.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">pw</span>
<span class="dox_type">Number</span>
<span>32-bit password
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">qty</span>
<span class="dox_type">Number</span>
<span>32-bit number of cores to add
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">flags</span>
<span class="dox_type">Number</span>
<span>8-bit flags byte
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.grantCores = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pw, qty, flags, callback</span>) </span>{
    pw = utils.intToHexArray(pw, <span class="hljs-number">4</span>);
    qty = utils.intToHexArray(qty, <span class="hljs-number">4</span>);
    flags &amp;= <span class="hljs-number">0xFF</span>;

    <span class="hljs-keyword">var</span> data = [].concat(pw, qty, flags);

    command(commands.ssbGrantCores, data, callback);
  };

  device._xpOrLevelUp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">cmd, pw, gen, cb</span>) </span>{
    pw = utils.intToHexArray(pw, <span class="hljs-number">4</span>);
    gen &amp;= <span class="hljs-number">0xFF</span>;

    command(cmd, [].concat(pw, gen), cb);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<div class="dox">
<div class="summary">
<p>The add XP command increases XP by adding the supplied number of minutes
of drive time, and immediately commits the SSB to flash.</p>
</div>
<div class="body">
<p>If the password is not accepted, this command fails without consequence.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">pw</span>
<span class="dox_type">Number</span>
<span>32-bit password
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">qty</span>
<span class="dox_type">Number</span>
<span>8-bit number of minutes of drive time to add
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.addXp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pw, qty, callback</span>) </span>{
    device._xpOrLevelUp(commands.ssbAddXp, pw, qty, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Level Up Attribute command attempts to increase the level of the
specified attribute by spending attribute points.</p>
</div>
<div class="body">
<p>The IDs are:</p>
<ul>
<li><strong>0x00</strong>: speed</li>
<li><strong>0x01</strong>: boost</li>
<li><strong>0x02</strong>: brightness</li>
<li><strong>0x03</strong>: shield</li>
</ul>
<p>If successful, the SSB is committed to flash, and a response packet
containing the attribute ID, new level, and remaining attribute points is
returned.</p>
<p>If there are not enough attribute points, this command returns an EEXEC
error (0x08).</p>
<p>If the password is not accepted, this command fails without consequence.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">pw</span>
<span class="dox_type">Number</span>
<span>32-bit password
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">id</span>
<span class="dox_type">Number</span>
<span>which attribute to level up
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.levelUpAttr = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pw, id, callback</span>) </span>{
    device._xpOrLevelUp(commands.ssbLevelUpAttr, pw, id, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Password Seed command returns Sphero's password seed.</p>
</div>
<div class="body">
<p>Protected Sphero commands require a password.</p>
<p>Refer to the Sphero API documentation, Appendix D for more information.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getPasswordSeed = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.getPwSeed, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Enable SSB Async Messages command turns on/off soul block related
asynchronous messages.</p>
</div>
<div class="body">
<p>These include shield collision/regrowth messages, boost use/regrowth
messages, XP growth, and level-up messages.</p>
<p>This feature defaults to off.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">flag</span>
<span class="dox_type">Number</span>
<span>whether or not to enable async messages
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered after write
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.enableSsbAsyncMsg = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">flag, callback</span>) </span>{
    flag &amp;= <span class="hljs-number">0x01</span>;
    command(commands.ssbEnableAsync, [flag], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Run Macro command attempts to execute the specified macro.</p>
</div>
<div class="body">
<p>Macro IDs are split into groups:</p>
<p>0-31 are System Macros. They are compiled into the Main Application, and
cannot be deleted. They are always available to run.</p>
<p>32-253 are User Macros. They are downloaded and persistently stored, and
can be deleted in total.</p>
<p>255 is the Temporary Macro, a special user macro as it is held in RAM for
execution.</p>
<p>254 is also a special user macro, called the Stream Macro that doesn't
require this call to begin execution.</p>
<p>This command will fail if there is a currently executing macro, or the
specified ID code can't be found.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">id</span>
<span class="dox_type">Number</span>
<span>8-bit Macro ID to run
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.runMacro = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">id, callback</span>) </span>{
    id &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.runMacro, [id], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Save Temporary Macro stores the attached macro definition into the
temporary RAM buffer for later execution.</p>
</div>
<div class="body">
<p>If this command is sent while a Temporary or Stream Macro is executing it
will be terminated so that its storage space can be overwritten. As with
all macros, the longest definition that can be sent is 254 bytes.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">macro</span>
<span class="dox_type">Array</span>
<span>array of bytes with the data to be written
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.saveTempMacro = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">macro, callback</span>) </span>{
    command(commands.saveTempMacro, macro, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Save macro</p>
</div>
<div class="body">
<p>The Save Macro command stores the attached macro definition into the
persistent store for later execution. This command can be sent even if
other macros are executing.</p>
<p>You will receive a failure response if you attempt to send an ID number in
the System Macro range, 255 for the Temp Macro and ID of an existing user
macro in the storage block.</p>
<p>As with all macros, the longest definition that can be sent is 254 bytes.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">macro</span>
<span class="dox_type">Array</span>
<span>array of bytes with the data to be written
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.saveMacro = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">macro, callback</span>) </span>{
    command(commands.saveMacro, macro, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Reinit Macro Executive command terminates any running macro, and
reinitializes the macro system.</p>
</div>
<div class="body">
<p>The table of any persistent user macros is cleared.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.reInitMacroExec = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.initMacroExecutive, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Abort Macro command aborts any executing macro, and returns both it's
ID code and the command number currently in progress.</p>
</div>
<div class="body">
<p>An exception is a System Macro executing with the UNKILLABLE flag set.</p>
<p>A returned ID code of 0x00 indicates that no macro was running, an ID code
of 0xFFFF as the CmdNum indicates the macro was unkillable.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.abortMacro = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.abortMacro, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Get Macro Status command returns the ID code and command number of the
currently executing macro.</p>
</div>
<div class="body">
<p>If no macro is running, the 0x00 is returned for the ID code, and the
command number is left over from the previous macro.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.getMacroStatus = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.macroStatus, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Set Macro Parameter command allows system globals that influence
certain macro commands to be selectively altered from outside of the macro
system itself.</p>
</div>
<div class="body">
<p>The values of Val1 and Val2 depend on the parameter index.</p>
<p>Possible indices:</p>
<ul>
<li><strong>00h</strong> Assign System Delay 1: Val1 = MSB, Val2 = LSB</li>
<li><strong>01h</strong> Assign System Delay 2: Val1 = MSB, Val2 = LSB</li>
<li><strong>02h</strong> Assign System Speed 1: Val1 = speed, Val2 = 0 (ignored)</li>
<li><strong>03h</strong> Assign System Speed 2: Val1 = speed, Val2 = 0 (ignored)</li>
<li><strong>04h</strong> Assign System Loops: Val1 = loop count, Val2 = 0 (ignored)</li>
</ul>
<p>For more details, please refer to the Sphero Macro document.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">index</span>
<span class="dox_type">Number</span>
<span>what parameter index to use
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val1</span>
<span class="dox_type">Number</span>
<span>value 1 to set
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val2</span>
<span class="dox_type">Number</span>
<span>value 2 to set
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.setMacroParam = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index, val1, val2, callback</span>) </span>{
    command(
      commands.setMacroParam,
      utils.argsToHexArray(index, val1, val2),
      callback
    );
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Append Macro Chunk project stores the attached macro definition into
the temporary RAM buffer for later execution.</p>
</div>
<div class="body">
<p>It's similar to the Save Temporary Macro command, but allows building up
longer temporary macros.</p>
<p>Any existing Macro ID can be sent through this command, and executed
through the Run Macro call using ID 0xFF.</p>
<p>If this command is sent while a Temporary or Stream Macro is executing it
will be terminated so that its storage space can be overwritten. As with
all macros, the longest chunk that can be sent is 254 bytes.</p>
<p>You must follow this with a Run Macro command (ID 0xFF) to actually get it
to go and it is best to prefix this command with an Abort call to make
certain the larger buffer is completely initialized.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">chunk</span>
<span class="dox_type">Array</span>
<span>of bytes to append for macro execution
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.appendMacroChunk = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">chunk, callback</span>) </span>{
    command(commands.appendTempMacroChunk, chunk, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Erase orbBasic Storage command erases any existing program in the
specified storage area.</p>
</div>
<div class="body">
<p>Specify 0x00 for the temporary RAM buffer, or 0x01 for the persistent
storage area.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">area</span>
<span class="dox_type">Number</span>
<span>which area to erase
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.eraseOrbBasicStorage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">area, callback</span>) </span>{
    area &amp;= <span class="hljs-number">0xFF</span>;
    command(commands.eraseOBStorage, [area], callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Append orbBasic Fragment command appends a patch of orbBasic code to
existing ones in the specified storage area (0x00 for RAM, 0x01 for
persistent).</p>
</div>
<div class="body">
<p>Complete lines are not required. A line begins with a decimal line number
followed by a space and is terminated with a <LF>.</p>
<p>See the orbBasic Interpreter document for complete information.</p>
<p>Possible error responses would be ORBOTIX_RSP_CODE_EPARAM if an illegal
storage area is specified or ORBOTIX_RSP_CODE_EEXEC if the specified
storage area is full.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">area</span>
<span class="dox_type">Number</span>
<span>which area to append the fragment to
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">code</span>
<span class="dox_type">String</span>
<span>orbBasic code to append
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.appendOrbBasicFragment = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">area, code, callback</span>) </span>{
    area &amp;= <span class="hljs-number">0xFF</span>;
    <span class="hljs-keyword">var</span> data = [].concat(area, code);
    command(commands.appendOBFragment, data, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Execute orbBasic Program command attempts to run a program in the
specified storage area, beginning at the specified line number.</p>
</div>
<div class="body">
<p>This command will fail if there is already an orbBasic program running.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">area</span>
<span class="dox_type">Number</span>
<span>which area to run from
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">slMSB</span>
<span class="dox_type">Number</span>
<span>start line
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">slLSB</span>
<span class="dox_type">Number</span>
<span>start line
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.executeOrbBasicProgram = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">area, slMSB, slLSB, callback</span>) </span>{
    command(
      commands.execOBProgram,
      utils.argsToHexArray(area, slMSB, slLSB),
      callback
    );
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Abort orbBasic Program command aborts execution of any currently
running orbBasic program.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.abortOrbBasicProgram = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.abortOBProgram, <span class="hljs-literal">null</span>, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Submit value To Input command takes the place of the typical user
console in orbBasic and allows a user to answer an input request.</p>
</div>
<div class="body">
<p>If there is no pending input request when this API command is sent, the
supplied value is ignored without error.</p>
<p>Refer to the orbBasic language document for further information.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val</span>
<span class="dox_type">Number</span>
<span>value to respond with
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.submitValueToInput = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, callback</span>) </span>{
    val = utils.intToHexArray(val, <span class="hljs-number">4</span>);
    command(commands.answerInput, val, callback);
  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Commit To Flash command copies the current orbBasic RAM program to
persistent flash storage.</p>
</div>
<div class="body">
<p>It will fail if a program is currently executing out of flash.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function to be triggered with response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  device.commitToFlash = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.commitToFlash, <span class="hljs-literal">null</span>, callback);
  };

  device._commitToFlashAlias = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) </span>{
    command(commands.commitToFlashAlias, <span class="hljs-literal">null</span>, callback);
  };
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
