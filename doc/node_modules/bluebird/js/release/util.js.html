<!DOCTYPE html>
<html>
<head>
  <title>util.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/bluebird/js/release/util.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>util.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">"use strict"</span>;
<span class="hljs-keyword">var</span> es5 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./es5"</span>);
<span class="hljs-keyword">var</span> canEvaluate = <span class="hljs-keyword">typeof</span> navigator == <span class="hljs-string">"undefined"</span>;

<span class="hljs-keyword">var</span> errorObj = {<span class="hljs-attr">e</span>: {}};
<span class="hljs-keyword">var</span> tryCatchTarget;
<span class="hljs-keyword">var</span> globalObject = <span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">"undefined"</span> ? self :
    <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">"undefined"</span> ? <span class="hljs-built_in">window</span> :
    <span class="hljs-keyword">typeof</span> global !== <span class="hljs-string">"undefined"</span> ? global :
    <span class="hljs-keyword">this</span> !== <span class="hljs-literal">undefined</span> ? <span class="hljs-keyword">this</span> : <span class="hljs-literal">null</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryCatcher</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> target = tryCatchTarget;
        tryCatchTarget = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">return</span> target.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
    } <span class="hljs-keyword">catch</span> (e) {
        errorObj.e = e;
        <span class="hljs-keyword">return</span> errorObj;
    }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryCatch</span>(<span class="hljs-params">fn</span>) </span>{
    tryCatchTarget = fn;
    <span class="hljs-keyword">return</span> tryCatcher;
}

<span class="hljs-keyword">var</span> inherits = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Child, Parent</span>) </span>{
    <span class="hljs-keyword">var</span> hasProp = {}.hasOwnProperty;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">T</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.constructor = Child;
        <span class="hljs-keyword">this</span>.constructor$ = Parent;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> propertyName <span class="hljs-keyword">in</span> Parent.prototype) {
            <span class="hljs-keyword">if</span> (hasProp.call(Parent.prototype, propertyName) &amp;&amp;
                propertyName.charAt(propertyName.length<span class="hljs-number">-1</span>) !== <span class="hljs-string">"$"</span>
           ) {
                <span class="hljs-keyword">this</span>[propertyName + <span class="hljs-string">"$"</span>] = Parent.prototype[propertyName];
            }
        }
    }
    T.prototype = Parent.prototype;
    Child.prototype = <span class="hljs-keyword">new</span> T();
    <span class="hljs-keyword">return</span> Child.prototype;
};


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPrimitive</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> val == <span class="hljs-literal">null</span> || val === <span class="hljs-literal">true</span> || val === <span class="hljs-literal">false</span> ||
        <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"string"</span> || <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"number"</span>;

}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"function"</span> ||
           <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> &amp;&amp; value !== <span class="hljs-literal">null</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maybeWrapAsError</span>(<span class="hljs-params">maybeError</span>) </span>{
    <span class="hljs-keyword">if</span> (!isPrimitive(maybeError)) <span class="hljs-keyword">return</span> maybeError;

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(safeToString(maybeError));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withAppended</span>(<span class="hljs-params">target, appendee</span>) </span>{
    <span class="hljs-keyword">var</span> len = target.length;
    <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
        ret[i] = target[i];
    }
    ret[i] = appendee;
    <span class="hljs-keyword">return</span> ret;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDataPropertyOrDefault</span>(<span class="hljs-params">obj, key, defaultValue</span>) </span>{
    <span class="hljs-keyword">if</span> (es5.isES5) {
        <span class="hljs-keyword">var</span> desc = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(obj, key);

        <span class="hljs-keyword">if</span> (desc != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> desc.get == <span class="hljs-literal">null</span> &amp;&amp; desc.set == <span class="hljs-literal">null</span>
                    ? desc.value
                    : defaultValue;
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> {}.hasOwnProperty.call(obj, key) ? obj[key] : <span class="hljs-literal">undefined</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notEnumerableProp</span>(<span class="hljs-params">obj, name, value</span>) </span>{
    <span class="hljs-keyword">if</span> (isPrimitive(obj)) <span class="hljs-keyword">return</span> obj;
    <span class="hljs-keyword">var</span> descriptor = {
        <span class="hljs-attr">value</span>: value,
        <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    };
    es5.defineProperty(obj, name, descriptor);
    <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thrower</span>(<span class="hljs-params">r</span>) </span>{
    <span class="hljs-keyword">throw</span> r;
}

<span class="hljs-keyword">var</span> inheritedDataKeys = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> excludedPrototypes = [
        <span class="hljs-built_in">Array</span>.prototype,
        <span class="hljs-built_in">Object</span>.prototype,
        <span class="hljs-built_in">Function</span>.prototype
    ];

    <span class="hljs-keyword">var</span> isExcludedProto = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; excludedPrototypes.length; ++i) {
            <span class="hljs-keyword">if</span> (excludedPrototypes[i] === val) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    };

    <span class="hljs-keyword">if</span> (es5.isES5) {
        <span class="hljs-keyword">var</span> getKeys = <span class="hljs-built_in">Object</span>.getOwnPropertyNames;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
            <span class="hljs-keyword">var</span> ret = [];
            <span class="hljs-keyword">var</span> visitedKeys = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
            <span class="hljs-keyword">while</span> (obj != <span class="hljs-literal">null</span> &amp;&amp; !isExcludedProto(obj)) {
                <span class="hljs-keyword">var</span> keys;
                <span class="hljs-keyword">try</span> {
                    keys = getKeys(obj);
                } <span class="hljs-keyword">catch</span> (e) {
                    <span class="hljs-keyword">return</span> ret;
                }
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; ++i) {
                    <span class="hljs-keyword">var</span> key = keys[i];
                    <span class="hljs-keyword">if</span> (visitedKeys[key]) <span class="hljs-keyword">continue</span>;
                    visitedKeys[key] = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">var</span> desc = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(obj, key);
                    <span class="hljs-keyword">if</span> (desc != <span class="hljs-literal">null</span> &amp;&amp; desc.get == <span class="hljs-literal">null</span> &amp;&amp; desc.set == <span class="hljs-literal">null</span>) {
                        ret.push(key);
                    }
                }
                obj = es5.getPrototypeOf(obj);
            }
            <span class="hljs-keyword">return</span> ret;
        };
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> hasProp = {}.hasOwnProperty;
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>{
            <span class="hljs-keyword">if</span> (isExcludedProto(obj)) <span class="hljs-keyword">return</span> [];
            <span class="hljs-keyword">var</span> ret = [];

            <span class="hljs-comment">/*jshint forin:false */</span>
            enumeration: <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
                <span class="hljs-keyword">if</span> (hasProp.call(obj, key)) {
                    ret.push(key);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; excludedPrototypes.length; ++i) {
                        <span class="hljs-keyword">if</span> (hasProp.call(excludedPrototypes[i], key)) {
                            <span class="hljs-keyword">continue</span> enumeration;
                        }
                    }
                    ret.push(key);
                }
            }
            <span class="hljs-keyword">return</span> ret;
        };
    }

})();

<span class="hljs-keyword">var</span> thisAssignmentPattern = <span class="hljs-regexp">/this\s*\.\s*\S+\s*=/</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isClass</span>(<span class="hljs-params">fn</span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">"function"</span>) {
            <span class="hljs-keyword">var</span> keys = es5.names(fn.prototype);

            <span class="hljs-keyword">var</span> hasMethods = es5.isES5 &amp;&amp; keys.length &gt; <span class="hljs-number">1</span>;
            <span class="hljs-keyword">var</span> hasMethodsOtherThanConstructor = keys.length &gt; <span class="hljs-number">0</span> &amp;&amp;
                !(keys.length === <span class="hljs-number">1</span> &amp;&amp; keys[<span class="hljs-number">0</span>] === <span class="hljs-string">"constructor"</span>);
            <span class="hljs-keyword">var</span> hasThisAssignmentAndStaticMethods =
                thisAssignmentPattern.test(fn + <span class="hljs-string">""</span>) &amp;&amp; es5.names(fn).length &gt; <span class="hljs-number">0</span>;

            <span class="hljs-keyword">if</span> (hasMethods || hasMethodsOtherThanConstructor ||
                hasThisAssignmentAndStaticMethods) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toFastProperties</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-comment">/*jshint -W027,-W055,-W031*/</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FakeConstructor</span>(<span class="hljs-params"></span>) </span>{}
    FakeConstructor.prototype = obj;
    <span class="hljs-keyword">var</span> l = <span class="hljs-number">8</span>;
    <span class="hljs-keyword">while</span> (l--) <span class="hljs-keyword">new</span> FakeConstructor();
    <span class="hljs-keyword">return</span> obj;
    <span class="hljs-built_in">eval</span>(obj);
}

<span class="hljs-keyword">var</span> rident = <span class="hljs-regexp">/^[a-z$_][a-z$_0-9]*$/i</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isIdentifier</span>(<span class="hljs-params">str</span>) </span>{
    <span class="hljs-keyword">return</span> rident.test(str);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filledRange</span>(<span class="hljs-params">count, prefix, suffix</span>) </span>{
    <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(count);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; count; ++i) {
        ret[i] = prefix + i + suffix;
    }
    <span class="hljs-keyword">return</span> ret;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeToString</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> obj + <span class="hljs-string">""</span>;
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"[no string representation]"</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isError</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> obj !== <span class="hljs-literal">null</span> &amp;&amp;
           <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"object"</span> &amp;&amp;
           <span class="hljs-keyword">typeof</span> obj.message === <span class="hljs-string">"string"</span> &amp;&amp;
           <span class="hljs-keyword">typeof</span> obj.name === <span class="hljs-string">"string"</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markAsOriginatingFromRejection</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">try</span> {
        notEnumerableProp(e, <span class="hljs-string">"isOperational"</span>, <span class="hljs-literal">true</span>);
    }
    <span class="hljs-keyword">catch</span>(ignore) {}
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">originatesFromRejection</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">if</span> (e == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> ((e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>[<span class="hljs-string">"__BluebirdErrorTypes__"</span>].OperationalError) ||
        e[<span class="hljs-string">"isOperational"</span>] === <span class="hljs-literal">true</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canAttachTrace</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> isError(obj) &amp;&amp; es5.propertyIsWritable(obj, <span class="hljs-string">"stack"</span>);
}

<span class="hljs-keyword">var</span> ensureErrorObject = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">"stack"</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>())) {
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (canAttachTrace(value)) <span class="hljs-keyword">return</span> value;
            <span class="hljs-keyword">try</span> {<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(safeToString(value));}
            <span class="hljs-keyword">catch</span>(err) {<span class="hljs-keyword">return</span> err;}
        };
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (canAttachTrace(value)) <span class="hljs-keyword">return</span> value;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(safeToString(value));
        };
    }
})();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">classString</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> {}.toString.call(obj);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyDescriptors</span>(<span class="hljs-params">from, to, filter</span>) </span>{
    <span class="hljs-keyword">var</span> keys = es5.names(<span class="hljs-keyword">from</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; ++i) {
        <span class="hljs-keyword">var</span> key = keys[i];
        <span class="hljs-keyword">if</span> (filter(key)) {
            <span class="hljs-keyword">try</span> {
                es5.defineProperty(to, key, es5.getDescriptor(<span class="hljs-keyword">from</span>, key));
            } <span class="hljs-keyword">catch</span> (ignore) {}
        }
    }
}

<span class="hljs-keyword">var</span> asArray = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">if</span> (es5.isArray(v)) {
        <span class="hljs-keyword">return</span> v;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> !== <span class="hljs-string">"undefined"</span> &amp;&amp; <span class="hljs-built_in">Symbol</span>.iterator) {
    <span class="hljs-keyword">var</span> ArrayFrom = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Array</span>.from === <span class="hljs-string">"function"</span> ? <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(v);
    } : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">var</span> ret = [];
        <span class="hljs-keyword">var</span> it = v[<span class="hljs-built_in">Symbol</span>.iterator]();
        <span class="hljs-keyword">var</span> itResult;
        <span class="hljs-keyword">while</span> (!((itResult = it.next()).done)) {
            ret.push(itResult.value);
        }
        <span class="hljs-keyword">return</span> ret;
    };

    asArray = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">if</span> (es5.isArray(v)) {
            <span class="hljs-keyword">return</span> v;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (v != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> v[<span class="hljs-built_in">Symbol</span>.iterator] === <span class="hljs-string">"function"</span>) {
            <span class="hljs-keyword">return</span> ArrayFrom(v);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    };
}

<span class="hljs-keyword">var</span> isNode = <span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">"undefined"</span> &amp;&amp;
        classString(process).toLowerCase() === <span class="hljs-string">"[object process]"</span>;

<span class="hljs-keyword">var</span> hasEnvVariables = <span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">"undefined"</span> &amp;&amp;
    <span class="hljs-keyword">typeof</span> process.env !== <span class="hljs-string">"undefined"</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">env</span>(<span class="hljs-params">key</span>) </span>{
    <span class="hljs-keyword">return</span> hasEnvVariables ? process.env[key] : <span class="hljs-literal">undefined</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNativePromise</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Promise</span> === <span class="hljs-string">"function"</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{});
            <span class="hljs-keyword">if</span> ({}.toString.call(promise) === <span class="hljs-string">"[object Promise]"</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>;
            }
        } <span class="hljs-keyword">catch</span> (e) {}
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">domainBind</span>(<span class="hljs-params">self, cb</span>) </span>{
    <span class="hljs-keyword">return</span> self.bind(cb);
}

<span class="hljs-keyword">var</span> ret = {
    <span class="hljs-attr">isClass</span>: isClass,
    <span class="hljs-attr">isIdentifier</span>: isIdentifier,
    <span class="hljs-attr">inheritedDataKeys</span>: inheritedDataKeys,
    <span class="hljs-attr">getDataPropertyOrDefault</span>: getDataPropertyOrDefault,
    <span class="hljs-attr">thrower</span>: thrower,
    <span class="hljs-attr">isArray</span>: es5.isArray,
    <span class="hljs-attr">asArray</span>: asArray,
    <span class="hljs-attr">notEnumerableProp</span>: notEnumerableProp,
    <span class="hljs-attr">isPrimitive</span>: isPrimitive,
    <span class="hljs-attr">isObject</span>: isObject,
    <span class="hljs-attr">isError</span>: isError,
    <span class="hljs-attr">canEvaluate</span>: canEvaluate,
    <span class="hljs-attr">errorObj</span>: errorObj,
    <span class="hljs-attr">tryCatch</span>: tryCatch,
    <span class="hljs-attr">inherits</span>: inherits,
    <span class="hljs-attr">withAppended</span>: withAppended,
    <span class="hljs-attr">maybeWrapAsError</span>: maybeWrapAsError,
    <span class="hljs-attr">toFastProperties</span>: toFastProperties,
    <span class="hljs-attr">filledRange</span>: filledRange,
    <span class="hljs-attr">toString</span>: safeToString,
    <span class="hljs-attr">canAttachTrace</span>: canAttachTrace,
    <span class="hljs-attr">ensureErrorObject</span>: ensureErrorObject,
    <span class="hljs-attr">originatesFromRejection</span>: originatesFromRejection,
    <span class="hljs-attr">markAsOriginatingFromRejection</span>: markAsOriginatingFromRejection,
    <span class="hljs-attr">classString</span>: classString,
    <span class="hljs-attr">copyDescriptors</span>: copyDescriptors,
    <span class="hljs-attr">hasDevTools</span>: <span class="hljs-keyword">typeof</span> chrome !== <span class="hljs-string">"undefined"</span> &amp;&amp; chrome &amp;&amp;
                 <span class="hljs-keyword">typeof</span> chrome.loadTimes === <span class="hljs-string">"function"</span>,
    <span class="hljs-attr">isNode</span>: isNode,
    <span class="hljs-attr">hasEnvVariables</span>: hasEnvVariables,
    <span class="hljs-attr">env</span>: env,
    <span class="hljs-attr">global</span>: globalObject,
    <span class="hljs-attr">getNativePromise</span>: getNativePromise,
    <span class="hljs-attr">domainBind</span>: domainBind
};
ret.isRecentNode = ret.isNode &amp;&amp; (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> version = process.versions.node.split(<span class="hljs-string">"."</span>).map(<span class="hljs-built_in">Number</span>);
    <span class="hljs-keyword">return</span> (version[<span class="hljs-number">0</span>] === <span class="hljs-number">0</span> &amp;&amp; version[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">10</span>) || (version[<span class="hljs-number">0</span>] &gt; <span class="hljs-number">0</span>);
})();

<span class="hljs-keyword">if</span> (ret.isNode) ret.toFastProperties(process);

<span class="hljs-keyword">try</span> {<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(); } <span class="hljs-keyword">catch</span> (e) {ret.lastLineError = e;}
<span class="hljs-built_in">module</span>.exports = ret;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
