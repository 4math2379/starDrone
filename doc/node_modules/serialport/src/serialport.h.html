<!DOCTYPE html>
<html>
<head>
  <title>serialport.h</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "node_modules/serialport/src/serialport.h";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>serialport.h</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="c"><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> _serialport_h_</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> _serialport_h_</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;nan.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;list&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">enum</span> SerialPortParity {
  SERIALPORT_PARITY_NONE = <span class="hljs-number">1</span>,
  SERIALPORT_PARITY_MARK = <span class="hljs-number">2</span>,
  SERIALPORT_PARITY_EVEN = <span class="hljs-number">3</span>,
  SERIALPORT_PARITY_ODD = <span class="hljs-number">4</span>,
  SERIALPORT_PARITY_SPACE = <span class="hljs-number">5</span>
};

<span class="hljs-keyword">enum</span> SerialPortStopBits {
  SERIALPORT_STOPBITS_ONE = <span class="hljs-number">1</span>,
  SERIALPORT_STOPBITS_ONE_FIVE = <span class="hljs-number">2</span>,
  SERIALPORT_STOPBITS_TWO = <span class="hljs-number">3</span>
};

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ERROR_STRING_SIZE 1024</span>

NAN_METHOD(List);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_List</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterList</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Open);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Open</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterOpen</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">AfterOpenSuccess</span><span class="hljs-params">(<span class="hljs-keyword">int</span> fd, Nan::Callback* dataCallback, Nan::Callback* disconnectedCallback, Nan::Callback* errorCallback)</span></span>;

NAN_METHOD(Update);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Update</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterUpdate</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Write);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Write</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterWrite</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Close);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Close</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterClose</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Flush);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Flush</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterFlush</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Set);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Set</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterSet</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

NAN_METHOD(Drain);
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_Drain</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EIO_AfterDrain</span><span class="hljs-params">(<span class="hljs-keyword">uv_work_t</span>* req)</span></span>;

<span class="hljs-function">SerialPortParity <span class="hljs-title">ToParityEnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> v8::Local&lt;v8::String&gt;&amp; str)</span></span>;
<span class="hljs-function">SerialPortStopBits <span class="hljs-title">ToStopBitEnum</span><span class="hljs-params">(<span class="hljs-keyword">double</span> stopBits)</span></span>;

<span class="hljs-keyword">struct</span> OpenBatonPlatformOptions { };
<span class="hljs-function">OpenBatonPlatformOptions* <span class="hljs-title">ParsePlatformOptions</span><span class="hljs-params">(<span class="hljs-keyword">const</span> v8::Local&lt;v8::Object&gt;&amp; options)</span></span>;

<span class="hljs-keyword">struct</span> OpenBaton {
  <span class="hljs-keyword">char</span> path[<span class="hljs-number">1024</span>];
  Nan::Callback* callback;
  Nan::Callback* dataCallback;
  Nan::Callback* disconnectedCallback;
  Nan::Callback* errorCallback;
  <span class="hljs-keyword">int</span> fd;
  <span class="hljs-keyword">int</span> result;
  <span class="hljs-keyword">int</span> baudRate;
  <span class="hljs-keyword">int</span> dataBits;
  <span class="hljs-keyword">int</span> bufferSize;
  <span class="hljs-keyword">bool</span> rtscts;
  <span class="hljs-keyword">bool</span> xon;
  <span class="hljs-keyword">bool</span> xoff;
  <span class="hljs-keyword">bool</span> xany;
  <span class="hljs-keyword">bool</span> dsrdtr;
  <span class="hljs-keyword">bool</span> hupcl;
  SerialPortParity parity;
  SerialPortStopBits stopBits;
  OpenBatonPlatformOptions* platformOptions;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-keyword">struct</span> WriteBaton {
  <span class="hljs-keyword">int</span> fd;
  <span class="hljs-keyword">char</span>* bufferData;
  <span class="hljs-keyword">size_t</span> bufferLength;
  <span class="hljs-keyword">size_t</span> offset;
  Nan::Persistent&lt;v8::Object&gt; buffer;
  Nan::Callback* callback;
  <span class="hljs-keyword">int</span> result;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-keyword">struct</span> QueuedWrite {
  <span class="hljs-keyword">uv_work_t</span> req;
  QueuedWrite *prev;
  QueuedWrite *next;
  WriteBaton* baton;

  QueuedWrite() {
    prev = <span class="hljs-keyword">this</span>;
    next = <span class="hljs-keyword">this</span>;

    baton = <span class="hljs-number">0</span>;
  }

  ~QueuedWrite() {
    remove();
  }

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span> </span>{
    prev-&gt;next = next;
    next-&gt;prev = prev;

    next = <span class="hljs-keyword">this</span>;
    prev = <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">insert_tail</span><span class="hljs-params">(QueuedWrite *qw)</span> </span>{
    qw-&gt;next = <span class="hljs-keyword">this</span>;
    qw-&gt;prev = <span class="hljs-keyword">this</span>-&gt;prev;
    qw-&gt;prev-&gt;next = qw;
    <span class="hljs-keyword">this</span>-&gt;prev = qw;
  }

  <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> next == <span class="hljs-keyword">this</span>;
  }
};

<span class="hljs-keyword">struct</span> CloseBaton {
  <span class="hljs-keyword">int</span> fd;
  Nan::Callback* callback;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-keyword">struct</span> ListResultItem {
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> comName;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> manufacturer;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> serialNumber;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> pnpId;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> locationId;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> vendorId;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> productId;
};

<span class="hljs-keyword">struct</span> ListBaton {
  Nan::Callback* callback;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">list</span>&lt;ListResultItem*&gt; results;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-keyword">struct</span> FlushBaton {
  <span class="hljs-keyword">int</span> fd;
  Nan::Callback* callback;
  <span class="hljs-keyword">int</span> result;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-keyword">struct</span> SetBaton {
  <span class="hljs-keyword">int</span> fd;
  Nan::Callback* callback;
  <span class="hljs-keyword">int</span> result;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
  <span class="hljs-keyword">bool</span> rts;
  <span class="hljs-keyword">bool</span> cts;
  <span class="hljs-keyword">bool</span> dtr;
  <span class="hljs-keyword">bool</span> dsr;
  <span class="hljs-keyword">bool</span> brk;
};

<span class="hljs-keyword">struct</span> DrainBaton {
  <span class="hljs-keyword">int</span> fd;
  Nan::Callback* callback;
  <span class="hljs-keyword">int</span> result;
  <span class="hljs-keyword">char</span> errorString[ERROR_STRING_SIZE];
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">int</span> fd, OpenBaton *data)</span></span>;

<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
