<!DOCTYPE html>
<html>
<head>
  <title>utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../";
    var thisFile = "node_modules/serialport/node_modules/jodid25519/lib/utils.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>utils.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">"use strict"</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Copyright (c) 2011, 2012, 2014 Ron Garret
Copyright (c) 2007, 2013, 2014 Michele Bini
Copyright (c) 2014 Mega Limited
under the MIT License.</p>
</div>
<div class="body">
<p>Authors: Guy K. Kloss, Michele Bini, Ron Garret</p>
<p>You should have received a copy of the license along with this program.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> core = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./core'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>A collection of general utility functions..</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> ns = {};

    <span class="hljs-keyword">var</span> _HEXCHARS = <span class="hljs-string">"0123456789abcdef"</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_hexencode</span>(<span class="hljs-params">vector</span>) </span>{
        <span class="hljs-keyword">var</span> result = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = vector.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">var</span> value = vector[i];
            result.push(_HEXCHARS.substr((value &gt;&gt;&gt; <span class="hljs-number">12</span>) &amp; <span class="hljs-number">0x0f</span>, <span class="hljs-number">1</span>));
            result.push(_HEXCHARS.substr((value &gt;&gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0x0f</span>, <span class="hljs-number">1</span>));
            result.push(_HEXCHARS.substr((value &gt;&gt;&gt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0x0f</span>, <span class="hljs-number">1</span>));
            result.push(_HEXCHARS.substr(value &amp; <span class="hljs-number">0x0f</span>, <span class="hljs-number">1</span>));
        }
        <span class="hljs-keyword">return</span> result.join(<span class="hljs-string">''</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_hexdecode</span>(<span class="hljs-params">vector</span>) </span>{
        <span class="hljs-keyword">var</span> result = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>];
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = vector.length - <span class="hljs-number">1</span>, l = <span class="hljs-number">0</span>; i &gt;= <span class="hljs-number">0</span>; i -= <span class="hljs-number">4</span>) {
            result[l] = (_HEXCHARS.indexOf(vector.charAt(i)))
                      | (_HEXCHARS.indexOf(vector.charAt(i - <span class="hljs-number">1</span>)) &lt;&lt; <span class="hljs-number">4</span>)
                      | (_HEXCHARS.indexOf(vector.charAt(i - <span class="hljs-number">2</span>)) &lt;&lt; <span class="hljs-number">8</span>)
                      | (_HEXCHARS.indexOf(vector.charAt(i - <span class="hljs-number">3</span>)) &lt;&lt; <span class="hljs-number">12</span>);
            l++;
        }
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">var</span> _BASE32CHARS = <span class="hljs-string">"abcdefghijklmnopqrstuvwxyz234567"</span>;

    <span class="hljs-keyword">var</span> _BASE32VALUES = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> result = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; _BASE32CHARS.length; i++) {
            result[_BASE32CHARS.charAt(i)] = i;
        }
        <span class="hljs-keyword">return</span> result;
    })();

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_base32encode</span>(<span class="hljs-params">n</span>) </span>{
        <span class="hljs-keyword">var</span> c;
        <span class="hljs-keyword">var</span> r = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">for</span> (c = <span class="hljs-number">0</span>; c &lt; <span class="hljs-number">255</span>; c += <span class="hljs-number">5</span>) {
            r = _BASE32CHARS.substr(core.getbit(n, c)
                                    + (core.getbit(n, c + <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">1</span>)
                                    + (core.getbit(n, c + <span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">2</span>)
                                    + (core.getbit(n, c + <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">3</span>)
                                    + (core.getbit(n, c + <span class="hljs-number">4</span>) &lt;&lt; <span class="hljs-number">4</span>), <span class="hljs-number">1</span>)
                                    + r;
        }
        <span class="hljs-keyword">return</span> r;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_base32decode</span>(<span class="hljs-params">n</span>) </span>{
        <span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> r = core.ZERO();
        <span class="hljs-keyword">var</span> l = n.length;
        <span class="hljs-keyword">for</span> (c = <span class="hljs-number">0</span>; (l &gt; <span class="hljs-number">0</span>) &amp;&amp; (c &lt; <span class="hljs-number">255</span>); c += <span class="hljs-number">5</span>) {
            l--;
            <span class="hljs-keyword">var</span> v = _BASE32VALUES[n.substr(l, <span class="hljs-number">1</span>)];
            core.setbit(r, c, v &amp; <span class="hljs-number">1</span>);
            v &gt;&gt;= <span class="hljs-number">1</span>;
            core.setbit(r, c + <span class="hljs-number">1</span>, v &amp; <span class="hljs-number">1</span>);
            v &gt;&gt;= <span class="hljs-number">1</span>;
            core.setbit(r, c + <span class="hljs-number">2</span>, v &amp; <span class="hljs-number">1</span>);
            v &gt;&gt;= <span class="hljs-number">1</span>;
            core.setbit(r, c + <span class="hljs-number">3</span>, v &amp; <span class="hljs-number">1</span>);
            v &gt;&gt;= <span class="hljs-number">1</span>;
            core.setbit(r, c + <span class="hljs-number">4</span>, v &amp; <span class="hljs-number">1</span>);
           }
        <span class="hljs-keyword">return</span> r;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_map</span>(<span class="hljs-params">f, l</span>) </span>{
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(l.length);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; l.length; i++) {
            result[i] = f(l[i]);
        }
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_chr</span>(<span class="hljs-params">n</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode(n);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_ord</span>(<span class="hljs-params">c</span>) </span>{
        <span class="hljs-keyword">return</span> c.charCodeAt(<span class="hljs-number">0</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bytes2string</span>(<span class="hljs-params">bytes</span>) </span>{
        <span class="hljs-keyword">return</span> _map(_chr, bytes).join(<span class="hljs-string">''</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_string2bytes</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> _map(_ord, s);
    }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Expose some functions to the outside through this name space.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes an array of unsigned 8-bit integers to a hex string.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{array}     Array containing the byte values.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.hexEncode = _hexencode;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes a hex string to an array of unsigned 8-bit integers.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{string}     String containing vector in a hexadecimal representation.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.hexDecode = _hexdecode;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes an array of unsigned 8-bit integers using base32 encoding.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{array}     Array containing the byte values.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.base32encode = _base32encode;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes a base32 encoded string to an array of unsigned 8-bit integers.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{string}     String containing vector in a hexadecimal representation.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.base32decode = _base32decode;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts an unsigned 8-bit integer array representation to a byte string.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{array}     Array containing the byte values.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.bytes2string = _bytes2string;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Converts a byte string representation to an array of unsigned
8-bit integers.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">vector</span>
<span>{array}     Array containing the byte values.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ns.string2bytes = _string2bytes;

<span class="hljs-built_in">module</span>.exports = ns;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
