<!DOCTYPE html>
<html>
<head>
  <title>verror.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../";
    var thisFile = "node_modules/serialport/node_modules/verror/lib/verror.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>verror.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>verror.js: richer JavaScript errors</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> mod_assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">var</span> mod_util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">var</span> mod_extsprintf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'extsprintf'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Public interface</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.VError = VError;
exports.WError = WError;
exports.MultiError = MultiError;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Like JavaScript's built-in Error class, but supports a &quot;cause&quot; argument and a
printf-style message.  The cause argument can be null.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">VError</span>(<span class="hljs-params">options</span>)
</span>{
	<span class="hljs-keyword">var</span> args, causedBy, ctor, tailmsg;

	<span class="hljs-keyword">if</span> (options <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> || <span class="hljs-keyword">typeof</span> (options) === <span class="hljs-string">'object'</span>) {
		args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
	} <span class="hljs-keyword">else</span> {
		args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);
		options = <span class="hljs-literal">undefined</span>;
	}

	tailmsg = args.length &gt; <span class="hljs-number">0</span> ?
	    mod_extsprintf.sprintf.apply(<span class="hljs-literal">null</span>, args) : <span class="hljs-string">''</span>;
	<span class="hljs-keyword">this</span>.jse_shortmsg = tailmsg;
	<span class="hljs-keyword">this</span>.jse_summary = tailmsg;

	<span class="hljs-keyword">if</span> (options) {
		causedBy = options.cause;

		<span class="hljs-keyword">if</span> (!causedBy || !(options.cause <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>))
			causedBy = options;

		<span class="hljs-keyword">if</span> (causedBy &amp;&amp; (causedBy <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>)) {
			<span class="hljs-keyword">this</span>.jse_cause = causedBy;
			<span class="hljs-keyword">this</span>.jse_summary += <span class="hljs-string">': '</span> + causedBy.message;
		}
	}

	<span class="hljs-keyword">this</span>.message = <span class="hljs-keyword">this</span>.jse_summary;
	<span class="hljs-built_in">Error</span>.call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.jse_summary);

	<span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
		ctor = options ? options.constructorOpt : <span class="hljs-literal">undefined</span>;
		ctor = ctor || <span class="hljs-built_in">arguments</span>.callee;
		<span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, ctor);
	}
}

mod_util.inherits(VError, <span class="hljs-built_in">Error</span>);
VError.prototype.name = <span class="hljs-string">'VError'</span>;

VError.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ve_toString</span>(<span class="hljs-params"></span>)
</span>{
	<span class="hljs-keyword">var</span> str = (<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">'name'</span>) &amp;&amp; <span class="hljs-keyword">this</span>.name ||
		<span class="hljs-keyword">this</span>.constructor.name || <span class="hljs-keyword">this</span>.constructor.prototype.name);
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.message)
		str += <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.message;

	<span class="hljs-keyword">return</span> (str);
};

VError.prototype.cause = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ve_cause</span>(<span class="hljs-params"></span>)
</span>{
	<span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.jse_cause);
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Represents a collection of errors for the purpose of consumers that generally
only deal with one error.  Callers can extract the individual errors
contained in this object, but may also just treat it as a normal single
error, in which case a summary message will be printed.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MultiError</span>(<span class="hljs-params">errors</span>)
</span>{
	mod_assert.ok(errors.length &gt; <span class="hljs-number">0</span>);
	<span class="hljs-keyword">this</span>.ase_errors = errors;

	VError.call(<span class="hljs-keyword">this</span>, errors[<span class="hljs-number">0</span>], <span class="hljs-string">'first of %d error%s'</span>,
	    errors.length, errors.length == <span class="hljs-number">1</span> ? <span class="hljs-string">''</span> : <span class="hljs-string">'s'</span>);
}

mod_util.inherits(MultiError, VError);



</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Like JavaScript's built-in Error class, but supports a &quot;cause&quot; argument which
is wrapped, not &quot;folded in&quot; as with VError.	Accepts a printf-style message.
The cause argument can be null.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">WError</span>(<span class="hljs-params">options</span>)
</span>{
	<span class="hljs-built_in">Error</span>.call(<span class="hljs-keyword">this</span>);

	<span class="hljs-keyword">var</span> args, cause, ctor;
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (options) === <span class="hljs-string">'object'</span>) {
		args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
	} <span class="hljs-keyword">else</span> {
		args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);
		options = <span class="hljs-literal">undefined</span>;
	}

	<span class="hljs-keyword">if</span> (args.length &gt; <span class="hljs-number">0</span>) {
		<span class="hljs-keyword">this</span>.message = mod_extsprintf.sprintf.apply(<span class="hljs-literal">null</span>, args);
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">this</span>.message = <span class="hljs-string">''</span>;
	}

	<span class="hljs-keyword">if</span> (options) {
		<span class="hljs-keyword">if</span> (options <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
			cause = options;
		} <span class="hljs-keyword">else</span> {
			cause = options.cause;
			ctor = options.constructorOpt;
		}
	}

	<span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, ctor || <span class="hljs-keyword">this</span>.constructor);
	<span class="hljs-keyword">if</span> (cause)
		<span class="hljs-keyword">this</span>.cause(cause);

}

mod_util.inherits(WError, <span class="hljs-built_in">Error</span>);
WError.prototype.name = <span class="hljs-string">'WError'</span>;


WError.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">we_toString</span>(<span class="hljs-params"></span>)
</span>{
	<span class="hljs-keyword">var</span> str = (<span class="hljs-keyword">this</span>.hasOwnProperty(<span class="hljs-string">'name'</span>) &amp;&amp; <span class="hljs-keyword">this</span>.name ||
		<span class="hljs-keyword">this</span>.constructor.name || <span class="hljs-keyword">this</span>.constructor.prototype.name);
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.message)
		str += <span class="hljs-string">': '</span> + <span class="hljs-keyword">this</span>.message;
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.we_cause &amp;&amp; <span class="hljs-keyword">this</span>.we_cause.message)
		str += <span class="hljs-string">'; caused by '</span> + <span class="hljs-keyword">this</span>.we_cause.toString();

	<span class="hljs-keyword">return</span> (str);
};

WError.prototype.cause = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">we_cause</span>(<span class="hljs-params">c</span>)
</span>{
	<span class="hljs-keyword">if</span> (c <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>)
		<span class="hljs-keyword">this</span>.we_cause = c;

	<span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.we_cause);
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
