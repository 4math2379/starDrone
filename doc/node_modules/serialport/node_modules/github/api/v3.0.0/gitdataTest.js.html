<!DOCTYPE html>
<html>
<head>
  <title>gitdataTest.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../doc-style.css" />
  <script src="../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../";
    var thisFile = "node_modules/serialport/node_modules/github/api/v3.0.0/gitdataTest.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>gitdataTest.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<p>Copyright 2012 Cloud9 IDE, Inc.</p>
</div>
<div class="body">
<p>This product includes software developed by
Cloud9 IDE, Inc (http://c9.io).</p>
<p>Author: Mike de Boer <a href="mailto:info@mikedeboer.nl.html">info@mikedeboer.nl</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
"use strict"</span>;

<span class="hljs-keyword">var</span> Assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">"assert"</span>);
<span class="hljs-keyword">var</span> Client = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./../../index"</span>);

describe(<span class="hljs-string">"[gitdata]"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> client;
    <span class="hljs-keyword">var</span> token = <span class="hljs-string">"c286e38330e15246a640c2cf32a45ea45d93b2ba"</span>;

    beforeEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        client = <span class="hljs-keyword">new</span> Client({
            <span class="hljs-attr">version</span>: <span class="hljs-string">"3.0.0"</span>
        });
        client.authenticate({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"oauth"</span>,
            <span class="hljs-attr">token</span>: token
        });
    });

    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/blobs/:sha (getBlob)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>found an object after executing:
git rev-list --all | xargs -l1 git diff-tree -r -c -M -C --no-commit-id | awk '{print $3}'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        client.gitdata.getBlob(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">sha</span>: <span class="hljs-string">"8433b682c95edf3fd81f5ee217dc9c874db35e4b"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(res.sha, <span class="hljs-string">"8433b682c95edf3fd81f5ee217dc9c874db35e4b"</span>);
                Assert.equal(res.size, <span class="hljs-number">2654</span>);
                Assert.equal(res.encoding, <span class="hljs-string">"base64"</span>);

                next();
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute POST /repos/:user/:repo/git/blobs (createBlob)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.createBlob(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">content</span>: <span class="hljs-string">"test"</span>,
                <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf-8"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(<span class="hljs-keyword">typeof</span> res.sha, <span class="hljs-string">"string"</span>);
                <span class="hljs-keyword">var</span> sha = res.sha;

                client.gitdata.getBlob(
                    {
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">sha</span>: sha
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        Assert.equal(res.sha, sha);
                        Assert.equal(res.size, <span class="hljs-number">4</span>);
                        Assert.equal(res.encoding, <span class="hljs-string">"base64"</span>);

                        next();
                    }
                );
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/commits/:sha (getCommit)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getCommit(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">sha</span>: <span class="hljs-string">"17e0734295ffd8174f91f04ba8e8f8e51954b793"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(res.author.date, <span class="hljs-string">"2012-10-05T08:05:31-07:00"</span>);
                Assert.equal(res.author.name, <span class="hljs-string">"Mike de Boer"</span>);
                Assert.equal(res.parents[<span class="hljs-number">0</span>].sha, <span class="hljs-string">"221140b288a3c64949594c58420cb4ab289b0756"</span>);
                Assert.equal(res.parents[<span class="hljs-number">1</span>].sha, <span class="hljs-string">"d2836429f4ff7de033c8bc0d16d22d55f2ea39c3"</span>);
                next();
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute POST /repos/:user/:repo/git/commits (createCommit)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>got valid tree reference by executing
git cat-file -p HEAD</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        client.gitdata.createCommit(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">"test"</span>,
                <span class="hljs-attr">tree</span>: <span class="hljs-string">"8ce4393a319b60bc6179509e0c46dee83c179f9f"</span>,
                <span class="hljs-attr">parents</span>: [],
                <span class="hljs-attr">author</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">"test-chef"</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>,
                    <span class="hljs-attr">date</span>: <span class="hljs-string">"2008-07-09T16:13:30+12:00"</span>
                },
                <span class="hljs-attr">committer</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">"test-minion"</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">"test-minion@pasta-nirvana.it"</span>,
                    <span class="hljs-attr">date</span>: <span class="hljs-string">"2008-07-09T16:13:30+12:00"</span>
                }
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(res.author.name, <span class="hljs-string">"test-chef"</span>);
                Assert.equal(res.author.email, <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>);
                Assert.equal(res.committer.name, <span class="hljs-string">"test-minion"</span>);
                Assert.equal(res.committer.email, <span class="hljs-string">"test-minion@pasta-nirvana.it"</span>);
                Assert.equal(res.message, <span class="hljs-string">"test"</span>);
                next();
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/refs/:ref (getReference)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getReference(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">ref</span>: <span class="hljs-string">"heads/master"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(res.ref, <span class="hljs-string">"refs/heads/master"</span>);
                Assert.equal(res.object.type, <span class="hljs-string">"commit"</span>);
                Assert.equal(res.object.sha, <span class="hljs-string">"17e0734295ffd8174f91f04ba8e8f8e51954b793"</span>);
                next();
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/refs (getAllReferences)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getAllReferences(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> ref = res[<span class="hljs-number">0</span>];
                Assert.equal(ref.ref, <span class="hljs-string">"refs/heads/master"</span>);
                Assert.equal(ref.object.type, <span class="hljs-string">"commit"</span>);
                Assert.equal(ref.object.sha, <span class="hljs-string">"17e0734295ffd8174f91f04ba8e8f8e51954b793"</span>);
                next();
            }
        );
    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>DISABLED temporarily due to Internal Server Error from Github!</p>
</div>
<div class="body">
<p>it(&quot;should successfully execute POST /repos/:user/:repo/git/refs (createReference)&quot;,  function(next) {
client.gitdata.createReference(
{
user: &quot;mikedeboertest&quot;,
repo: &quot;node_chat&quot;,
ref: &quot;heads/tagliatelle&quot;,
sha: &quot;17e0734295ffd8174f91f04ba8e8f8e51954b793&quot;
},
function(err, res) {
Assert.equal(err, null);
console.log(res);</p>
<p>// other assertions go here
client.gitdata.deleteReference(
{
user: &quot;mikedeboertest&quot;,
repo: &quot;node_chat&quot;,
ref: &quot;heads/tagliatelle&quot;
},
function(err, res) {
Assert.equal(err, null);
// other assertions go here
next();
}
);
}
);
});</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    it(<span class="hljs-string">"should successfully execute PATCH /repos/:user/:repo/git/refs/:ref (updateReference)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getReference(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">ref</span>: <span class="hljs-string">"heads/master"</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> sha = res.object.sha;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>do <code>force=true</code> because we go backward in history, which yields a warning
that it's not a reference that can be fast-forwarded to.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                client.gitdata.updateReference(
                    {
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">ref</span>: <span class="hljs-string">"heads/master"</span>,
                        <span class="hljs-attr">sha</span>: <span class="hljs-string">"221140b288a3c64949594c58420cb4ab289b0756"</span>,
                        <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span>
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        Assert.equal(res.ref, <span class="hljs-string">"refs/heads/master"</span>);
                        Assert.equal(res.object.type, <span class="hljs-string">"commit"</span>);
                        Assert.equal(res.object.sha, <span class="hljs-string">"221140b288a3c64949594c58420cb4ab289b0756"</span>);

                        client.gitdata.updateReference(
                            {
                                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                                <span class="hljs-attr">ref</span>: <span class="hljs-string">"heads/master"</span>,
                                <span class="hljs-attr">sha</span>: sha,
                                <span class="hljs-attr">force</span>: <span class="hljs-literal">false</span>
                            },
                            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                                Assert.equal(err, <span class="hljs-literal">null</span>);
                                Assert.equal(res.ref, <span class="hljs-string">"refs/heads/master"</span>);
                                Assert.equal(res.object.type, <span class="hljs-string">"commit"</span>);
                                Assert.equal(res.object.sha, sha);

                                next();
                            }
                        );
                    }
                );
            }
        );

    });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>DISABLED temporarily due to Internal Server Error from Github!</p>
</div>
<div class="body">
<p>it(&quot;should successfully execute DELETE /repos/:user/:repo/git/refs/:ref (deleteReference)&quot;,  function(next) {
client.gitdata.createReference(
{
user: &quot;mikedeboertest&quot;,
repo: &quot;node_chat&quot;,
ref: &quot;heads/tagliatelle&quot;,
sha: &quot;17e0734295ffd8174f91f04ba8e8f8e51954b793&quot;
},
function(err, res) {
Assert.equal(err, null);
console.log(res);</p>
<p>// other assertions go here
client.gitdata.deleteReference(
{
user: &quot;mikedeboertest&quot;,
repo: &quot;node_chat&quot;,
ref: &quot;heads/tagliatelle&quot;
},
function(err, res) {
Assert.equal(err, null);
// other assertions go here
next();
}
);
}
);
});</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/tags/:sha (getTag)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.createTag(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">tag</span>: <span class="hljs-string">"test-pasta"</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">"Grandma's secret sauce"</span>,
                <span class="hljs-attr">object</span>: <span class="hljs-string">"17e0734295ffd8174f91f04ba8e8f8e51954b793"</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">"commit"</span>,
                <span class="hljs-attr">tagger</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">"test-chef"</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>,
                    <span class="hljs-attr">date</span>: <span class="hljs-string">"2008-07-09T16:13:30+12:00"</span>
                }
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> sha = res.sha;

                client.gitdata.getTag(
                    {
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">sha</span>: sha
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        Assert.equal(res.tag, <span class="hljs-string">"test-pasta"</span>);
                        Assert.equal(res.message, <span class="hljs-string">"Grandma's secret sauce"</span>);
                        Assert.equal(res.sha, sha);
                        Assert.equal(res.tagger.name, <span class="hljs-string">"test-chef"</span>);
                        Assert.equal(res.tagger.email, <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>other assertions go here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        client.gitdata.deleteReference(
                            {
                                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                                <span class="hljs-attr">ref</span>: <span class="hljs-string">"tags/"</span> + sha
                            },
                            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Assert.equal(err, null);
NOTE: Github return 'Validation Failed' error codes back, which makes no sense to me.
ask the guys what's up here...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                                Assert.equal(err.code, <span class="hljs-number">422</span>);

                                next();
                            }
                        );
                    }
                );
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute POST /repos/:user/:repo/git/tags (createTag)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.createTag(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">tag</span>: <span class="hljs-string">"test-pasta"</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">"Grandma's secret sauce"</span>,
                <span class="hljs-attr">object</span>: <span class="hljs-string">"17e0734295ffd8174f91f04ba8e8f8e51954b793"</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">"commit"</span>,
                <span class="hljs-attr">tagger</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">"test-chef"</span>,
                    <span class="hljs-attr">email</span>: <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>,
                    <span class="hljs-attr">date</span>: <span class="hljs-string">"2008-07-09T16:13:30+12:00"</span>
                }
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> sha = res.sha;

                client.gitdata.getTag(
                    {
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">sha</span>: sha
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        Assert.equal(res.tag, <span class="hljs-string">"test-pasta"</span>);
                        Assert.equal(res.message, <span class="hljs-string">"Grandma's secret sauce"</span>);
                        Assert.equal(res.sha, sha);
                        Assert.equal(res.tagger.name, <span class="hljs-string">"test-chef"</span>);
                        Assert.equal(res.tagger.email, <span class="hljs-string">"test-chef@pasta-nirvana.it"</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>other assertions go here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                        client.gitdata.deleteReference(
                            {
                                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                                <span class="hljs-attr">ref</span>: <span class="hljs-string">"tags/"</span> + sha
                            },
                            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Assert.equal(err, null);
NOTE: Github return 'Validation Failed' error codes back, which makes no sense to me.
ask the guys what's up here...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                                Assert.equal(err.code, <span class="hljs-number">422</span>);

                                next();
                            }
                        );
                    }
                );
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute GET /repos/:user/:repo/git/trees/:sha (getTree)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getTree(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">sha</span>: <span class="hljs-string">"8ce4393a319b60bc6179509e0c46dee83c179f9f"</span>,
                <span class="hljs-attr">recursive</span>: <span class="hljs-literal">false</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                Assert.equal(res.tree[<span class="hljs-number">0</span>].type, <span class="hljs-string">"blob"</span>);
                Assert.equal(res.tree[<span class="hljs-number">0</span>].path, <span class="hljs-string">"LICENSE-MIT"</span>);
                Assert.equal(res.tree[<span class="hljs-number">0</span>].sha, <span class="hljs-string">"f30a31de94635399f42fd05f91f6ed3ff2f013d6"</span>);
                Assert.equal(res.tree[<span class="hljs-number">0</span>].mode, <span class="hljs-string">"100644"</span>);
                Assert.equal(res.tree[<span class="hljs-number">0</span>].size, <span class="hljs-number">1075</span>);

                client.gitdata.getTree(
                    {
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">sha</span>: <span class="hljs-string">"8ce4393a319b60bc6179509e0c46dee83c179f9f"</span>,
                        <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        Assert.equal(res.tree[<span class="hljs-number">0</span>].type, <span class="hljs-string">"blob"</span>);
                        Assert.equal(res.tree[<span class="hljs-number">0</span>].path, <span class="hljs-string">"LICENSE-MIT"</span>);
                        Assert.equal(res.tree[<span class="hljs-number">0</span>].sha, <span class="hljs-string">"f30a31de94635399f42fd05f91f6ed3ff2f013d6"</span>);
                        Assert.equal(res.tree[<span class="hljs-number">0</span>].mode, <span class="hljs-string">"100644"</span>);
                        Assert.equal(res.tree[<span class="hljs-number">0</span>].size, <span class="hljs-number">1075</span>);

                        next();
                    }
                );
            }
        );
    });

    it(<span class="hljs-string">"should successfully execute POST /repos/:user/:repo/git/trees (createTree)"</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
        client.gitdata.getTree(
            {
                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                <span class="hljs-attr">sha</span>: <span class="hljs-string">"8ce4393a319b60bc6179509e0c46dee83c179f9f"</span>,
                <span class="hljs-attr">recursive</span>: <span class="hljs-literal">false</span>
            },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                Assert.equal(err, <span class="hljs-literal">null</span>);
                <span class="hljs-keyword">var</span> file = res.tree[<span class="hljs-number">0</span>];

                client.gitdata.createTree(
                    {
                        <span class="hljs-attr">base_tree</span>: <span class="hljs-string">"8ce4393a319b60bc6179509e0c46dee83c179f9f"</span>,
                        <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                        <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                        <span class="hljs-attr">tree</span>: [
                            {
                                <span class="hljs-attr">path</span>: file.path,
                                <span class="hljs-attr">mode</span>: <span class="hljs-string">"100755"</span>,
                                <span class="hljs-attr">type</span>: file.type,
                                <span class="hljs-attr">sha</span>: file.sha
                            }
                        ]
                    },
                    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                        Assert.equal(err, <span class="hljs-literal">null</span>);
                        <span class="hljs-keyword">var</span> sha = res.sha;

                        client.gitdata.getTree(
                            {
                                <span class="hljs-attr">user</span>: <span class="hljs-string">"mikedeboertest"</span>,
                                <span class="hljs-attr">repo</span>: <span class="hljs-string">"node_chat"</span>,
                                <span class="hljs-attr">sha</span>: sha,
                                <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>
                            },
                            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, res</span>) </span>{
                                Assert.equal(err, <span class="hljs-literal">null</span>);
                                Assert.equal(res.tree[<span class="hljs-number">0</span>].type, <span class="hljs-string">"blob"</span>);
                                Assert.equal(res.tree[<span class="hljs-number">0</span>].path, <span class="hljs-string">"LICENSE-MIT"</span>);
                                Assert.equal(res.tree[<span class="hljs-number">0</span>].sha, <span class="hljs-string">"f30a31de94635399f42fd05f91f6ed3ff2f013d6"</span>);
                                Assert.equal(res.tree[<span class="hljs-number">0</span>].mode, <span class="hljs-string">"100755"</span>);
                                Assert.equal(res.tree[<span class="hljs-number">0</span>].size, <span class="hljs-number">1075</span>);

                                next();
                            }
                        );
                    }
                );
            }
        );
    });
});

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
