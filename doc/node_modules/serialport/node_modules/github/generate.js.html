<!DOCTYPE html>
<html>
<head>
  <title>generate.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/serialport/node_modules/github/generate.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>generate.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>section: github, internal
class ApiGenerator</p>
</div>
<div class="body">
<p>Copyright 2012 Cloud9 IDE, Inc.</p>
<p>This product includes software developed by
Cloud9 IDE, Inc (http://c9.io).</p>
<p>Author: Mike de Boer <a href="mailto:mike@c9.io.html">mike@c9.io</a></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">
"use strict"</span>;

<span class="hljs-keyword">var</span> Fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">var</span> Path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

<span class="hljs-keyword">var</span> Optimist = <span class="hljs-built_in">require</span>(<span class="hljs-string">"optimist"</span>);
<span class="hljs-keyword">var</span> Util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./util"</span>);

<span class="hljs-keyword">var</span> IndexTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/index.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);
<span class="hljs-keyword">var</span> SectionTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/section.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);
<span class="hljs-keyword">var</span> HandlerTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/handler.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);
<span class="hljs-keyword">var</span> AfterRequestTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/after_request.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);
<span class="hljs-keyword">var</span> TestSectionTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/test_section.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);
<span class="hljs-keyword">var</span> TestHandlerTpl = Fs.readFileSync(__dirname + <span class="hljs-string">"/templates/test_handler.js.tpl"</span>, <span class="hljs-string">"utf8"</span>);

<span class="hljs-keyword">var</span> main = <span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">versions, tests, restore</span>) </span>{
    Util.log(<span class="hljs-string">"Generating for versions"</span>, <span class="hljs-built_in">Object</span>.keys(versions));

    <span class="hljs-built_in">Object</span>.keys(versions).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">version</span>) </span>{
        <span class="hljs-keyword">var</span> dir = Path.join(__dirname, <span class="hljs-string">"api"</span>, version);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>If we're in restore mode, move .bak file back to their original position
and short-circuit.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (restore) {
            <span class="hljs-keyword">var</span> bakRE = <span class="hljs-regexp">/\.bak$/</span>;
            <span class="hljs-keyword">var</span> files = Fs.readdirSync(dir).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
                <span class="hljs-keyword">return</span> bakRE.test(file);
            }).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
                <span class="hljs-keyword">var</span> <span class="hljs-keyword">from</span> = Path.join(dir, file);
                <span class="hljs-keyword">var</span> to = Path.join(dir, file.replace(<span class="hljs-regexp">/\.bak$/</span>, <span class="hljs-string">""</span>));
                Fs.renameSync(<span class="hljs-keyword">from</span>, to);
                Util.log(<span class="hljs-string">"Restored '"</span> + file + <span class="hljs-string">"' ("</span> + version + <span class="hljs-string">")"</span>);
            });

            <span class="hljs-keyword">return</span>;
        }


        <span class="hljs-keyword">var</span> routes = versions[version];
        <span class="hljs-keyword">var</span> defines = routes.defines;
        <span class="hljs-keyword">delete</span> routes.defines;
        <span class="hljs-keyword">var</span> headers = defines[<span class="hljs-string">"response-headers"</span>];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>cast header names to lowercase.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (headers &amp;&amp; headers.length)
            headers = headers.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">header</span>) </span>{ <span class="hljs-keyword">return</span> header.toLowerCase(); });
        <span class="hljs-keyword">var</span> sections = {};
        <span class="hljs-keyword">var</span> testSections = {};

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createComment</span>(<span class="hljs-params">paramsStruct, section, funcName, indent</span>) </span>{
            <span class="hljs-keyword">var</span> params = <span class="hljs-built_in">Object</span>.keys(paramsStruct);
            <span class="hljs-keyword">var</span> comment = [
                indent + <span class="hljs-string">"/** section: github"</span>,
                indent + <span class="hljs-string">" *  "</span> + section + <span class="hljs-string">"#"</span> + funcName + <span class="hljs-string">"(msg, callback) -&gt; null"</span>,
                indent + <span class="hljs-string">" *      - msg (Object): Object that contains the parameters and their values to be sent to the server."</span>,
                indent + <span class="hljs-string">" *      - callback (Function): function to call when the request is finished "</span> +
                    <span class="hljs-string">"with an error as first argument and result data as second argument."</span>,
                indent + <span class="hljs-string">" *"</span>,
                indent + <span class="hljs-string">" *  ##### Params on the `msg` object:"</span>,
                indent + <span class="hljs-string">" *"</span>
            ];
            comment.push(indent + <span class="hljs-string">" *  - headers (Object): Optional. Key/ value pair "</span>
                + <span class="hljs-string">"of request headers to pass along with the HTTP request. Valid headers are: "</span>
                + <span class="hljs-string">"'"</span> + defines[<span class="hljs-string">"request-headers"</span>].join(<span class="hljs-string">"', '"</span>) + <span class="hljs-string">"'."</span>);
            <span class="hljs-keyword">if</span> (!params.length)
                comment.push(indent + <span class="hljs-string">" *  No other params, simply pass an empty Object literal `{}`"</span>);
            <span class="hljs-keyword">var</span> paramName, def, line;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = params.length; i &lt; l; ++i) {
                paramName = params[i];
                <span class="hljs-keyword">if</span> (paramName.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">"$"</span>) {
                    paramName = paramName.substr(<span class="hljs-number">1</span>);
                    <span class="hljs-keyword">if</span> (!defines.params[paramName]) {
                        Util.log(<span class="hljs-string">"Invalid variable parameter name substitution; param '"</span> +
                            paramName + <span class="hljs-string">"' not found in defines block"</span>, <span class="hljs-string">"fatal"</span>);
                        process.exit(<span class="hljs-number">1</span>);
                    }
                    <span class="hljs-keyword">else</span>
                        def = defines.params[paramName];
                }
                <span class="hljs-keyword">else</span>
                    def = paramsStruct[paramName];

                line = indent + <span class="hljs-string">" *  - "</span> + paramName + <span class="hljs-string">" ("</span> + (def.type || <span class="hljs-string">"mixed"</span>) + <span class="hljs-string">"): "</span> +
                    (def.required ? <span class="hljs-string">"Required. "</span> : <span class="hljs-string">"Optional. "</span>);
                <span class="hljs-keyword">if</span> (def.description)
                    line += def.description;
                <span class="hljs-keyword">if</span> (def.validation)
                    line += <span class="hljs-string">" Validation rule: ` "</span> + def.validation + <span class="hljs-string">" `."</span>;

                comment.push(line);
            }

            <span class="hljs-keyword">return</span> comment.join(<span class="hljs-string">"\n"</span>) + <span class="hljs-string">"\n"</span> + indent + <span class="hljs-string">" **/"</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getParams</span>(<span class="hljs-params">paramsStruct, indent</span>) </span>{
            <span class="hljs-keyword">var</span> params = <span class="hljs-built_in">Object</span>.keys(paramsStruct);
            <span class="hljs-keyword">if</span> (!params.length)
                <span class="hljs-keyword">return</span> <span class="hljs-string">"{}"</span>;
            <span class="hljs-keyword">var</span> values = [];
            <span class="hljs-keyword">var</span> paramName, def;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = params.length; i &lt; l; ++i) {
                paramName = params[i];
                <span class="hljs-keyword">if</span> (paramName.charAt(<span class="hljs-number">0</span>) == <span class="hljs-string">"$"</span>) {
                    paramName = paramName.substr(<span class="hljs-number">1</span>);
                    <span class="hljs-keyword">if</span> (!defines.params[paramName]) {
                        Util.log(<span class="hljs-string">"Invalid variable parameter name substitution; param '"</span> +
                            paramName + <span class="hljs-string">"' not found in defines block"</span>, <span class="hljs-string">"fatal"</span>);
                        process.exit(<span class="hljs-number">1</span>);
                    }
                    <span class="hljs-keyword">else</span>
                        def = defines.params[paramName];
                }
                <span class="hljs-keyword">else</span>
                    def = paramsStruct[paramName];

                values.push(indent + <span class="hljs-string">"    "</span> + paramName + <span class="hljs-string">": \""</span> + def.type + <span class="hljs-string">"\""</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"{\n"</span> + values.join(<span class="hljs-string">",\n"</span>) + <span class="hljs-string">"\n"</span> + indent + <span class="hljs-string">"}"</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepareApi</span>(<span class="hljs-params">struct, baseType</span>) </span>{
            <span class="hljs-keyword">if</span> (!baseType)
                baseType = <span class="hljs-string">""</span>;

            <span class="hljs-built_in">Object</span>.keys(struct).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">routePart</span>) </span>{
                <span class="hljs-keyword">var</span> block = struct[routePart];
                <span class="hljs-keyword">if</span> (!block)
                    <span class="hljs-keyword">return</span>;
                <span class="hljs-keyword">var</span> messageType = baseType + <span class="hljs-string">"/"</span> + routePart;
                <span class="hljs-keyword">if</span> (block.url &amp;&amp; block.params) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>we ended up at an API definition part!</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">var</span> parts = messageType.split(<span class="hljs-string">"/"</span>);
                    <span class="hljs-keyword">var</span> section = Util.toCamelCase(parts[<span class="hljs-number">1</span>].toLowerCase());
                    <span class="hljs-keyword">if</span> (!block.method) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"No HTTP method specified for "</span> + messageType +
                            <span class="hljs-string">"in section "</span> + section);
                    }

                    parts.splice(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">var</span> funcName = Util.toCamelCase(parts.join(<span class="hljs-string">"-"</span>));
                    <span class="hljs-keyword">var</span> comment = createComment(block.params, section, funcName, <span class="hljs-string">"    "</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>add the handler to the sections</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (!sections[section])
                        sections[section] = [];

                    <span class="hljs-keyword">var</span> afterRequest = <span class="hljs-string">""</span>;
                    <span class="hljs-keyword">if</span> (headers &amp;&amp; headers.length) {
                        afterRequest = AfterRequestTpl.replace(<span class="hljs-string">"&lt;%headers%&gt;"</span>, <span class="hljs-string">"\""</span> +
                            headers.join(<span class="hljs-string">"\", \""</span>) + <span class="hljs-string">"\""</span>);
                    }
                    sections[section].push(HandlerTpl
                        .replace(<span class="hljs-string">"&lt;%funcName%&gt;"</span>, funcName)
                        .replace(<span class="hljs-string">"&lt;%comment%&gt;"</span>, comment)
                        .replace(<span class="hljs-string">"&lt;%afterRequest%&gt;"</span>, afterRequest)
                    );

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>add test to the testSections</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (!testSections[section])
                        testSections[section] = [];
                    testSections[section].push(TestHandlerTpl
                        .replace(<span class="hljs-string">"&lt;%name%&gt;"</span>, block.method + <span class="hljs-string">" "</span> + block.url + <span class="hljs-string">" ("</span> + funcName + <span class="hljs-string">")"</span>)
                        .replace(<span class="hljs-string">"&lt;%funcName%&gt;"</span>, section + <span class="hljs-string">"."</span> + funcName)
                        .replace(<span class="hljs-string">"&lt;%params%&gt;"</span>, getParams(block.params, <span class="hljs-string">"            "</span>))
                    );
                }
                <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>recurse into this block next:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    prepareApi(block, messageType);
                }
            });
        }

        Util.log(<span class="hljs-string">"Converting routes to functions"</span>);
        prepareApi(routes);

        Util.log(<span class="hljs-string">"Writing files to version dir"</span>);
        <span class="hljs-keyword">var</span> sectionNames = <span class="hljs-built_in">Object</span>.keys(sections);

        Util.log(<span class="hljs-string">"Writing index.js file for version "</span> + version);
        Fs.writeFileSync(Path.join(dir, <span class="hljs-string">"index.js"</span>),
            IndexTpl
                .replace(<span class="hljs-string">"&lt;%name%&gt;"</span>, defines.constants.name)
                .replace(<span class="hljs-string">"&lt;%description%&gt;"</span>, defines.constants.description)
                .replace(<span class="hljs-string">"&lt;%scripts%&gt;"</span>, <span class="hljs-string">"\""</span> + sectionNames.join(<span class="hljs-string">"\", \""</span>) + <span class="hljs-string">"\""</span>),
            <span class="hljs-string">"utf8"</span>);

        <span class="hljs-built_in">Object</span>.keys(sections).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">section</span>) </span>{
            <span class="hljs-keyword">var</span> def = sections[section];
            Util.log(<span class="hljs-string">"Writing '"</span> + section + <span class="hljs-string">".js' file for version "</span> + version);
            Fs.writeFileSync(Path.join(dir, section + <span class="hljs-string">".js"</span>), SectionTpl
                .replace(<span class="hljs-regexp">/&lt;%sectionName%&gt;/g</span>, section)
                .replace(<span class="hljs-string">"&lt;%sectionBody%&gt;"</span>, def.join(<span class="hljs-string">"\n"</span>)),
                <span class="hljs-string">"utf8"</span>
            );

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>When we don't need to generate tests, bail out here.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (!tests)
                <span class="hljs-keyword">return</span>;

            def = testSections[section];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>test if previous tests already contained implementations by checking
if the difference in character count between the current test file
and the newly generated one is more than twenty characters.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">var</span> body = TestSectionTpl
                .replace(<span class="hljs-string">"&lt;%version%&gt;"</span>, version.replace(<span class="hljs-string">"v"</span>, <span class="hljs-string">""</span>))
                .replace(<span class="hljs-regexp">/&lt;%sectionName%&gt;/g</span>, section)
                .replace(<span class="hljs-string">"&lt;%testBody%&gt;"</span>, def.join(<span class="hljs-string">"\n\n"</span>));
            <span class="hljs-keyword">var</span> path = Path.join(dir, section + <span class="hljs-string">"Test.js"</span>);
            <span class="hljs-keyword">if</span> (Fs.existsSync(path) &amp;&amp; <span class="hljs-built_in">Math</span>.abs(Fs.readFileSync(path, <span class="hljs-string">"utf8"</span>).length - body.length) &gt;= <span class="hljs-number">20</span>) {
                Util.log(<span class="hljs-string">"Moving old test file to '"</span> + path + <span class="hljs-string">".bak' to preserve tests "</span> +
                    <span class="hljs-string">"that were already implemented. \nPlease be sure te check this file "</span> +
                    <span class="hljs-string">"and move all implemented tests back into the newly generated test!"</span>, <span class="hljs-string">"error"</span>);
                Fs.renameSync(path, path + <span class="hljs-string">".bak"</span>);
            }

            Util.log(<span class="hljs-string">"Writing test file for "</span> + section + <span class="hljs-string">", version "</span> + version);
            Fs.writeFileSync(path, body, <span class="hljs-string">"utf8"</span>);
        });
    });
};

<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">module</span>.parent) {
    <span class="hljs-keyword">var</span> argv = Optimist
      .wrap(<span class="hljs-number">80</span>)
      .usage(<span class="hljs-string">"Generate the implementation of the node-github module, including "</span>
           + <span class="hljs-string">"unit-test scaffolds.\nUsage: $0 [-r] [-v VERSION]"</span>)
      .alias(<span class="hljs-string">"r"</span>, <span class="hljs-string">"restore"</span>)
      .describe(<span class="hljs-string">"r"</span>, <span class="hljs-string">"Restore .bak files, generated by a previous run, to the original"</span>)
      .alias(<span class="hljs-string">"v"</span>, <span class="hljs-string">"version"</span>)
      .describe(<span class="hljs-string">"v"</span>, <span class="hljs-string">"Semantic version number of the API to generate. Example: '3.0.0'"</span>)
      .alias(<span class="hljs-string">"t"</span>, <span class="hljs-string">"tests"</span>)
      .describe(<span class="hljs-string">"t"</span>, <span class="hljs-string">"Also generate unit test scaffolds"</span>)
      .alias(<span class="hljs-string">"h"</span>, <span class="hljs-string">"help"</span>)
      .describe(<span class="hljs-string">"h"</span>, <span class="hljs-string">"Display this usage information"</span>)
      .boolean([<span class="hljs-string">"r"</span>, <span class="hljs-string">"t"</span>, <span class="hljs-string">"h"</span>])
      .argv;

    <span class="hljs-keyword">if</span> (argv.help) {
        Util.log(Optimist.help());
        process.exit();
    }

    <span class="hljs-keyword">var</span> baseDir = Path.join(__dirname, <span class="hljs-string">"api"</span>);
    <span class="hljs-keyword">var</span> availVersions = {};
    Fs.readdirSync(baseDir).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">version</span>) </span>{
        <span class="hljs-keyword">var</span> path = Path.join(baseDir, version, <span class="hljs-string">"routes.json"</span>);
        <span class="hljs-keyword">if</span> (!Fs.existsSync(path))
            <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">var</span> routes;
        <span class="hljs-keyword">try</span> {
            routes = <span class="hljs-built_in">JSON</span>.parse(Fs.readFileSync(path, <span class="hljs-string">"utf8"</span>));
        }
        <span class="hljs-keyword">catch</span> (ex) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (!routes.defines)
            <span class="hljs-keyword">return</span>;
        availVersions[version] = routes;
    });

    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.keys(availVersions).length) {
        Util.log(<span class="hljs-string">"No versions available to generate."</span>, <span class="hljs-string">"fatal"</span>);
        process.exit(<span class="hljs-number">1</span>);
    }
    <span class="hljs-keyword">var</span> versions = {};
    <span class="hljs-keyword">if</span> (argv.version) {
        <span class="hljs-keyword">if</span> (argv.version.charAt(<span class="hljs-number">0</span>) != <span class="hljs-string">"v"</span>)
            argv.version = argv.v = <span class="hljs-string">"v"</span> + argv.version;
        <span class="hljs-keyword">if</span> (!availVersions[argv.version]) {
            Util.log(<span class="hljs-string">"Version '"</span> + argv.version + <span class="hljs-string">"' is not available"</span>, <span class="hljs-string">"fatal"</span>);
            process.exit(<span class="hljs-number">1</span>);
        }
        versions[argv.version] = availVersions[argv.version];
    }
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.keys(versions).length) {
        Util.log(<span class="hljs-string">"No versions specified via the command line, generating for all available versions."</span>);
        versions = availVersions;
    }

    Util.log(<span class="hljs-string">"Starting up..."</span>);
    main(versions, argv.tests, argv.restore);
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
