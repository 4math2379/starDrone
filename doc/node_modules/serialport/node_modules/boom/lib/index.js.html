<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../";
    var thisFile = "node_modules/serialport/node_modules/boom/lib/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<p>Load modules</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> Http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">var</span> Hoek = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hoek'</span>);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Declare internals</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> internals = {};

exports.wrap = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, statusCode, message</span>) </span>{

    Hoek.assert(error <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>, <span class="hljs-string">'Cannot wrap non-Error object'</span>);
    <span class="hljs-keyword">return</span> (error.isBoom ? error : internals.initialize(error, statusCode || <span class="hljs-number">500</span>, message));
};


exports.create = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">statusCode, message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(statusCode, message, data, exports.create);
};

internals.create = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">statusCode, message, data, ctor</span>) </span>{

    <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message ? message : <span class="hljs-literal">undefined</span>);       <span class="hljs-comment">// Avoids settings null message</span>
    <span class="hljs-built_in">Error</span>.captureStackTrace(error, ctor);                       <span class="hljs-comment">// Filter the stack to our external API</span>
    error.data = data || <span class="hljs-literal">null</span>;
    internals.initialize(error, statusCode);
    <span class="hljs-keyword">return</span> error;
};

internals.initialize = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, statusCode, message</span>) </span>{

    <span class="hljs-keyword">var</span> numberCode = <span class="hljs-built_in">parseInt</span>(statusCode, <span class="hljs-number">10</span>);
    Hoek.assert(!<span class="hljs-built_in">isNaN</span>(numberCode) &amp;&amp; numberCode &gt;= <span class="hljs-number">400</span>, <span class="hljs-string">'First argument must be a number (400+):'</span>, statusCode);

    error.isBoom = <span class="hljs-literal">true</span>;
    error.isServer = numberCode &gt;= <span class="hljs-number">500</span>;

    <span class="hljs-keyword">if</span> (!error.hasOwnProperty(<span class="hljs-string">'data'</span>)) {
        error.data = <span class="hljs-literal">null</span>;
    }

    error.output = {
        <span class="hljs-attr">statusCode</span>: numberCode,
        <span class="hljs-attr">payload</span>: {},
        <span class="hljs-attr">headers</span>: {}
    };

    error.reformat = internals.reformat;
    error.reformat();

    <span class="hljs-keyword">if</span> (!message &amp;&amp;
        !error.message) {

        message = error.output.payload.error;
    }

    <span class="hljs-keyword">if</span> (message) {
        error.message = (message + (error.message ? <span class="hljs-string">': '</span> + error.message : <span class="hljs-string">''</span>));
    }

    <span class="hljs-keyword">return</span> error;
};


internals.reformat = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>.output.payload.statusCode = <span class="hljs-keyword">this</span>.output.statusCode;
    <span class="hljs-keyword">this</span>.output.payload.error = Http.STATUS_CODES[<span class="hljs-keyword">this</span>.output.statusCode] || <span class="hljs-string">'Unknown'</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.output.statusCode === <span class="hljs-number">500</span>) {
        <span class="hljs-keyword">this</span>.output.payload.message = <span class="hljs-string">'An internal server error occurred'</span>;              <span class="hljs-comment">// Hide actual error from user</span>
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.message) {
        <span class="hljs-keyword">this</span>.output.payload.message = <span class="hljs-keyword">this</span>.message;
    }
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>4xx Client Errors</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
exports.badRequest = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">400</span>, message, data, exports.badRequest);
};


exports.unauthorized = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, scheme, attributes</span>) </span>{          <span class="hljs-comment">// Or function (message, wwwAuthenticate[])</span>

    <span class="hljs-keyword">var</span> err = internals.create(<span class="hljs-number">401</span>, message, <span class="hljs-literal">undefined</span>, exports.unauthorized);

    <span class="hljs-keyword">if</span> (!scheme) {
        <span class="hljs-keyword">return</span> err;
    }

    <span class="hljs-keyword">var</span> wwwAuthenticate = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> il = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> scheme === <span class="hljs-string">'string'</span>) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>function (message, scheme, attributes)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        wwwAuthenticate = scheme;

        <span class="hljs-keyword">if</span> (attributes || message) {
            err.output.payload.attributes = {};
        }

        <span class="hljs-keyword">if</span> (attributes) {
            <span class="hljs-keyword">var</span> names = <span class="hljs-built_in">Object</span>.keys(attributes);
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, il = names.length; i &lt; il; ++i) {
                <span class="hljs-keyword">var</span> name = names[i];
                <span class="hljs-keyword">if</span> (i) {
                    wwwAuthenticate += <span class="hljs-string">','</span>;
                }

                <span class="hljs-keyword">var</span> value = attributes[name];
                <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> ||
                    value === <span class="hljs-literal">undefined</span>) {              <span class="hljs-comment">// Value can be zero</span>

                    value = <span class="hljs-string">''</span>;
                }
                wwwAuthenticate += <span class="hljs-string">' '</span> + name + <span class="hljs-string">'="'</span> + Hoek.escapeHeaderAttribute(value.toString()) + <span class="hljs-string">'"'</span>;
                err.output.payload.attributes[name] = value;
            }
        }

        <span class="hljs-keyword">if</span> (message) {
            <span class="hljs-keyword">if</span> (attributes) {
                wwwAuthenticate += <span class="hljs-string">','</span>;
            }
            wwwAuthenticate += <span class="hljs-string">' error="'</span> + Hoek.escapeHeaderAttribute(message) + <span class="hljs-string">'"'</span>;
            err.output.payload.attributes.error = message;
        }
        <span class="hljs-keyword">else</span> {
            err.isMissing = <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">else</span> {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>function (message, wwwAuthenticate[])</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">var</span> wwwArray = scheme;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, il = wwwArray.length; i &lt; il; ++i) {
            <span class="hljs-keyword">if</span> (i) {
                wwwAuthenticate += <span class="hljs-string">', '</span>;
            }

            wwwAuthenticate += wwwArray[i];
        }
    }

    err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>] = wwwAuthenticate;

    <span class="hljs-keyword">return</span> err;
};


exports.forbidden = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">403</span>, message, data, exports.forbidden);
};


exports.notFound = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">404</span>, message, data, exports.notFound);
};


exports.methodNotAllowed = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">405</span>, message, data, exports.methodNotAllowed);
};


exports.notAcceptable = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">406</span>, message, data, exports.notAcceptable);
};


exports.proxyAuthRequired = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">407</span>, message, data, exports.proxyAuthRequired);
};


exports.clientTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">408</span>, message, data, exports.clientTimeout);
};


exports.conflict = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">409</span>, message, data, exports.conflict);
};


exports.resourceGone = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">410</span>, message, data, exports.resourceGone);
};


exports.lengthRequired = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">411</span>, message, data, exports.lengthRequired);
};


exports.preconditionFailed = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">412</span>, message, data, exports.preconditionFailed);
};


exports.entityTooLarge = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">413</span>, message, data, exports.entityTooLarge);
};


exports.uriTooLong = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">414</span>, message, data, exports.uriTooLong);
};


exports.unsupportedMediaType = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">415</span>, message, data, exports.unsupportedMediaType);
};


exports.rangeNotSatisfiable = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">416</span>, message, data, exports.rangeNotSatisfiable);
};


exports.expectationFailed = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">417</span>, message, data, exports.expectationFailed);
};

exports.badData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">422</span>, message, data, exports.badData);
};


exports.preconditionRequired = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">428</span>, message, data, exports.preconditionRequired);
};


exports.tooManyRequests = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.create(<span class="hljs-number">429</span>, message, data, exports.tooManyRequests);
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>5xx Server Errors</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
exports.internal = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data, statusCode</span>) </span>{

    <span class="hljs-keyword">return</span> internals.serverError(message, data, statusCode, exports.internal);
};

internals.serverError = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data, statusCode, ctor</span>) </span>{

    <span class="hljs-keyword">var</span> error;
    <span class="hljs-keyword">if</span> (data <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
        error = exports.wrap(data, statusCode, message);
    } <span class="hljs-keyword">else</span> {
        error = internals.create(statusCode || <span class="hljs-number">500</span>, message, <span class="hljs-literal">undefined</span>, ctor);
        error.data = data;
    }

    <span class="hljs-keyword">return</span> error;
};


exports.notImplemented = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.serverError(message, data, <span class="hljs-number">501</span>, exports.notImplemented);
};


exports.badGateway = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.serverError(message, data, <span class="hljs-number">502</span>, exports.badGateway);
};


exports.serverTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.serverError(message, data, <span class="hljs-number">503</span>, exports.serverTimeout);
};


exports.gatewayTimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">return</span> internals.serverError(message, data, <span class="hljs-number">504</span>, exports.gatewayTimeout);
};


exports.badImplementation = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">message, data</span>) </span>{

    <span class="hljs-keyword">var</span> err = internals.serverError(message, data, <span class="hljs-number">500</span>, exports.badImplementation);
    err.isDeveloperError = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> err;
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
