<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../";
    var thisFile = "node_modules/serialport/node_modules/boom/test/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<p>Load modules</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> Code = <span class="hljs-built_in">require</span>(<span class="hljs-string">'code'</span>);
<span class="hljs-keyword">var</span> Boom = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../lib'</span>);
<span class="hljs-keyword">var</span> Lab = <span class="hljs-built_in">require</span>(<span class="hljs-string">'lab'</span>);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Declare internals</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> internals = {};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Test shortcuts</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> lab = exports.lab = Lab.script();
<span class="hljs-keyword">var</span> describe = lab.describe;
<span class="hljs-keyword">var</span> it = lab.it;
<span class="hljs-keyword">var</span> expect = Code.expect;


it(<span class="hljs-string">'returns the same object when already boom'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> error = Boom.badRequest();
    <span class="hljs-keyword">var</span> wrapped = Boom.wrap(error);
    expect(error).to.equal(wrapped);
    done();
});

it(<span class="hljs-string">'returns an error with info when constructed using another error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ka-boom'</span>);
    error.xyz = <span class="hljs-number">123</span>;
    <span class="hljs-keyword">var</span> err = Boom.wrap(error);
    expect(err.xyz).to.equal(<span class="hljs-number">123</span>);
    expect(err.message).to.equal(<span class="hljs-string">'ka-boom'</span>);
    expect(err.output).to.deep.equal({
        <span class="hljs-attr">statusCode</span>: <span class="hljs-number">500</span>,
        <span class="hljs-attr">payload</span>: {
            <span class="hljs-attr">statusCode</span>: <span class="hljs-number">500</span>,
            <span class="hljs-attr">error</span>: <span class="hljs-string">'Internal Server Error'</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">'An internal server error occurred'</span>
        },
        <span class="hljs-attr">headers</span>: {}
    });
    expect(err.data).to.equal(<span class="hljs-literal">null</span>);
    done();
});

it(<span class="hljs-string">'does not override data when constructed using another error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ka-boom'</span>);
    error.data = { <span class="hljs-attr">useful</span>: <span class="hljs-string">'data'</span> };
    <span class="hljs-keyword">var</span> err = Boom.wrap(error);
    expect(err.data).to.equal(error.data);
    done();
});

it(<span class="hljs-string">'sets new message when none exists'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>();
    <span class="hljs-keyword">var</span> wrapped = Boom.wrap(error, <span class="hljs-number">400</span>, <span class="hljs-string">'something bad'</span>);
    expect(wrapped.message).to.equal(<span class="hljs-string">'something bad'</span>);
    done();
});

it(<span class="hljs-string">'throws when statusCode is not a number'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        Boom.create(<span class="hljs-string">'x'</span>);
    }).to.throw(<span class="hljs-string">'First argument must be a number (400+): x'</span>);
    done();
});

it(<span class="hljs-string">'will cast a number-string to an integer'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> codes = [
        { <span class="hljs-attr">input</span>: <span class="hljs-string">'404'</span>, <span class="hljs-attr">result</span>: <span class="hljs-number">404</span> },
        { <span class="hljs-attr">input</span>: <span class="hljs-string">'404.1'</span>, <span class="hljs-attr">result</span>: <span class="hljs-number">404</span> },
        { <span class="hljs-attr">input</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">result</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">input</span>: <span class="hljs-number">400.123</span>, <span class="hljs-attr">result</span>: <span class="hljs-number">400</span> }];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, il = codes.length; i &lt; il; ++i) {
        <span class="hljs-keyword">var</span> code = codes[i];
        <span class="hljs-keyword">var</span> err = Boom.create(code.input);
        expect(err.output.statusCode).to.equal(code.result);
    }

    done();
});

it(<span class="hljs-string">'throws when statusCode is not finite'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    expect(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        Boom.create(<span class="hljs-number">1</span> / <span class="hljs-number">0</span>);
    }).to.throw(<span class="hljs-string">'First argument must be a number (400+): null'</span>);
    done();
});

it(<span class="hljs-string">'sets error code to unknown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

    <span class="hljs-keyword">var</span> err = Boom.create(<span class="hljs-number">999</span>);
    expect(err.output.payload.error).to.equal(<span class="hljs-string">'Unknown'</span>);
    done();
});

describe(<span class="hljs-string">'create()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'does not sets null message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> error = Boom.unauthorized(<span class="hljs-literal">null</span>);
        expect(error.output.payload.message).to.not.exist();
        expect(error.isServer).to.be.false();
        done();
    });

    it(<span class="hljs-string">'sets message and data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> error = Boom.badRequest(<span class="hljs-string">'Missing data'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'user'</span> });
        expect(error.data.type).to.equal(<span class="hljs-string">'user'</span>);
        expect(error.output.payload.message).to.equal(<span class="hljs-string">'Missing data'</span>);
        done();
    });
});

describe(<span class="hljs-string">'isBoom()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns true for Boom object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badRequest().isBoom).to.equal(<span class="hljs-literal">true</span>);
        done();
    });

    it(<span class="hljs-string">'returns false for Error object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect((<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()).isBoom).to.not.exist();
        done();
    });
});

describe(<span class="hljs-string">'badRequest()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 400 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> error = Boom.badRequest();

        expect(error.output.statusCode).to.equal(<span class="hljs-number">400</span>);
        expect(error.isServer).to.be.false();
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badRequest(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message to HTTP status if none provided'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badRequest().message).to.equal(<span class="hljs-string">'Bad Request'</span>);
        done();
    });
});

describe(<span class="hljs-string">'unauthorized()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 401 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized();
        expect(err.output.statusCode).to.equal(<span class="hljs-number">401</span>);
        expect(err.output.headers).to.deep.equal({});
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.unauthorized(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });

    it(<span class="hljs-string">'returns a WWW-Authenticate header when passed a scheme'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-string">'boom'</span>, <span class="hljs-string">'Test'</span>);
        expect(err.output.statusCode).to.equal(<span class="hljs-number">401</span>);
        expect(err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>]).to.equal(<span class="hljs-string">'Test error="boom"'</span>);
        done();
    });

    it(<span class="hljs-string">'returns a WWW-Authenticate header set to the schema array value'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-literal">null</span>, [<span class="hljs-string">'Test'</span>,<span class="hljs-string">'one'</span>,<span class="hljs-string">'two'</span>]);
        expect(err.output.statusCode).to.equal(<span class="hljs-number">401</span>);
        expect(err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>]).to.equal(<span class="hljs-string">'Test, one, two'</span>);
        done();
    });

    it(<span class="hljs-string">'returns a WWW-Authenticate header when passed a scheme and attributes'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-string">'boom'</span>, <span class="hljs-string">'Test'</span>, { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'something'</span>, <span class="hljs-attr">c</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">0</span> });
        expect(err.output.statusCode).to.equal(<span class="hljs-number">401</span>);
        expect(err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>]).to.equal(<span class="hljs-string">'Test a="1", b="something", c="", d="0", error="boom"'</span>);
        expect(err.output.payload.attributes).to.deep.equal({ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'something'</span>, <span class="hljs-attr">c</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'boom'</span> });
        done();
    });

    it(<span class="hljs-string">'returns a WWW-Authenticate header when passed attributes, missing error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-literal">null</span>, <span class="hljs-string">'Test'</span>, { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'something'</span>, <span class="hljs-attr">c</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">0</span> });
        expect(err.output.statusCode).to.equal(<span class="hljs-number">401</span>);
        expect(err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>]).to.equal(<span class="hljs-string">'Test a="1", b="something", c="", d="0"'</span>);
        expect(err.isMissing).to.equal(<span class="hljs-literal">true</span>);
        done();
    });

    it(<span class="hljs-string">'sets the isMissing flag when error message is empty'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-string">''</span>, <span class="hljs-string">'Basic'</span>);
        expect(err.isMissing).to.equal(<span class="hljs-literal">true</span>);
        done();
    });

    it(<span class="hljs-string">'does not set the isMissing flag when error message is not empty'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-string">'message'</span>, <span class="hljs-string">'Basic'</span>);
        expect(err.isMissing).to.equal(<span class="hljs-literal">undefined</span>);
        done();
    });

    it(<span class="hljs-string">'sets a WWW-Authenticate when passed as an array'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.unauthorized(<span class="hljs-string">'message'</span>, [<span class="hljs-string">'Basic'</span>, <span class="hljs-string">'Example e="1"'</span>, <span class="hljs-string">'Another x="3", y="4"'</span>]);
        expect(err.output.headers[<span class="hljs-string">'WWW-Authenticate'</span>]).to.equal(<span class="hljs-string">'Basic, Example e="1", Another x="3", y="4"'</span>);
        done();
    });
});


describe(<span class="hljs-string">'methodNotAllowed()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 405 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.methodNotAllowed().output.statusCode).to.equal(<span class="hljs-number">405</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.methodNotAllowed(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'notAcceptable()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 406 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notAcceptable().output.statusCode).to.equal(<span class="hljs-number">406</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notAcceptable(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'proxyAuthRequired()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 407 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.proxyAuthRequired().output.statusCode).to.equal(<span class="hljs-number">407</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.proxyAuthRequired(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'clientTimeout()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 408 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.clientTimeout().output.statusCode).to.equal(<span class="hljs-number">408</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.clientTimeout(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'conflict()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 409 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.conflict().output.statusCode).to.equal(<span class="hljs-number">409</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.conflict(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'resourceGone()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 410 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.resourceGone().output.statusCode).to.equal(<span class="hljs-number">410</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.resourceGone(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'lengthRequired()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 411 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.lengthRequired().output.statusCode).to.equal(<span class="hljs-number">411</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.lengthRequired(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'preconditionFailed()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 412 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.preconditionFailed().output.statusCode).to.equal(<span class="hljs-number">412</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.preconditionFailed(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'entityTooLarge()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 413 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.entityTooLarge().output.statusCode).to.equal(<span class="hljs-number">413</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.entityTooLarge(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'uriTooLong()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 414 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.uriTooLong().output.statusCode).to.equal(<span class="hljs-number">414</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.uriTooLong(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'unsupportedMediaType()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 415 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.unsupportedMediaType().output.statusCode).to.equal(<span class="hljs-number">415</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.unsupportedMediaType(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'rangeNotSatisfiable()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 416 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.rangeNotSatisfiable().output.statusCode).to.equal(<span class="hljs-number">416</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.rangeNotSatisfiable(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'expectationFailed()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 417 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.expectationFailed().output.statusCode).to.equal(<span class="hljs-number">417</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.expectationFailed(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'badData()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 422 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badData().output.statusCode).to.equal(<span class="hljs-number">422</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badData(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'preconditionRequired()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 428 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.preconditionRequired().output.statusCode).to.equal(<span class="hljs-number">428</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.preconditionRequired(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'tooManyRequests()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 429 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.tooManyRequests().output.statusCode).to.equal(<span class="hljs-number">429</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed-in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.tooManyRequests(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'serverTimeout()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 503 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.serverTimeout().output.statusCode).to.equal(<span class="hljs-number">503</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.serverTimeout(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'forbidden()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 403 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.forbidden().output.statusCode).to.equal(<span class="hljs-number">403</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.forbidden(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'notFound()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 404 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notFound().output.statusCode).to.equal(<span class="hljs-number">404</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notFound(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'internal()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 500 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.internal().output.statusCode).to.equal(<span class="hljs-number">500</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.internal(<span class="hljs-string">'my message'</span>);
        expect(err.message).to.equal(<span class="hljs-string">'my message'</span>);
        expect(err.isServer).to.true();
        expect(err.output.payload.message).to.equal(<span class="hljs-string">'An internal server error occurred'</span>);
        done();
    });

    it(<span class="hljs-string">'passes data on the callback if its passed in'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.internal(<span class="hljs-string">'my message'</span>, { <span class="hljs-attr">my</span>: <span class="hljs-string">'data'</span> }).data.my).to.equal(<span class="hljs-string">'data'</span>);
        done();
    });

    it(<span class="hljs-string">'returns an error with composite message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">'{'</span>);
        }
        <span class="hljs-keyword">catch</span> (err) {
            <span class="hljs-keyword">var</span> boom = Boom.internal(<span class="hljs-string">'Someting bad'</span>, err);
            expect(boom.message).to.equal(<span class="hljs-string">'Someting bad: Unexpected end of input'</span>);
            expect(boom.isServer).to.be.true();
            done();
        }
    });
});

describe(<span class="hljs-string">'notImplemented()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 501 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notImplemented().output.statusCode).to.equal(<span class="hljs-number">501</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.notImplemented(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});


describe(<span class="hljs-string">'badGateway()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 502 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badGateway().output.statusCode).to.equal(<span class="hljs-number">502</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.badGateway(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'gatewayTimeout()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 504 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.gatewayTimeout().output.statusCode).to.equal(<span class="hljs-number">504</span>);
        done();
    });

    it(<span class="hljs-string">'sets the message with the passed in message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        expect(Boom.gatewayTimeout(<span class="hljs-string">'my message'</span>).message).to.equal(<span class="hljs-string">'my message'</span>);
        done();
    });
});

describe(<span class="hljs-string">'badImplementation()'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'returns a 500 error statusCode'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        <span class="hljs-keyword">var</span> err = Boom.badImplementation();
        expect(err.output.statusCode).to.equal(<span class="hljs-number">500</span>);
        expect(err.isDeveloperError).to.equal(<span class="hljs-literal">true</span>);
        expect(err.isServer).to.be.true();
        done();
    });
});

describe(<span class="hljs-string">'stack trace'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    it(<span class="hljs-string">'should omit lib'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">done</span>) </span>{

        [<span class="hljs-string">'badRequest'</span>, <span class="hljs-string">'unauthorized'</span>, <span class="hljs-string">'forbidden'</span>, <span class="hljs-string">'notFound'</span>, <span class="hljs-string">'methodNotAllowed'</span>,
            <span class="hljs-string">'notAcceptable'</span>, <span class="hljs-string">'proxyAuthRequired'</span>, <span class="hljs-string">'clientTimeout'</span>, <span class="hljs-string">'conflict'</span>,
            <span class="hljs-string">'resourceGone'</span>, <span class="hljs-string">'lengthRequired'</span>, <span class="hljs-string">'preconditionFailed'</span>, <span class="hljs-string">'entityTooLarge'</span>,
            <span class="hljs-string">'uriTooLong'</span>, <span class="hljs-string">'unsupportedMediaType'</span>, <span class="hljs-string">'rangeNotSatisfiable'</span>, <span class="hljs-string">'expectationFailed'</span>,
            <span class="hljs-string">'badData'</span>, <span class="hljs-string">'preconditionRequired'</span>, <span class="hljs-string">'tooManyRequests'</span>,

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>500s</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-string">'internal'</span>, <span class="hljs-string">'notImplemented'</span>, <span class="hljs-string">'badGateway'</span>, <span class="hljs-string">'serverTimeout'</span>, <span class="hljs-string">'gatewayTimeout'</span>,
            <span class="hljs-string">'badImplementation'</span>
        ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{

            <span class="hljs-keyword">var</span> err = Boom[name]();
            expect(err.stack).to.not.match(<span class="hljs-regexp">/\/lib\/index\.js/</span>);
        });

        done();
    });
});

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
