<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/serialport/node_modules/is-my-json-valid/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#is-my-json-valid">is-my-json-valid</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h2">
        <a href="#custom-formats">Custom formats</a>
      </div>

      <div class="heading h2">
        <a href="#external-schemas">External schemas</a>
      </div>

      <div class="heading h2">
        <a href="#filtering-away-additional-properties">Filtering away additional properties</a>
      </div>

      <div class="heading h2">
        <a href="#verbose-mode-outputs-the-value-on-errors">Verbose mode outputs the value on errors</a>
      </div>

      <div class="heading h2">
        <a href="#greedy-mode-tries-to-validate-as-much-as-possible">Greedy mode tries to validate as much as possible</a>
      </div>

      <div class="heading h2">
        <a href="#performance">Performance</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="is-my-json-valid">
  <h1>
    <a href="#is-my-json-valid" name="is-my-json-valid" class="pilcrow"></a>
is-my-json-valid
  </h1>
</div>
<p>A <a href="http://json-schema.org/">JSONSchema</a> validator that uses code generation
to be extremely fast</p>
<pre><code>npm install is-my-json-valid
</code></pre>
<p>It passes the entire JSONSchema v4 test suite except for <code>remoteRefs</code> and <code>maxLength</code>/<code>minLength</code> when using unicode surrogate pairs.</p>
<p><a href="http://travis-ci.org/mafintosh/is-my-json-valid"><img src="http://img.shields.io/travis/mafintosh/is-my-json-valid.svg?style=flat" alt="build status"></a></p>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>Simply pass a schema to compile it</p>
<pre><code class="js"><span class="hljs-keyword">var</span> validator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'is-my-json-valid'</span>)

<span class="hljs-keyword">var</span> validate = validator({
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">hello</span>: {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
    }
  }
})

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'should be valid'</span>, validate({<span class="hljs-attr">hello</span>: <span class="hljs-string">'world'</span>}))
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'should not be valid'</span>, validate({}))

<span class="hljs-comment">// get the last list of errors by checking validate.errors</span>
<span class="hljs-comment">// the following will print [{field: 'data.hello', message: 'is required'}]</span>
<span class="hljs-built_in">console</span>.log(validate.errors)
</code></pre>
<p>You can also pass the schema as a string</p>
<pre><code class="js"><span class="hljs-keyword">var</span> validate = validator(<span class="hljs-string">'{"type": ... }'</span>)
</code></pre>
<p>Optionally you can use the require submodule to load a schema from <code>__dirname</code></p>
<pre><code class="js"><span class="hljs-keyword">var</span> validator = <span class="hljs-built_in">require</span>(<span class="hljs-string">'is-my-json-valid/require'</span>)
<span class="hljs-keyword">var</span> validate = validator(<span class="hljs-string">'my-schema.json'</span>)
</code></pre>
<div class="pilwrap" id="custom-formats">
  <h2>
    <a href="#custom-formats" name="custom-formats" class="pilcrow"></a>
Custom formats
  </h2>
</div>
<p>is-my-json-valid supports the formats specified in JSON schema v4 (such as date-time).
If you want to add your own custom formats pass them as the formats options to the validator</p>
<pre><code class="js"><span class="hljs-keyword">var</span> validate = validator({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">format</span>: <span class="hljs-string">'only-a'</span>
}, {
  <span class="hljs-attr">formats</span>: {
    <span class="hljs-string">'only-a'</span>: <span class="hljs-regexp">/^a+$/</span>
  }
})

<span class="hljs-built_in">console</span>.log(validate(<span class="hljs-string">'aa'</span>)) <span class="hljs-comment">// true</span>
<span class="hljs-built_in">console</span>.log(validate(<span class="hljs-string">'ab'</span>)) <span class="hljs-comment">// false</span>
</code></pre>
<div class="pilwrap" id="external-schemas">
  <h2>
    <a href="#external-schemas" name="external-schemas" class="pilcrow"></a>
External schemas
  </h2>
</div>
<p>You can pass in external schemas that you reference using the <code>$ref</code> attribute as the <code>schemas</code> option</p>
<pre><code class="js"><span class="hljs-keyword">var</span> ext = {
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
}

<span class="hljs-keyword">var</span> schema = {
  <span class="hljs-attr">$ref</span>: <span class="hljs-string">'#ext'</span> <span class="hljs-comment">// references another schema called ext</span>
}

<span class="hljs-comment">// pass the external schemas as an option</span>
<span class="hljs-keyword">var</span> validate = validator(schema, {<span class="hljs-attr">schemas</span>: {<span class="hljs-attr">ext</span>: ext}})

validate(<span class="hljs-string">'hello'</span>) <span class="hljs-comment">// returns true</span>
validate(<span class="hljs-number">42</span>) <span class="hljs-comment">// return false</span>
</code></pre>
<div class="pilwrap" id="filtering-away-additional-properties">
  <h2>
    <a href="#filtering-away-additional-properties" name="filtering-away-additional-properties" class="pilcrow"></a>
Filtering away additional properties
  </h2>
</div>
<p>is-my-json-valid supports filtering away properties not in the schema</p>
<pre><code class="js"><span class="hljs-keyword">var</span> filter = validator.filter({
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">hello</span>: {<span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>}
  },
  <span class="hljs-attr">additionalProperties</span>: <span class="hljs-literal">false</span>
})

<span class="hljs-keyword">var</span> doc = {<span class="hljs-attr">hello</span>: <span class="hljs-string">'world'</span>, <span class="hljs-attr">notInSchema</span>: <span class="hljs-literal">true</span>}
<span class="hljs-built_in">console</span>.log(filter(doc)) <span class="hljs-comment">// {hello: 'world'}</span>
</code></pre>
<div class="pilwrap" id="verbose-mode-outputs-the-value-on-errors">
  <h2>
    <a href="#verbose-mode-outputs-the-value-on-errors" name="verbose-mode-outputs-the-value-on-errors" class="pilcrow"></a>
Verbose mode outputs the value on errors
  </h2>
</div>
<p>is-my-json-valid outputs the value causing an error when verbose is set to true</p>
<pre><code class="js"><span class="hljs-keyword">var</span> validate = validator({
  <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">hello</span>: {
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
    }
  }
}, {
  <span class="hljs-attr">verbose</span>: <span class="hljs-literal">true</span>
})

validate({<span class="hljs-attr">hello</span>: <span class="hljs-number">100</span>});
<span class="hljs-built_in">console</span>.log(validate.errors) <span class="hljs-comment">// {field: 'data.hello', message: 'is the wrong type', value: 100, type: 'string'}</span>
</code></pre>
<div class="pilwrap" id="greedy-mode-tries-to-validate-as-much-as-possible">
  <h2>
    <a href="#greedy-mode-tries-to-validate-as-much-as-possible" name="greedy-mode-tries-to-validate-as-much-as-possible" class="pilcrow"></a>
Greedy mode tries to validate as much as possible
  </h2>
</div>
<p>By default is-my-json-valid bails on first validation error but when greedy is
set to true it tries to validate as much as possible:</p>
<pre><code class="js"><span class="hljs-keyword">var</span> validate = validator({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
  <span class="hljs-attr">properties</span>: {
    <span class="hljs-attr">x</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span>
    }
  },
  <span class="hljs-attr">required</span>: [<span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>]
}, {
  <span class="hljs-attr">greedy</span>: <span class="hljs-literal">true</span>
});

validate({<span class="hljs-attr">x</span>: <span class="hljs-string">'string'</span>});
<span class="hljs-built_in">console</span>.log(validate.errors) <span class="hljs-comment">// [{field: 'data.y', message: 'is required'},</span>
                             <span class="hljs-comment">//  {field: 'data.x', message: 'is the wrong type'}]</span>
</code></pre>
<div class="pilwrap" id="performance">
  <h2>
    <a href="#performance" name="performance" class="pilcrow"></a>
Performance
  </h2>
</div>
<p>is-my-json-valid uses code generation to turn your JSON schema into basic javascript code that is easily optimizeable by v8.</p>
<p>At the time of writing, is-my-json-valid is the <strong>fastest validator</strong> when running</p>
<ul>
<li><a href="https://github.com/Muscula/json-schema-benchmark">json-schema-benchmark</a></li>
<li><a href="http://cosmicrealms.com/blog/2014/08/29/benchmark-of-node-dot-js-json-validation-modules-part-3/">cosmicreals.com benchmark</a></li>
<li><a href="https://github.com/pandastrike/jsck/issues/72#issuecomment-70992684">jsck benchmark</a></li>
<li><a href="https://cdn.rawgit.com/playlyfe/themis/master/benchmark/results.html">themis benchmark</a></li>
<li><a href="https://rawgit.com/zaggino/z-schema/master/benchmark/results.html">z-schema benchmark</a></li>
</ul>
<p>If you know any other relevant benchmarks open a PR and I'll add them.</p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>MIT</p>
</div>
  </div>
</body>
</html>
