<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/serialport/node_modules/jsprim/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#jsprim-utilities-for-primitive-javascript-types">jsprim: utilities for primitive JavaScript types</a>
      </div>

      <div class="heading h3">
        <a href="#deepcopy-obj">deepCopy(obj)</a>
      </div>

      <div class="heading h3">
        <a href="#deepequal-obj1-obj2">deepEqual(obj1, obj2)</a>
      </div>

      <div class="heading h3">
        <a href="#isempty-obj">isEmpty(obj)</a>
      </div>

      <div class="heading h3">
        <a href="#foreachkey-obj-callback">forEachKey(obj, callback)</a>
      </div>

      <div class="heading h3">
        <a href="#flattenobject-obj-depth">flattenObject(obj, depth)</a>
      </div>

      <div class="heading h3">
        <a href="#flatteniter-obj-depth-func">flattenIter(obj, depth, func)</a>
      </div>

      <div class="heading h3">
        <a href="#pluck-obj-key">pluck(obj, key)</a>
      </div>

      <div class="heading h3">
        <a href="#randelt-array">randElt(array)</a>
      </div>

      <div class="heading h3">
        <a href="#startswith-str-prefix">startsWith(str, prefix)</a>
      </div>

      <div class="heading h3">
        <a href="#endswith-str-suffix">endsWith(str, suffix)</a>
      </div>

      <div class="heading h3">
        <a href="#iso8601-date">iso8601(date)</a>
      </div>

      <div class="heading h3">
        <a href="#parsedatetime-str">parseDateTime(str)</a>
      </div>

      <div class="heading h3">
        <a href="#hrtimediff-timea-timeb">hrtimeDiff(timeA, timeB)</a>
      </div>

      <div class="heading h3">
        <a href="#hrtimeadd-timea-timeb">hrtimeAdd(timeA, timeB)</a>
      </div>

      <div class="heading h3">
        <a href="#hrtimeaccum-timea-timeb">hrtimeAccum(timeA, timeB)</a>
      </div>

      <div class="heading h3">
        <a href="#hrtimenanosec-timea-hrtimemicrosec-timea-hrtimemillisec-timea">hrtimeNanosec(timeA), hrtimeMicrosec(timeA), hrtimeMillisec(timeA)</a>
      </div>

      <div class="heading h3">
        <a href="#validatejsonobject-schema-object">validateJsonObject(schema, object)</a>
      </div>

      <div class="heading h3">
        <a href="#extraproperties-object-allowed">extraProperties(object, allowed)</a>
      </div>

      <div class="heading h3">
        <a href="#mergeobjects-provided-overrides-defaults">mergeObjects(provided, overrides, defaults)</a>
      </div>

      <div class="heading h1">
        <a href="#contributing">Contributing</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="jsprim-utilities-for-primitive-javascript-types">
  <h1>
    <a href="#jsprim-utilities-for-primitive-javascript-types" name="jsprim-utilities-for-primitive-javascript-types" class="pilcrow"></a>
jsprim: utilities for primitive JavaScript types
  </h1>
</div>
<p>This module provides miscellaneous facilities for working with strings,
numbers, dates, and objects and arrays of these basic types.</p>
<div class="pilwrap" id="deepcopy-obj">
  <h3>
    <a href="#deepcopy-obj" name="deepcopy-obj" class="pilcrow"></a>
deepCopy(obj)
  </h3>
</div>
<p>Creates a deep copy of a primitive type, object, or array of primitive types.</p>
<div class="pilwrap" id="deepequal-obj1-obj2">
  <h3>
    <a href="#deepequal-obj1-obj2" name="deepequal-obj1-obj2" class="pilcrow"></a>
deepEqual(obj1, obj2)
  </h3>
</div>
<p>Returns whether two objects are equal.</p>
<div class="pilwrap" id="isempty-obj">
  <h3>
    <a href="#isempty-obj" name="isempty-obj" class="pilcrow"></a>
isEmpty(obj)
  </h3>
</div>
<p>Returns true if the given object has no properties and false otherwise.  This
is O(1) (unlike <code>Object.keys(obj).length === 0</code>, which is O(N)).</p>
<div class="pilwrap" id="foreachkey-obj-callback">
  <h3>
    <a href="#foreachkey-obj-callback" name="foreachkey-obj-callback" class="pilcrow"></a>
forEachKey(obj, callback)
  </h3>
</div>
<p>Like Array.forEach, but iterates properties of an object rather than elements
of an array.  Equivalent to:</p>
<pre><code>for (var key in obj)
        callback(key, obj[key]);
</code></pre>
<div class="pilwrap" id="flattenobject-obj-depth">
  <h3>
    <a href="#flattenobject-obj-depth" name="flattenobject-obj-depth" class="pilcrow"></a>
flattenObject(obj, depth)
  </h3>
</div>
<p>Flattens an object up to a given level of nesting, returning an array of arrays
of length &quot;depth + 1&quot;, where the first &quot;depth&quot; elements correspond to flattened
columns and the last element contains the remaining object .  For example:</p>
<pre><code>flattenObject({
    'I': {
        'A': {
            'i': {
                'datum1': [ 1, 2 ],
                'datum2': [ 3, 4 ]
            },
            'ii': {
                'datum1': [ 3, 4 ]
            }
        },
        'B': {
            'i': {
                'datum1': [ 5, 6 ]
            },
            'ii': {
                'datum1': [ 7, 8 ],
                'datum2': [ 3, 4 ],
            },
            'iii': {
            }
        }
    },
    'II': {
        'A': {
            'i': {
                'datum1': [ 1, 2 ],
                'datum2': [ 3, 4 ]
            }
        }
    }
}, 3)
</code></pre>
<p>becomes:</p>
<pre><code>[
    [ 'I',  'A', 'i',   { 'datum1': [ 1, 2 ], 'datum2': [ 3, 4 ] } ],
    [ 'I',  'A', 'ii',  { 'datum1': [ 3, 4 ] } ],
    [ 'I',  'B', 'i',   { 'datum1': [ 5, 6 ] } ],
    [ 'I',  'B', 'ii',  { 'datum1': [ 7, 8 ], 'datum2': [ 3, 4 ] } ],
    [ 'I',  'B', 'iii', {} ],
    [ 'II', 'A', 'i',   { 'datum1': [ 1, 2 ], 'datum2': [ 3, 4 ] } ]
]
</code></pre>
<p>This function is strict: &quot;depth&quot; must be a non-negative integer and &quot;obj&quot; must
be a non-null object with at least &quot;depth&quot; levels of nesting under all keys.</p>
<div class="pilwrap" id="flatteniter-obj-depth-func">
  <h3>
    <a href="#flatteniter-obj-depth-func" name="flatteniter-obj-depth-func" class="pilcrow"></a>
flattenIter(obj, depth, func)
  </h3>
</div>
<p>This is similar to <code>flattenObject</code> except that instead of returning an array,
this function invokes <code>func(entry)</code> for each <code>entry</code> in the array that
<code>flattenObject</code> would return.  <code>flattenIter(obj, depth, func)</code> is logically
equivalent to <code>flattenObject(obj, depth).forEach(func)</code>.  Importantly, this
version never constructs the full array.  Its memory usage is O(depth) rather
than O(n) (where <code>n</code> is the number of flattened elements).</p>
<p>There's another difference between <code>flattenObject</code> and <code>flattenIter</code> that's
related to the special case where <code>depth === 0</code>.  In this case, <code>flattenObject</code>
omits the array wrapping <code>obj</code> (which is regrettable).</p>
<div class="pilwrap" id="pluck-obj-key">
  <h3>
    <a href="#pluck-obj-key" name="pluck-obj-key" class="pilcrow"></a>
pluck(obj, key)
  </h3>
</div>
<p>Fetch nested property &quot;key&quot; from object &quot;obj&quot;, traversing objects as needed.
For example, <code>pluck(obj, &quot;foo.bar.baz&quot;)</code> is roughly equivalent to
<code>obj.foo.bar.baz</code>, except that:</p>
<ol>
<li>If traversal fails, the resulting value is undefined, and no error is
thrown.  For example, <code>pluck({}, &quot;foo.bar&quot;)</code> is just undefined.</li>
<li>If &quot;obj&quot; has property &quot;key&quot; directly (without traversing), the
corresponding property is returned.  For example,
<code>pluck({ 'foo.bar': 1 }, 'foo.bar')</code> is 1, not undefined.  This is also
true recursively, so <code>pluck({ 'a': { 'foo.bar': 1 } }, 'a.foo.bar')</code> is
also 1, not undefined.</li>
</ol>
<div class="pilwrap" id="randelt-array">
  <h3>
    <a href="#randelt-array" name="randelt-array" class="pilcrow"></a>
randElt(array)
  </h3>
</div>
<p>Returns an element from &quot;array&quot; selected uniformly at random.  If &quot;array&quot; is
empty, throws an Error.</p>
<div class="pilwrap" id="startswith-str-prefix">
  <h3>
    <a href="#startswith-str-prefix" name="startswith-str-prefix" class="pilcrow"></a>
startsWith(str, prefix)
  </h3>
</div>
<p>Returns true if the given string starts with the given prefix and false
otherwise.</p>
<div class="pilwrap" id="endswith-str-suffix">
  <h3>
    <a href="#endswith-str-suffix" name="endswith-str-suffix" class="pilcrow"></a>
endsWith(str, suffix)
  </h3>
</div>
<p>Returns true if the given string ends with the given suffix and false
otherwise.</p>
<div class="pilwrap" id="iso8601-date">
  <h3>
    <a href="#iso8601-date" name="iso8601-date" class="pilcrow"></a>
iso8601(date)
  </h3>
</div>
<p>Converts a Date object to an ISO8601 date string of the form
&quot;YYYY-MM-DDTHH:MM:SS.sssZ&quot;.  This format is not customizable.</p>
<div class="pilwrap" id="parsedatetime-str">
  <h3>
    <a href="#parsedatetime-str" name="parsedatetime-str" class="pilcrow"></a>
parseDateTime(str)
  </h3>
</div>
<p>Parses a date expressed as a string, as either a number of milliseconds since
the epoch or any string format that Date accepts, giving preference to the
former where these two sets overlap (e.g., strings containing small numbers).</p>
<div class="pilwrap" id="hrtimediff-timea-timeb">
  <h3>
    <a href="#hrtimediff-timea-timeb" name="hrtimediff-timea-timeb" class="pilcrow"></a>
hrtimeDiff(timeA, timeB)
  </h3>
</div>
<p>Given two hrtime readings (as from Node's <code>process.hrtime()</code>), where timeA is
later than timeB, compute the difference and return that as an hrtime.  It is
illegal to invoke this for a pair of times where timeB is newer than timeA.</p>
<div class="pilwrap" id="hrtimeadd-timea-timeb">
  <h3>
    <a href="#hrtimeadd-timea-timeb" name="hrtimeadd-timea-timeb" class="pilcrow"></a>
hrtimeAdd(timeA, timeB)
  </h3>
</div>
<p>Add two hrtime intervals (as from Node's <code>process.hrtime()</code>), returning a new
hrtime interval array.  This function does not modify either input argument.</p>
<div class="pilwrap" id="hrtimeaccum-timea-timeb">
  <h3>
    <a href="#hrtimeaccum-timea-timeb" name="hrtimeaccum-timea-timeb" class="pilcrow"></a>
hrtimeAccum(timeA, timeB)
  </h3>
</div>
<p>Add two hrtime intervals (as from Node's <code>process.hrtime()</code>), storing the
result in <code>timeA</code>.  This function overwrites (and returns) the first argument
passed in.</p>
<div class="pilwrap" id="hrtimenanosec-timea-hrtimemicrosec-timea-hrtimemillisec-timea">
  <h3>
    <a href="#hrtimenanosec-timea-hrtimemicrosec-timea-hrtimemillisec-timea" name="hrtimenanosec-timea-hrtimemicrosec-timea-hrtimemillisec-timea" class="pilcrow"></a>
hrtimeNanosec(timeA), hrtimeMicrosec(timeA), hrtimeMillisec(timeA)
  </h3>
</div>
<p>This suite of functions converts a hrtime interval (as from Node's
<code>process.hrtime()</code>) into a scalar number of nanoseconds, microseconds or
milliseconds.  Results are truncated, as with <code>Math.floor()</code>.</p>
<div class="pilwrap" id="validatejsonobject-schema-object">
  <h3>
    <a href="#validatejsonobject-schema-object" name="validatejsonobject-schema-object" class="pilcrow"></a>
validateJsonObject(schema, object)
  </h3>
</div>
<p>Uses JSON validation (via JSV) to validate the given object against the given
schema.  On success, returns null.  On failure, <em>returns</em> (does not throw) a
useful Error object.</p>
<div class="pilwrap" id="extraproperties-object-allowed">
  <h3>
    <a href="#extraproperties-object-allowed" name="extraproperties-object-allowed" class="pilcrow"></a>
extraProperties(object, allowed)
  </h3>
</div>
<p>Check an object for unexpected properties.  Accepts the object to check, and an
array of allowed property name strings.  If extra properties are detected, an
array of extra property names is returned.  If no properties other than those
in the allowed list are present on the object, the returned array will be of
zero length.</p>
<div class="pilwrap" id="mergeobjects-provided-overrides-defaults">
  <h3>
    <a href="#mergeobjects-provided-overrides-defaults" name="mergeobjects-provided-overrides-defaults" class="pilcrow"></a>
mergeObjects(provided, overrides, defaults)
  </h3>
</div>
<p>Merge properties from objects &quot;provided&quot;, &quot;overrides&quot;, and &quot;defaults&quot;.  The
intended use case is for functions that accept named arguments in an &quot;args&quot;
object, but want to provide some default values and override other values.  In
that case, &quot;provided&quot; is what the caller specified, &quot;overrides&quot; are what the
function wants to override, and &quot;defaults&quot; contains default values.</p>
<p>The function starts with the values in &quot;defaults&quot;, overrides them with the
values in &quot;provided&quot;, and then overrides those with the values in &quot;overrides&quot;.
For convenience, any of these objects may be falsey, in which case they will be
ignored.  The input objects are never modified, but properties in the returned
object are not deep-copied.</p>
<p>For example:</p>
<pre><code>mergeObjects(undefined, { 'objectMode': true }, { 'highWaterMark': 0 })
</code></pre>
<p>returns:</p>
<pre><code>{ 'objectMode': true, 'highWaterMark': 0 }
</code></pre>
<p>For another example:</p>
<pre><code>mergeObjects(
    { 'highWaterMark': 16, 'objectMode': 7 }, /* from caller */
    { 'objectMode': true },                   /* overrides */
    { 'highWaterMark': 0 });                  /* default */
</code></pre>
<p>returns:</p>
<pre><code>{ 'objectMode': true, 'highWaterMark': 16 }
</code></pre>
<div class="pilwrap" id="contributing">
  <h1>
    <a href="#contributing" name="contributing" class="pilcrow"></a>
Contributing
  </h1>
</div>
<p>Code should be &quot;make check&quot; clean.  This target assumes that
<a href="http://github.com/davepacheco/javascriptlint">jsl</a> and
<a href="http://github.com/davepacheco/jsstyle">jsstyle</a> are on your path.</p>
<p>New tests should generally accompany new functions and bug fixes.  The tests
should pass cleanly (run tests/basic.js).</p>
</div>
  </div>
</body>
</html>
