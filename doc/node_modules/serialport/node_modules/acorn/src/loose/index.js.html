<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../doc-style.css" />
  <script src="../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../";
    var thisFile = "node_modules/serialport/node_modules/acorn/src/loose/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<p>Acorn: Loose parser</p>
<p>This module provides an alternative parser (<code>parse_dammit</code>) that
exposes that same interface as <code>parse</code>, but will try to parse
anything as JavaScript, repairing syntax error the best it can.
There are circumstances in which it will raise an error and give
up, but they are very rare. The resulting AST will be a mostly
valid JavaScript AST (as per the <a href="https://developer.mozilla.org/en-US/docs/SpiderMonkey/Parser_API">Mozilla parser API</a>, except
that:</p>
<ul>
<li>
<p>Return outside functions is allowed</p>
</li>
<li>
<p>Label consistency (no conflicts, break only to existing labels)
is not enforced.</p>
</li>
<li>
<p>Bogus Identifier nodes with a name of <code>&quot;âœ–&quot;</code> are inserted whenever
the parser got too confused to return anything meaningful.</p>
</li>
</ul>
<p>The expected use for this is to <em>first</em> try <code>acorn.parse</code>, and only
if that fails switch to <code>parse_dammit</code>. The loose parser might
parse badly indented code incorrectly, so <strong>don't</strong> use it as
your default parser.</p>
<p>Quite a lot of acorn.js is duplicated here. The alternative was to
add a <em>lot</em> of extra cruft to that file, making it less readable
and slower. Copying and editing the code allowed me to make
invasive changes and simplifications without creating a complicated
tangle.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> acorn <span class="hljs-keyword">from</span> <span class="hljs-string">".."</span>
<span class="hljs-keyword">import</span> {LooseParser} <span class="hljs-keyword">from</span> <span class="hljs-string">"./state"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./tokenize"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./parseutil"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./statement"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"./expression"</span>

<span class="hljs-keyword">export</span> {LooseParser} <span class="hljs-keyword">from</span> <span class="hljs-string">"./state"</span>

acorn.defaultOptions.tabSize = <span class="hljs-number">4</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse_dammit</span>(<span class="hljs-params">input, options</span>) </span>{
  <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> LooseParser(input, options)
  p.next()
  <span class="hljs-keyword">return</span> p.parseTopLevel()
}

acorn.parse_dammit = parse_dammit
acorn.LooseParser = LooseParser

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
