<!DOCTYPE html>
<html>
<head>
  <title>tokenize.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../doc-style.css" />
  <script src="../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../";
    var thisFile = "node_modules/serialport/node_modules/acorn/src/loose/tokenize.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>tokenize.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">import</span> {tokTypes <span class="hljs-keyword">as</span> tt, Token, isNewLine, SourceLocation, getLineInfo, lineBreakG} <span class="hljs-keyword">from</span> <span class="hljs-string">".."</span>
<span class="hljs-keyword">import</span> {LooseParser} <span class="hljs-keyword">from</span> <span class="hljs-string">"./state"</span>

<span class="hljs-keyword">const</span> lp = LooseParser.prototype

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSpace</span>(<span class="hljs-params">ch</span>) </span>{
  <span class="hljs-keyword">return</span> (ch &lt; <span class="hljs-number">14</span> &amp;&amp; ch &gt; <span class="hljs-number">8</span>) || ch === <span class="hljs-number">32</span> || ch === <span class="hljs-number">160</span> || isNewLine(ch)
}

lp.next = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.last = <span class="hljs-keyword">this</span>.tok
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ahead.length)
    <span class="hljs-keyword">this</span>.tok = <span class="hljs-keyword">this</span>.ahead.shift()
  <span class="hljs-keyword">else</span>
    <span class="hljs-keyword">this</span>.tok = <span class="hljs-keyword">this</span>.readToken()

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.tok.start &gt;= <span class="hljs-keyword">this</span>.nextLineStart) {
    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.tok.start &gt;= <span class="hljs-keyword">this</span>.nextLineStart) {
      <span class="hljs-keyword">this</span>.curLineStart = <span class="hljs-keyword">this</span>.nextLineStart
      <span class="hljs-keyword">this</span>.nextLineStart = <span class="hljs-keyword">this</span>.lineEnd(<span class="hljs-keyword">this</span>.curLineStart) + <span class="hljs-number">1</span>
    }
    <span class="hljs-keyword">this</span>.curIndent = <span class="hljs-keyword">this</span>.indentationAfter(<span class="hljs-keyword">this</span>.curLineStart)
  }
}

lp.readToken = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">for</span> (;;) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">this</span>.toks.next()
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.toks.type === tt.dot &amp;&amp;
          <span class="hljs-keyword">this</span>.input.substr(<span class="hljs-keyword">this</span>.toks.end, <span class="hljs-number">1</span>) === <span class="hljs-string">"."</span> &amp;&amp;
          <span class="hljs-keyword">this</span>.options.ecmaVersion &gt;= <span class="hljs-number">6</span>) {
        <span class="hljs-keyword">this</span>.toks.end++
        <span class="hljs-keyword">this</span>.toks.type = tt.ellipsis
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Token(<span class="hljs-keyword">this</span>.toks)
    } <span class="hljs-keyword">catch</span>(e) {
      <span class="hljs-keyword">if</span> (!(e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">SyntaxError</span>)) <span class="hljs-keyword">throw</span> e

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Try to skip some text, based on the error message, and then continue</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">let</span> msg = e.message, pos = e.raisedAt, replace = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/unterminated/i</span>.test(msg)) {
        pos = <span class="hljs-keyword">this</span>.lineEnd(e.pos + <span class="hljs-number">1</span>)
        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/string/</span>.test(msg)) {
          replace = {<span class="hljs-attr">start</span>: e.pos, <span class="hljs-attr">end</span>: pos, <span class="hljs-attr">type</span>: tt.string, <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>.input.slice(e.pos + <span class="hljs-number">1</span>, pos)}
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/regular expr/i</span>.test(msg)) {
          <span class="hljs-keyword">let</span> re = <span class="hljs-keyword">this</span>.input.slice(e.pos, pos)
          <span class="hljs-keyword">try</span> { re = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(re) } <span class="hljs-keyword">catch</span>(e) {}
          replace = {<span class="hljs-attr">start</span>: e.pos, <span class="hljs-attr">end</span>: pos, <span class="hljs-attr">type</span>: tt.regexp, <span class="hljs-attr">value</span>: re}
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/template/</span>.test(msg)) {
          replace = {<span class="hljs-attr">start</span>: e.pos, <span class="hljs-attr">end</span>: pos,
                     <span class="hljs-attr">type</span>: tt.template,
                     <span class="hljs-attr">value</span>: <span class="hljs-keyword">this</span>.input.slice(e.pos, pos)}
        } <span class="hljs-keyword">else</span> {
          replace = <span class="hljs-literal">false</span>
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i</span>.test(msg)) {
        <span class="hljs-keyword">while</span> (pos &lt; <span class="hljs-keyword">this</span>.input.length &amp;&amp; !isSpace(<span class="hljs-keyword">this</span>.input.charCodeAt(pos))) ++pos
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/character escape|expected hexadecimal/i</span>.test(msg)) {
        <span class="hljs-keyword">while</span> (pos &lt; <span class="hljs-keyword">this</span>.input.length) {
          <span class="hljs-keyword">let</span> ch = <span class="hljs-keyword">this</span>.input.charCodeAt(pos++)
          <span class="hljs-keyword">if</span> (ch === <span class="hljs-number">34</span> || ch === <span class="hljs-number">39</span> || isNewLine(ch)) <span class="hljs-keyword">break</span>
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/unexpected character/i</span>.test(msg)) {
        pos++
        replace = <span class="hljs-literal">false</span>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/regular expression/i</span>.test(msg)) {
        replace = <span class="hljs-literal">true</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> e
      }
      <span class="hljs-keyword">this</span>.resetTo(pos)
      <span class="hljs-keyword">if</span> (replace === <span class="hljs-literal">true</span>) replace = {<span class="hljs-attr">start</span>: pos, <span class="hljs-attr">end</span>: pos, <span class="hljs-attr">type</span>: tt.name, <span class="hljs-attr">value</span>: <span class="hljs-string">"âœ–"</span>}
      <span class="hljs-keyword">if</span> (replace) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.locations)
          replace.loc = <span class="hljs-keyword">new</span> SourceLocation(
            <span class="hljs-keyword">this</span>.toks,
            getLineInfo(<span class="hljs-keyword">this</span>.input, replace.start),
            getLineInfo(<span class="hljs-keyword">this</span>.input, replace.end))
        <span class="hljs-keyword">return</span> replace
      }
    }
  }
}

lp.resetTo = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pos</span>) </span>{
  <span class="hljs-keyword">this</span>.toks.pos = pos
  <span class="hljs-keyword">let</span> ch = <span class="hljs-keyword">this</span>.input.charAt(pos - <span class="hljs-number">1</span>)
  <span class="hljs-keyword">this</span>.toks.exprAllowed = !ch || <span class="hljs-regexp">/[\[\{\(,;:?\/*=+\-~!|&amp;%^&lt;&gt;]/</span>.test(ch) ||
    <span class="hljs-regexp">/[enwfd]/</span>.test(ch) &amp;&amp;
    <span class="hljs-regexp">/\b(keywords|case|else|return|throw|new|in|(instance|type)of|delete|void)$/</span>.test(<span class="hljs-keyword">this</span>.input.slice(pos - <span class="hljs-number">10</span>, pos))

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.locations) {
    <span class="hljs-keyword">this</span>.toks.curLine = <span class="hljs-number">1</span>
    <span class="hljs-keyword">this</span>.toks.lineStart = lineBreakG.lastIndex = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> match
    <span class="hljs-keyword">while</span> ((match = lineBreakG.exec(<span class="hljs-keyword">this</span>.input)) &amp;&amp; match.index &lt; pos) {
      ++<span class="hljs-keyword">this</span>.toks.curLine
      <span class="hljs-keyword">this</span>.toks.lineStart = match.index + match[<span class="hljs-number">0</span>].length
    }
  }
}

lp.lookAhead = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-keyword">this</span>.ahead.length)
    <span class="hljs-keyword">this</span>.ahead.push(<span class="hljs-keyword">this</span>.readToken())
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.ahead[n - <span class="hljs-number">1</span>]
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
