<!DOCTYPE html>
<html>
<head>
  <title>basic.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../";
    var thisFile = "node_modules/serialport/node_modules/nopt/test/basic.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>basic.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> nopt = <span class="hljs-built_in">require</span>(<span class="hljs-string">"../"</span>)
  , test = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tap'</span>).test


test(<span class="hljs-string">"passing a string results in a string"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = nopt({ <span class="hljs-attr">key</span>: <span class="hljs-built_in">String</span> }, {}, [<span class="hljs-string">"--key"</span>, <span class="hljs-string">"myvalue"</span>], <span class="hljs-number">0</span>)
  t.same(parsed.key, <span class="hljs-string">"myvalue"</span>)
  t.end()
})

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>https://github.com/npm/nopt/issues/31</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">test(<span class="hljs-string">"Empty String results in empty string, not true"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = nopt({ <span class="hljs-attr">empty</span>: <span class="hljs-built_in">String</span> }, {}, [<span class="hljs-string">"--empty"</span>], <span class="hljs-number">0</span>)
  t.same(parsed.empty, <span class="hljs-string">""</span>)
  t.end()
})

test(<span class="hljs-string">"~ path is resolved to $HOME"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>)
  <span class="hljs-keyword">if</span> (!process.env.HOME) process.env.HOME = <span class="hljs-string">"/tmp"</span>
  <span class="hljs-keyword">var</span> parsed = nopt({<span class="hljs-attr">key</span>: path}, {}, [<span class="hljs-string">"--key=~/val"</span>], <span class="hljs-number">0</span>)
  t.same(parsed.key, path.resolve(process.env.HOME, <span class="hljs-string">"val"</span>))
  t.end()
})

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>https://github.com/npm/nopt/issues/24</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">test(<span class="hljs-string">"Unknown options are not parsed as numbers"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
    <span class="hljs-keyword">var</span> parsed = nopt({<span class="hljs-string">"parse-me"</span>: <span class="hljs-built_in">Number</span>}, <span class="hljs-literal">null</span>, [<span class="hljs-string">'--leave-as-is=1.20'</span>, <span class="hljs-string">'--parse-me=1.20'</span>], <span class="hljs-number">0</span>)
    t.equal(parsed[<span class="hljs-string">'leave-as-is'</span>], <span class="hljs-string">'1.20'</span>)
    t.equal(parsed[<span class="hljs-string">'parse-me'</span>], <span class="hljs-number">1.2</span>)
    t.end()
});

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>https://github.com/npm/nopt/issues/48</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">test(<span class="hljs-string">"Check types based on name of type"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = nopt({<span class="hljs-string">"parse-me"</span>: {<span class="hljs-attr">name</span>: <span class="hljs-string">"Number"</span>}}, <span class="hljs-literal">null</span>, [<span class="hljs-string">'--parse-me=1.20'</span>], <span class="hljs-number">0</span>)
  t.equal(parsed[<span class="hljs-string">'parse-me'</span>], <span class="hljs-number">1.2</span>)
  t.end()
})


test(<span class="hljs-string">"Missing types are not parsed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = nopt({<span class="hljs-string">"parse-me"</span>: {}}, <span class="hljs-literal">null</span>, [<span class="hljs-string">'--parse-me=1.20'</span>], <span class="hljs-number">0</span>)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>should only contain argv</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  t.equal(<span class="hljs-built_in">Object</span>.keys(parsed).length, <span class="hljs-number">1</span>)
  t.end()
})

test(<span class="hljs-string">"Types passed without a name are not parsed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = nopt({<span class="hljs-string">"parse-me"</span>: {}}, {}, [<span class="hljs-string">'--parse-me=1.20'</span>], <span class="hljs-number">0</span>)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>should only contain argv</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  t.equal(<span class="hljs-built_in">Object</span>.keys(parsed).length, <span class="hljs-number">1</span>)
  t.end()
})

test(<span class="hljs-string">"other tests"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{

  <span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"util"</span>)
    , Stream = <span class="hljs-built_in">require</span>(<span class="hljs-string">"stream"</span>)
    , path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>)
    , url = <span class="hljs-built_in">require</span>(<span class="hljs-string">"url"</span>)

    , shorthands =
      { <span class="hljs-attr">s</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"silent"</span>]
      , <span class="hljs-attr">d</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"info"</span>]
      , <span class="hljs-attr">dd</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"verbose"</span>]
      , <span class="hljs-attr">ddd</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"silly"</span>]
      , <span class="hljs-attr">noreg</span> : [<span class="hljs-string">"--no-registry"</span>]
      , <span class="hljs-attr">reg</span> : [<span class="hljs-string">"--registry"</span>]
      , <span class="hljs-string">"no-reg"</span> : [<span class="hljs-string">"--no-registry"</span>]
      , <span class="hljs-attr">silent</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"silent"</span>]
      , <span class="hljs-attr">verbose</span> : [<span class="hljs-string">"--loglevel"</span>, <span class="hljs-string">"verbose"</span>]
      , <span class="hljs-attr">h</span> : [<span class="hljs-string">"--usage"</span>]
      , <span class="hljs-attr">H</span> : [<span class="hljs-string">"--usage"</span>]
      , <span class="hljs-string">"?"</span> : [<span class="hljs-string">"--usage"</span>]
      , <span class="hljs-attr">help</span> : [<span class="hljs-string">"--usage"</span>]
      , <span class="hljs-attr">v</span> : [<span class="hljs-string">"--version"</span>]
      , <span class="hljs-attr">f</span> : [<span class="hljs-string">"--force"</span>]
      , <span class="hljs-attr">desc</span> : [<span class="hljs-string">"--description"</span>]
      , <span class="hljs-string">"no-desc"</span> : [<span class="hljs-string">"--no-description"</span>]
      , <span class="hljs-string">"local"</span> : [<span class="hljs-string">"--no-global"</span>]
      , <span class="hljs-attr">l</span> : [<span class="hljs-string">"--long"</span>]
      , <span class="hljs-attr">p</span> : [<span class="hljs-string">"--parseable"</span>]
      , <span class="hljs-attr">porcelain</span> : [<span class="hljs-string">"--parseable"</span>]
      , <span class="hljs-attr">g</span> : [<span class="hljs-string">"--global"</span>]
      }

    , types =
      { <span class="hljs-attr">aoa</span>: <span class="hljs-built_in">Array</span>
      , <span class="hljs-attr">nullstream</span>: [<span class="hljs-literal">null</span>, Stream]
      , <span class="hljs-attr">date</span>: <span class="hljs-built_in">Date</span>
      , <span class="hljs-attr">str</span>: <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">browser</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">cache</span> : path
      , <span class="hljs-attr">color</span> : [<span class="hljs-string">"always"</span>, <span class="hljs-built_in">Boolean</span>]
      , <span class="hljs-attr">depth</span> : <span class="hljs-built_in">Number</span>
      , <span class="hljs-attr">description</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">dev</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">editor</span> : path
      , <span class="hljs-attr">force</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">global</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">globalconfig</span> : path
      , <span class="hljs-attr">group</span> : [<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Number</span>]
      , <span class="hljs-attr">gzipbin</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">logfd</span> : [<span class="hljs-built_in">Number</span>, Stream]
      , <span class="hljs-attr">loglevel</span> : [<span class="hljs-string">"silent"</span>,<span class="hljs-string">"win"</span>,<span class="hljs-string">"error"</span>,<span class="hljs-string">"warn"</span>,<span class="hljs-string">"info"</span>,<span class="hljs-string">"verbose"</span>,<span class="hljs-string">"silly"</span>]
      , <span class="hljs-attr">long</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-string">"node-version"</span> : [<span class="hljs-literal">false</span>, <span class="hljs-built_in">String</span>]
      , <span class="hljs-attr">npaturl</span> : url
      , <span class="hljs-attr">npat</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-string">"onload-script"</span> : [<span class="hljs-literal">false</span>, <span class="hljs-built_in">String</span>]
      , <span class="hljs-attr">outfd</span> : [<span class="hljs-built_in">Number</span>, Stream]
      , <span class="hljs-attr">parseable</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">pre</span>: <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">prefix</span>: path
      , <span class="hljs-attr">proxy</span> : url
      , <span class="hljs-string">"rebuild-bundle"</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">registry</span> : url
      , <span class="hljs-attr">searchopts</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">searchexclude</span>: [<span class="hljs-literal">null</span>, <span class="hljs-built_in">String</span>]
      , <span class="hljs-attr">shell</span> : path
      , <span class="hljs-attr">t</span>: [<span class="hljs-built_in">Array</span>, <span class="hljs-built_in">String</span>]
      , <span class="hljs-attr">tag</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">tar</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">tmp</span> : path
      , <span class="hljs-string">"unsafe-perm"</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">usage</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">user</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">username</span> : <span class="hljs-built_in">String</span>
      , <span class="hljs-attr">userconfig</span> : path
      , <span class="hljs-attr">version</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">viewer</span>: path
      , <span class="hljs-attr">_exit</span> : <span class="hljs-built_in">Boolean</span>
      , <span class="hljs-attr">path</span>: path
      }

  ; [[<span class="hljs-string">"-v"</span>, {<span class="hljs-attr">version</span>:<span class="hljs-literal">true</span>}, []]
    ,[<span class="hljs-string">"---v"</span>, {<span class="hljs-attr">version</span>:<span class="hljs-literal">true</span>}, []]
    ,[<span class="hljs-string">"ls -s --no-reg connect -d"</span>,
      {<span class="hljs-attr">loglevel</span>:<span class="hljs-string">"info"</span>,<span class="hljs-attr">registry</span>:<span class="hljs-literal">null</span>},[<span class="hljs-string">"ls"</span>,<span class="hljs-string">"connect"</span>]]
    ,[<span class="hljs-string">"ls ---s foo"</span>,{<span class="hljs-attr">loglevel</span>:<span class="hljs-string">"silent"</span>},[<span class="hljs-string">"ls"</span>,<span class="hljs-string">"foo"</span>]]
    ,[<span class="hljs-string">"ls --registry blargle"</span>, {}, [<span class="hljs-string">"ls"</span>]]
    ,[<span class="hljs-string">"--no-registry"</span>, {<span class="hljs-attr">registry</span>:<span class="hljs-literal">null</span>}, []]
    ,[<span class="hljs-string">"--no-color true"</span>, {<span class="hljs-attr">color</span>:<span class="hljs-literal">false</span>}, []]
    ,[<span class="hljs-string">"--no-color false"</span>, {<span class="hljs-attr">color</span>:<span class="hljs-literal">true</span>}, []]
    ,[<span class="hljs-string">"--no-color"</span>, {<span class="hljs-attr">color</span>:<span class="hljs-literal">false</span>}, []]
    ,[<span class="hljs-string">"--color false"</span>, {<span class="hljs-attr">color</span>:<span class="hljs-literal">false</span>}, []]
    ,[<span class="hljs-string">"--color --logfd 7"</span>, {<span class="hljs-attr">logfd</span>:<span class="hljs-number">7</span>,<span class="hljs-attr">color</span>:<span class="hljs-literal">true</span>}, []]
    ,[<span class="hljs-string">"--color=true"</span>, {<span class="hljs-attr">color</span>:<span class="hljs-literal">true</span>}, []]
    ,[<span class="hljs-string">"--logfd=10"</span>, {<span class="hljs-attr">logfd</span>:<span class="hljs-number">10</span>}, []]
    ,[<span class="hljs-string">"--tmp=/tmp -tar=gtar"</span>,{<span class="hljs-attr">tmp</span>:<span class="hljs-string">"/tmp"</span>,<span class="hljs-attr">tar</span>:<span class="hljs-string">"gtar"</span>},[]]
    ,[<span class="hljs-string">"--tmp=tmp -tar=gtar"</span>,
      {<span class="hljs-attr">tmp</span>:path.resolve(process.cwd(), <span class="hljs-string">"tmp"</span>),<span class="hljs-attr">tar</span>:<span class="hljs-string">"gtar"</span>},[]]
    ,[<span class="hljs-string">"--logfd x"</span>, {}, []]
    ,[<span class="hljs-string">"a -true -- -no-false"</span>, {<span class="hljs-attr">true</span>:<span class="hljs-literal">true</span>},[<span class="hljs-string">"a"</span>,<span class="hljs-string">"-no-false"</span>]]
    ,[<span class="hljs-string">"a -no-false"</span>, {<span class="hljs-attr">false</span>:<span class="hljs-literal">false</span>},[<span class="hljs-string">"a"</span>]]
    ,[<span class="hljs-string">"a -no-no-true"</span>, {<span class="hljs-attr">true</span>:<span class="hljs-literal">true</span>}, [<span class="hljs-string">"a"</span>]]
    ,[<span class="hljs-string">"a -no-no-no-false"</span>, {<span class="hljs-attr">false</span>:<span class="hljs-literal">false</span>}, [<span class="hljs-string">"a"</span>]]
    ,[<span class="hljs-string">"---NO-no-No-no-no-no-nO-no-no"</span>+
      <span class="hljs-string">"-No-no-no-no-no-no-no-no-no"</span>+
      <span class="hljs-string">"-no-no-no-no-NO-NO-no-no-no-no-no-no"</span>+
      <span class="hljs-string">"-no-body-can-do-the-boogaloo-like-I-do"</span>
     ,{<span class="hljs-string">"body-can-do-the-boogaloo-like-I-do"</span>:<span class="hljs-literal">false</span>}, []]
    ,[<span class="hljs-string">"we are -no-strangers-to-love "</span>+
      <span class="hljs-string">"--you-know=the-rules --and=so-do-i "</span>+
      <span class="hljs-string">"---im-thinking-of=a-full-commitment "</span>+
      <span class="hljs-string">"--no-you-would-get-this-from-any-other-guy "</span>+
      <span class="hljs-string">"--no-gonna-give-you-up "</span>+
      <span class="hljs-string">"-no-gonna-let-you-down=true "</span>+
      <span class="hljs-string">"--no-no-gonna-run-around false "</span>+
      <span class="hljs-string">"--desert-you=false "</span>+
      <span class="hljs-string">"--make-you-cry false "</span>+
      <span class="hljs-string">"--no-tell-a-lie "</span>+
      <span class="hljs-string">"--no-no-and-hurt-you false"</span>
     ,{<span class="hljs-string">"strangers-to-love"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"you-know"</span>:<span class="hljs-string">"the-rules"</span>
      ,<span class="hljs-string">"and"</span>:<span class="hljs-string">"so-do-i"</span>
      ,<span class="hljs-string">"you-would-get-this-from-any-other-guy"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"gonna-give-you-up"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"gonna-let-you-down"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"gonna-run-around"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"desert-you"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"make-you-cry"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"tell-a-lie"</span>:<span class="hljs-literal">false</span>
      ,<span class="hljs-string">"and-hurt-you"</span>:<span class="hljs-literal">false</span>
      },[<span class="hljs-string">"we"</span>, <span class="hljs-string">"are"</span>]]
    ,[<span class="hljs-string">"-t one -t two -t three"</span>
     ,{<span class="hljs-attr">t</span>: [<span class="hljs-string">"one"</span>, <span class="hljs-string">"two"</span>, <span class="hljs-string">"three"</span>]}
     ,[]]
    ,[<span class="hljs-string">"-t one -t null -t three four five null"</span>
     ,{<span class="hljs-attr">t</span>: [<span class="hljs-string">"one"</span>, <span class="hljs-string">"null"</span>, <span class="hljs-string">"three"</span>]}
     ,[<span class="hljs-string">"four"</span>, <span class="hljs-string">"five"</span>, <span class="hljs-string">"null"</span>]]
    ,[<span class="hljs-string">"-t foo"</span>
     ,{<span class="hljs-attr">t</span>:[<span class="hljs-string">"foo"</span>]}
     ,[]]
    ,[<span class="hljs-string">"--no-t"</span>
     ,{<span class="hljs-attr">t</span>:[<span class="hljs-string">"false"</span>]}
     ,[]]
    ,[<span class="hljs-string">"-no-no-t"</span>
     ,{<span class="hljs-attr">t</span>:[<span class="hljs-string">"true"</span>]}
     ,[]]
    ,[<span class="hljs-string">"-aoa one -aoa null -aoa 100"</span>
     ,{<span class="hljs-attr">aoa</span>:[<span class="hljs-string">"one"</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'100'</span>]}
     ,[]]
    ,[<span class="hljs-string">"-str 100"</span>
     ,{<span class="hljs-attr">str</span>:<span class="hljs-string">"100"</span>}
     ,[]]
    ,[<span class="hljs-string">"--color always"</span>
     ,{<span class="hljs-attr">color</span>:<span class="hljs-string">"always"</span>}
     ,[]]
    ,[<span class="hljs-string">"--no-nullstream"</span>
     ,{<span class="hljs-attr">nullstream</span>:<span class="hljs-literal">null</span>}
     ,[]]
    ,[<span class="hljs-string">"--nullstream false"</span>
     ,{<span class="hljs-attr">nullstream</span>:<span class="hljs-literal">null</span>}
     ,[]]
    ,[<span class="hljs-string">"--notadate=2011-01-25"</span>
     ,{<span class="hljs-attr">notadate</span>: <span class="hljs-string">"2011-01-25"</span>}
     ,[]]
    ,[<span class="hljs-string">"--date 2011-01-25"</span>
     ,{<span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">"2011-01-25"</span>)}
     ,[]]
    ,[<span class="hljs-string">"-cl 1"</span>
     ,{<span class="hljs-attr">config</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">1</span>}
     ,[]
     ,{<span class="hljs-attr">config</span>: <span class="hljs-built_in">Boolean</span>, <span class="hljs-attr">length</span>: <span class="hljs-built_in">Number</span>, <span class="hljs-attr">clear</span>: <span class="hljs-built_in">Boolean</span>}
     ,{<span class="hljs-attr">c</span>: <span class="hljs-string">"--config"</span>, <span class="hljs-attr">l</span>: <span class="hljs-string">"--length"</span>}]
    ,[<span class="hljs-string">"--acount bla"</span>
     ,{<span class="hljs-string">"acount"</span>:<span class="hljs-literal">true</span>}
     ,[<span class="hljs-string">"bla"</span>]
     ,{<span class="hljs-attr">account</span>: <span class="hljs-built_in">Boolean</span>, <span class="hljs-attr">credentials</span>: <span class="hljs-built_in">Boolean</span>, <span class="hljs-attr">options</span>: <span class="hljs-built_in">String</span>}
     ,{<span class="hljs-attr">a</span>:<span class="hljs-string">"--account"</span>, <span class="hljs-attr">c</span>:<span class="hljs-string">"--credentials"</span>,<span class="hljs-attr">o</span>:<span class="hljs-string">"--options"</span>}]
    ,[<span class="hljs-string">"--clear"</span>
     ,{<span class="hljs-attr">clear</span>:<span class="hljs-literal">true</span>}
     ,[]
     ,{<span class="hljs-attr">clear</span>:<span class="hljs-built_in">Boolean</span>,<span class="hljs-attr">con</span>:<span class="hljs-built_in">Boolean</span>,<span class="hljs-attr">len</span>:<span class="hljs-built_in">Boolean</span>,<span class="hljs-attr">exp</span>:<span class="hljs-built_in">Boolean</span>,<span class="hljs-attr">add</span>:<span class="hljs-built_in">Boolean</span>,<span class="hljs-attr">rep</span>:<span class="hljs-built_in">Boolean</span>}
     ,{<span class="hljs-attr">c</span>:<span class="hljs-string">"--con"</span>,<span class="hljs-attr">l</span>:<span class="hljs-string">"--len"</span>,<span class="hljs-attr">e</span>:<span class="hljs-string">"--exp"</span>,<span class="hljs-attr">a</span>:<span class="hljs-string">"--add"</span>,<span class="hljs-attr">r</span>:<span class="hljs-string">"--rep"</span>}]
    ,[<span class="hljs-string">"--file -"</span>
     ,{<span class="hljs-string">"file"</span>:<span class="hljs-string">"-"</span>}
     ,[]
     ,{<span class="hljs-attr">file</span>:<span class="hljs-built_in">String</span>}
     ,{}]
    ,[<span class="hljs-string">"--file -"</span>
     ,{<span class="hljs-string">"file"</span>:<span class="hljs-literal">true</span>}
     ,[<span class="hljs-string">"-"</span>]
     ,{<span class="hljs-attr">file</span>:<span class="hljs-built_in">Boolean</span>}
     ,{}]
    ,[<span class="hljs-string">"--path"</span>
     ,{<span class="hljs-string">"path"</span>:<span class="hljs-literal">null</span>}
     ,[]]
    ,[<span class="hljs-string">"--path ."</span>
     ,{<span class="hljs-string">"path"</span>:process.cwd()}
     ,[]]
    ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">test</span>) </span>{
      <span class="hljs-keyword">var</span> argv = test[<span class="hljs-number">0</span>].split(<span class="hljs-regexp">/\s+/</span>)
        , opts = test[<span class="hljs-number">1</span>]
        , rem = test[<span class="hljs-number">2</span>]
        , actual = nopt(test[<span class="hljs-number">3</span>] || types, test[<span class="hljs-number">4</span>] || shorthands, argv, <span class="hljs-number">0</span>)
        , parsed = actual.argv
      <span class="hljs-keyword">delete</span> actual.argv
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> opts) {
        <span class="hljs-keyword">var</span> e = <span class="hljs-built_in">JSON</span>.stringify(opts[i])
          , a = <span class="hljs-built_in">JSON</span>.stringify(actual[i] === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : actual[i])
        <span class="hljs-keyword">if</span> (e &amp;&amp; <span class="hljs-keyword">typeof</span> e === <span class="hljs-string">"object"</span>) {
          t.deepEqual(e, a)
        } <span class="hljs-keyword">else</span> {
          t.equal(e, a)
        }
      }
      t.deepEqual(rem, parsed.remain)
    })
  t.end()
})

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
