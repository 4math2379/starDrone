<!DOCTYPE html>
<html>
<head>
  <title>test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "node_modules/serialport/node_modules/isstream/test.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>test.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> tape             = <span class="hljs-built_in">require</span>(<span class="hljs-string">'tape'</span>)
  , EE               = <span class="hljs-built_in">require</span>(<span class="hljs-string">'events'</span>).EventEmitter
  , util             = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>)


  , isStream         = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./'</span>)
  , isReadable       = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./'</span>).isReadable
  , isWritable       = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./'</span>).isWritable
  , isDuplex         = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./'</span>).isDuplex

  , CoreStreams      = <span class="hljs-built_in">require</span>(<span class="hljs-string">'stream'</span>)
  , ReadableStream10 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./readable-stream-1.0/'</span>)
  , ReadableStream11 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./readable-stream-1.1/'</span>)


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span> (<span class="hljs-params">pass, type, stream</span>) </span>{
  tape(<span class="hljs-string">'isStream('</span>  + type + <span class="hljs-string">')'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
    t.plan(<span class="hljs-number">1</span>)
    t.ok(pass === isStream(stream), type)
  })
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testReadable</span> (<span class="hljs-params">pass, type, stream</span>) </span>{
  tape(<span class="hljs-string">'isReadable('</span>  + type + <span class="hljs-string">')'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
    t.plan(<span class="hljs-number">1</span>)
    t.ok(pass === isReadable(stream), type)
  })
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testWritable</span> (<span class="hljs-params">pass, type, stream</span>) </span>{
  tape(<span class="hljs-string">'isWritable('</span>  + type + <span class="hljs-string">')'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
    t.plan(<span class="hljs-number">1</span>)
    t.ok(pass === isWritable(stream), type)
  })
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testDuplex</span> (<span class="hljs-params">pass, type, stream</span>) </span>{
  tape(<span class="hljs-string">'isDuplex('</span>  + type + <span class="hljs-string">')'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">t</span>) </span>{
    t.plan(<span class="hljs-number">1</span>)
    t.ok(pass === isDuplex(stream), type)
  })
}


[ <span class="hljs-literal">undefined</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">''</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1.0</span>, <span class="hljs-string">'string'</span>, {}, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span> (<span class="hljs-params"></span>) </span>{} ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">o</span>) </span>{
  test(<span class="hljs-literal">false</span>, <span class="hljs-string">'non-stream / primitive: '</span> + (<span class="hljs-built_in">JSON</span>.stringify(o) || (o &amp;&amp; o.toString()) || o), o)
})


test(<span class="hljs-literal">false</span>, <span class="hljs-string">'fake stream obj'</span>, { <span class="hljs-attr">pipe</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{} })


;(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>looks like a stream!</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Stream</span> (<span class="hljs-params"></span>) </span>{
    EE.call(<span class="hljs-keyword">this</span>)
  }
  util.inherits(Stream, EE)
  Stream.prototype.pipe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{}
  Stream.Stream = Stream

  test(<span class="hljs-literal">false</span>, <span class="hljs-string">'fake stream "new Stream()"'</span>, <span class="hljs-keyword">new</span> Stream())

}())


test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Stream'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Stream)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Readable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Readable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Writable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Writable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Duplex'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Duplex)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Transform'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Transform)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.PassThrough'</span>, <span class="hljs-keyword">new</span> (CoreStreams.PassThrough)())

test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Readable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Writable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Duplex)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Transform)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.PassThrough)())

test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Readable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Writable)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Duplex)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Transform)())
test(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.PassThrough)())


testReadable(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Stream'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Stream)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Readable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Readable)())
testReadable(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Writable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Writable)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Duplex'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Duplex)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Transform'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Transform)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.PassThrough'</span>, <span class="hljs-keyword">new</span> (CoreStreams.PassThrough)())

testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Readable)())
testReadable(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream10.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Writable)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Duplex)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Transform)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.PassThrough)())

testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Readable)())
testReadable(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream11.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Writable)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Duplex)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Transform)())
testReadable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.PassThrough)())


testWritable(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Stream'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Stream)())
testWritable(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Readable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Readable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Writable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Writable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Duplex'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Duplex)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Transform'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Transform)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.PassThrough'</span>, <span class="hljs-keyword">new</span> (CoreStreams.PassThrough)())

testWritable(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream10.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Readable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Writable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Duplex)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Transform)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.PassThrough)())

testWritable(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream11.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Readable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Writable)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Duplex)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Transform)())
testWritable(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.PassThrough)())


testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Stream'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Stream)())
testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Readable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Readable)())
testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'CoreStreams.Writable'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Writable)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Duplex'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Duplex)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.Transform'</span>, <span class="hljs-keyword">new</span> (CoreStreams.Transform)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'CoreStreams.PassThrough'</span>, <span class="hljs-keyword">new</span> (CoreStreams.PassThrough)())

testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream10.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Readable)())
testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream10.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Writable)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Duplex)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.Transform)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream10.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream10.PassThrough)())

testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream11.Readable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Readable)())
testDuplex(<span class="hljs-literal">false</span>, <span class="hljs-string">'ReadableStream11.Writable'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Writable)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Duplex'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Duplex)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.Transform'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.Transform)())
testDuplex(<span class="hljs-literal">true</span>, <span class="hljs-string">'ReadableStream11.PassThrough'</span>, <span class="hljs-keyword">new</span> (ReadableStream11.PassThrough)())


;[ CoreStreams, ReadableStream10, ReadableStream11 ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">p</span>) </span>{
  [ <span class="hljs-string">'Stream'</span>, <span class="hljs-string">'Readable'</span>, <span class="hljs-string">'Writable'</span>, <span class="hljs-string">'Duplex'</span>, <span class="hljs-string">'Transform'</span>, <span class="hljs-string">'PassThrough'</span> ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">k</span>) </span>{
    <span class="hljs-keyword">if</span> (!p[k])
      <span class="hljs-keyword">return</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SubStream</span> (<span class="hljs-params"></span>) </span>{
      p[k].call(<span class="hljs-keyword">this</span>)
    }
    util.inherits(SubStream, p[k])

    test(<span class="hljs-literal">true</span>, <span class="hljs-string">'Stream subclass: '</span> + p.name + <span class="hljs-string">'.'</span> + k, <span class="hljs-keyword">new</span> SubStream())

  })
})




</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
