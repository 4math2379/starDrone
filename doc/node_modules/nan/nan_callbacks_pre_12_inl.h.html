<!DOCTYPE html>
<html>
<head>
  <title>nan_callbacks_pre_12_inl.h</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/nan/nan_callbacks_pre_12_inl.h";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>nan_callbacks_pre_12_inl.h</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<div class="dox">
<div class="summary">
<hr>
<p>NAN - Native Abstractions for Node.js</p>
</div>
<div class="body">
<p>Copyright (c) 2016 NAN contributors</p>
<p>MIT License <a href="https://github.com/nodejs/nan/blob/master/LICENSE.md">https://github.com/nodejs/nan/blob/master/LICENSE.md</a></p>
<hr>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="c">
#ifndef NAN_CALLBACKS_PRE_12_INL_H_
#define NAN_CALLBACKS_PRE_12_INL_H_

namespace imp {
template&lt;typename T&gt; class ReturnValueImp;
}  // end of namespace imp

template&lt;typename T&gt;
class ReturnValue {
  v8::Isolate *isolate_;
  v8::Persistent&lt;T&gt; *value_;
  friend class imp::ReturnValueImp&lt;T&gt;;

 public:
  template &lt;class S&gt;
  explicit inline ReturnValue(v8::Isolate *isolate, v8::Persistent&lt;S&gt; *p) :
      isolate_(isolate), value_(p) {}
  template &lt;class S&gt;
  explicit inline ReturnValue(const ReturnValue&lt;S&gt;&amp; that)
      : isolate_(that.isolate_), value_(that.value_) {
    TYPE_CHECK(T, S);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Handle setters</p>

        </td>
        <td class="code highlight">
          <pre class="c">  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> S&gt; <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">const</span> v8::Local&lt;S&gt; &amp;handle)</span> </span>{
    TYPE_CHECK(T, S);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(handle);
  }

  <span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> S&gt; <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Global&lt;S&gt; &amp;handle)</span> </span>{
    TYPE_CHECK(T, S);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(handle.persistent);
    <span class="hljs-keyword">const_cast</span>&lt;Global&lt;S&gt; &amp;&gt;(handle).Reset();
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Fast primitive setters</p>

        </td>
        <td class="code highlight">
          <pre class="c">  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> value)</span> </span>{
    TYPE_CHECK(T, v8::Boolean);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Boolean::New(value));
  }

  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">double</span> i)</span> </span>{
    TYPE_CHECK(T, v8::Number);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Number::New(i));
  }

  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">int32_t</span> i)</span> </span>{
    TYPE_CHECK(T, v8::Integer);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Int32::New(i));
  }

  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Set</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> i)</span> </span>{
    TYPE_CHECK(T, v8::Integer);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Uint32::NewFromUnsigned(i));
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Fast JS primitive setters</p>

        </td>
        <td class="code highlight">
          <pre class="c">  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetNull</span><span class="hljs-params">()</span> </span>{
    TYPE_CHECK(T, v8::Primitive);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Null());
  }

  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetUndefined</span><span class="hljs-params">()</span> </span>{
    TYPE_CHECK(T, v8::Primitive);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::Undefined());
  }

  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SetEmptyString</span><span class="hljs-params">()</span> </span>{
    TYPE_CHECK(T, v8::String);
    value_-&gt;Dispose();
    *value_ = v8::Persistent&lt;T&gt;::New(v8::String::Empty());
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Convenience getter for isolate</p>

        </td>
        <td class="code highlight">
          <pre class="c">  <span class="hljs-keyword">inline</span> v8::<span class="hljs-function">Isolate *<span class="hljs-title">GetIsolate</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{
    <span class="hljs-keyword">return</span> isolate_;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Pointer setter: Uncompilable to prevent inadvertent misuse.</p>

        </td>
        <td class="code highlight">
          <pre class="c">  template&lt;typename S&gt;
  inline void Set(S *whatever) { TYPE_CHECK(S*, v8::Primitive); }
};

template&lt;typename T&gt;
class FunctionCallbackInfo {
  const v8::Arguments &amp;args_;
  v8::Local&lt;v8::Value&gt; data_;
  ReturnValue&lt;T&gt; return_value_;
  v8::Persistent&lt;T&gt; retval_;

 public:
  explicit inline FunctionCallbackInfo(
      const v8::Arguments &amp;args
    , v8::Local&lt;v8::Value&gt; data) :
          args_(args)
        , data_(data)
        , return_value_(args.GetIsolate(), &amp;retval_)
        , retval_(v8::Persistent&lt;T&gt;::New(v8::Undefined())) {}

  inline ~FunctionCallbackInfo() {
    retval_.Dispose();
    retval_.Clear();
  }

  inline ReturnValue&lt;T&gt; GetReturnValue() const {
    return ReturnValue&lt;T&gt;(return_value_);
  }

  inline v8::Local&lt;v8::Function&gt; Callee() const { return args_.Callee(); }
  inline v8::Local&lt;v8::Value&gt; Data() const { return data_; }
  inline v8::Local&lt;v8::Object&gt; Holder() const { return args_.Holder(); }
  inline bool IsConstructCall() const { return args_.IsConstructCall(); }
  inline int Length() const { return args_.Length(); }
  inline v8::Local&lt;v8::Value&gt; operator[](int i) const { return args_[i]; }
  inline v8::Local&lt;v8::Object&gt; This() const { return args_.This(); }
  inline v8::Isolate *GetIsolate() const { return args_.GetIsolate(); }


 protected:
  static const int kHolderIndex = 0;
  static const int kIsolateIndex = 1;
  static const int kReturnValueDefaultValueIndex = 2;
  static const int kReturnValueIndex = 3;
  static const int kDataIndex = 4;
  static const int kCalleeIndex = 5;
  static const int kContextSaveIndex = 6;
  static const int kArgsLength = 7;

 private:
  NAN_DISALLOW_ASSIGN_COPY_MOVE(FunctionCallbackInfo)
};

template&lt;typename T&gt;
class PropertyCallbackInfoBase {
  const v8::AccessorInfo &amp;info_;
  const v8::Local&lt;v8::Value&gt; data_;

 public:
  explicit inline PropertyCallbackInfoBase(
      const v8::AccessorInfo &amp;info
    , const v8::Local&lt;v8::Value&gt; data) :
          info_(info)
        , data_(data) {}

  inline v8::Isolate* GetIsolate() const { return info_.GetIsolate(); }
  inline v8::Local&lt;v8::Value&gt; Data() const { return data_; }
  inline v8::Local&lt;v8::Object&gt; This() const { return info_.This(); }
  inline v8::Local&lt;v8::Object&gt; Holder() const { return info_.Holder(); }

 protected:
  static const int kHolderIndex = 0;
  static const int kIsolateIndex = 1;
  static const int kReturnValueDefaultValueIndex = 2;
  static const int kReturnValueIndex = 3;
  static const int kDataIndex = 4;
  static const int kThisIndex = 5;
  static const int kArgsLength = 6;

 private:
  NAN_DISALLOW_ASSIGN_COPY_MOVE(PropertyCallbackInfoBase)
};

template&lt;typename T&gt;
class PropertyCallbackInfo : public PropertyCallbackInfoBase&lt;T&gt; {
  ReturnValue&lt;T&gt; return_value_;
  v8::Persistent&lt;T&gt; retval_;

 public:
  explicit inline PropertyCallbackInfo(
      const v8::AccessorInfo &amp;info
    , const v8::Local&lt;v8::Value&gt; data) :
          PropertyCallbackInfoBase&lt;T&gt;(info, data)
        , return_value_(info.GetIsolate(), &amp;retval_)
        , retval_(v8::Persistent&lt;T&gt;::New(v8::Undefined())) {}

  inline ~PropertyCallbackInfo() {
    retval_.Dispose();
    retval_.Clear();
  }

  inline ReturnValue&lt;T&gt; GetReturnValue() const { return return_value_; }
};

template&lt;&gt;
class PropertyCallbackInfo&lt;v8::Array&gt; :
    public PropertyCallbackInfoBase&lt;v8::Array&gt; {
  ReturnValue&lt;v8::Array&gt; return_value_;
  v8::Persistent&lt;v8::Array&gt; retval_;

 public:
  explicit inline PropertyCallbackInfo(
      const v8::AccessorInfo &amp;info
    , const v8::Local&lt;v8::Value&gt; data) :
          PropertyCallbackInfoBase&lt;v8::Array&gt;(info, data)
        , return_value_(info.GetIsolate(), &amp;retval_)
        , retval_(v8::Persistent&lt;v8::Array&gt;::New(v8::Local&lt;v8::Array&gt;())) {}

  inline ~PropertyCallbackInfo() {
    retval_.Dispose();
    retval_.Clear();
  }

  inline ReturnValue&lt;v8::Array&gt; GetReturnValue() const {
    return return_value_;
  }
};

template&lt;&gt;
class PropertyCallbackInfo&lt;v8::Boolean&gt; :
    public PropertyCallbackInfoBase&lt;v8::Boolean&gt; {
  ReturnValue&lt;v8::Boolean&gt; return_value_;
  v8::Persistent&lt;v8::Boolean&gt; retval_;

 public:
  explicit inline PropertyCallbackInfo(
      const v8::AccessorInfo &amp;info
    , const v8::Local&lt;v8::Value&gt; data) :
          PropertyCallbackInfoBase&lt;v8::Boolean&gt;(info, data)
        , return_value_(info.GetIsolate(), &amp;retval_)
        , retval_(v8::Persistent&lt;v8::Boolean&gt;::New(v8::Local&lt;v8::Boolean&gt;())) {}

  inline ~PropertyCallbackInfo() {
    retval_.Dispose();
    retval_.Clear();
  }

  inline ReturnValue&lt;v8::Boolean&gt; GetReturnValue() const {
    return return_value_;
  }
};

template&lt;&gt;
class PropertyCallbackInfo&lt;v8::Integer&gt; :
    public PropertyCallbackInfoBase&lt;v8::Integer&gt; {
  ReturnValue&lt;v8::Integer&gt; return_value_;
  v8::Persistent&lt;v8::Integer&gt; retval_;

 public:
  explicit inline PropertyCallbackInfo(
      const v8::AccessorInfo &amp;info
    , const v8::Local&lt;v8::Value&gt; data) :
          PropertyCallbackInfoBase&lt;v8::Integer&gt;(info, data)
        , return_value_(info.GetIsolate(), &amp;retval_)
        , retval_(v8::Persistent&lt;v8::Integer&gt;::New(v8::Local&lt;v8::Integer&gt;())) {}

  inline ~PropertyCallbackInfo() {
    retval_.Dispose();
    retval_.Clear();
  }

  inline ReturnValue&lt;v8::Integer&gt; GetReturnValue() const {
    return return_value_;
  }
};

namespace imp {
template&lt;typename T&gt;
class ReturnValueImp : public ReturnValue&lt;T&gt; {
 public:
  explicit ReturnValueImp(ReturnValue&lt;T&gt; that) :
      ReturnValue&lt;T&gt;(that) {}
  NAN_INLINE v8::Handle&lt;T&gt; Value() {
      return *ReturnValue&lt;T&gt;::value_;
  }
};

static
v8::Handle&lt;v8::Value&gt; FunctionCallbackWrapper(const v8::Arguments &amp;args) {
  v8::Local&lt;v8::Object&gt; obj = args.Data().As&lt;v8::Object&gt;();
  FunctionCallback callback = reinterpret_cast&lt;FunctionCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kFunctionIndex).As&lt;v8::External&gt;()-&gt;Value()));
  FunctionCallbackInfo&lt;v8::Value&gt;
      cbinfo(args, obj-&gt;GetInternalField(kDataIndex));
  callback(cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativeFunction)(const v8::Arguments &amp;);

static
v8::Handle&lt;v8::Value&gt; GetterCallbackWrapper(
    v8::Local&lt;v8::String&gt; property, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Value&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  GetterCallback callback = reinterpret_cast&lt;GetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kGetterIndex).As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativeGetter)
    (v8::Local&lt;v8::String&gt;, const v8::AccessorInfo &amp;);

static
void SetterCallbackWrapper(
    v8::Local&lt;v8::String&gt; property
  , v8::Local&lt;v8::Value&gt; value
  , const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;void&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  SetterCallback callback = reinterpret_cast&lt;SetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kSetterIndex).As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, value, cbinfo);
}

typedef void (*NativeSetter)
    (v8::Local&lt;v8::String&gt;, v8::Local&lt;v8::Value&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Value&gt; PropertyGetterCallbackWrapper(
    v8::Local&lt;v8::String&gt; property, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Value&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  PropertyGetterCallback callback = reinterpret_cast&lt;PropertyGetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kPropertyGetterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativePropertyGetter)
    (v8::Local&lt;v8::String&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Value&gt; PropertySetterCallbackWrapper(
    v8::Local&lt;v8::String&gt; property
  , v8::Local&lt;v8::Value&gt; value
  , const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Value&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  PropertySetterCallback callback = reinterpret_cast&lt;PropertySetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kPropertySetterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, value, cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativePropertySetter)
    (v8::Local&lt;v8::String&gt;, v8::Local&lt;v8::Value&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Array&gt; PropertyEnumeratorCallbackWrapper(
    const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Array&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  PropertyEnumeratorCallback callback =
      reinterpret_cast&lt;PropertyEnumeratorCallback&gt;(reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kPropertyEnumeratorIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(cbinfo);
  return ReturnValueImp&lt;v8::Array&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Array&gt; (*NativePropertyEnumerator)
    (const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Boolean&gt; PropertyDeleterCallbackWrapper(
    v8::Local&lt;v8::String&gt; property
  , const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Boolean&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  PropertyDeleterCallback callback = reinterpret_cast&lt;PropertyDeleterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kPropertyDeleterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, cbinfo);
  return ReturnValueImp&lt;v8::Boolean&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Boolean&gt; (NativePropertyDeleter)
    (v8::Local&lt;v8::String&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Integer&gt; PropertyQueryCallbackWrapper(
    v8::Local&lt;v8::String&gt; property, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Integer&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  PropertyQueryCallback callback = reinterpret_cast&lt;PropertyQueryCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kPropertyQueryIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(property, cbinfo);
  return ReturnValueImp&lt;v8::Integer&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Integer&gt; (*NativePropertyQuery)
    (v8::Local&lt;v8::String&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Value&gt; IndexGetterCallbackWrapper(
    uint32_t index, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Value&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  IndexGetterCallback callback = reinterpret_cast&lt;IndexGetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kIndexPropertyGetterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(index, cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativeIndexGetter)
    (uint32_t, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Value&gt; IndexSetterCallbackWrapper(
    uint32_t index
  , v8::Local&lt;v8::Value&gt; value
  , const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Value&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  IndexSetterCallback callback = reinterpret_cast&lt;IndexSetterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kIndexPropertySetterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(index, value, cbinfo);
  return ReturnValueImp&lt;v8::Value&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Value&gt; (*NativeIndexSetter)
    (uint32_t, v8::Local&lt;v8::Value&gt;, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Array&gt; IndexEnumeratorCallbackWrapper(
    const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Array&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  IndexEnumeratorCallback callback = reinterpret_cast&lt;IndexEnumeratorCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kIndexPropertyEnumeratorIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(cbinfo);
  return ReturnValueImp&lt;v8::Array&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Array&gt; (*NativeIndexEnumerator)
    (const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Boolean&gt; IndexDeleterCallbackWrapper(
    uint32_t index, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Boolean&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  IndexDeleterCallback callback = reinterpret_cast&lt;IndexDeleterCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kIndexPropertyDeleterIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(index, cbinfo);
  return ReturnValueImp&lt;v8::Boolean&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Boolean&gt; (*NativeIndexDeleter)
    (uint32_t, const v8::AccessorInfo &amp;);

static
v8::Handle&lt;v8::Integer&gt; IndexQueryCallbackWrapper(
    uint32_t index, const v8::AccessorInfo &amp;info) {
  v8::Local&lt;v8::Object&gt; obj = info.Data().As&lt;v8::Object&gt;();
  PropertyCallbackInfo&lt;v8::Integer&gt;
      cbinfo(info, obj-&gt;GetInternalField(kDataIndex));
  IndexQueryCallback callback = reinterpret_cast&lt;IndexQueryCallback&gt;(
      reinterpret_cast&lt;intptr_t&gt;(
          obj-&gt;GetInternalField(kIndexPropertyQueryIndex)
              .As&lt;v8::External&gt;()-&gt;Value()));
  callback(index, cbinfo);
  return ReturnValueImp&lt;v8::Integer&gt;(cbinfo.GetReturnValue()).Value();
}

typedef v8::Handle&lt;v8::Integer&gt; (*NativeIndexQuery)
    (uint32_t, const v8::AccessorInfo &amp;);
}  // end of namespace imp

#endif  // NAN_CALLBACKS_PRE_12_INL_H_

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
