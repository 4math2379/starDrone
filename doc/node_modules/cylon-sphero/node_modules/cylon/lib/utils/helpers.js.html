<!DOCTYPE html>
<html>
<head>
  <title>helpers.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../doc-style.css" />
  <script src="../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../";
    var thisFile = "node_modules/cylon-sphero/node_modules/cylon/lib/utils/helpers.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>helpers.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-comment">/* eslint no-use-before-define: 0 */</span>

<span class="hljs-keyword">var</span> __slice = <span class="hljs-built_in">Array</span>.prototype.slice;

<span class="hljs-keyword">var</span> H = <span class="hljs-built_in">module</span>.exports = {};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span>(<span class="hljs-params">base, source</span>) </span>{
  <span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray(source);

  <span class="hljs-keyword">if</span> (base == <span class="hljs-literal">null</span>) {
    base = isArray ? [] : {};
  }

  <span class="hljs-keyword">if</span> (isArray) {
    source.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, i</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> base[i] === <span class="hljs-string">"undefined"</span>) {
        base[i] = e;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> e === <span class="hljs-string">"object"</span>) {
        base[i] = extend(base[i], e);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!~base.indexOf(e)) {
        base.push(e);
      }
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> key;

    <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> source) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> source[key] !== <span class="hljs-string">"object"</span> || !source[key]) {
        base[key] = source[key];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (base[key]) {
        extend(base[key], source[key]);
      } <span class="hljs-keyword">else</span> {
        base[key] = source[key];
      }
    }
  }

  <span class="hljs-keyword">return</span> base;
}

extend(H, {
  <span class="hljs-attr">identity</span>: identity,
  <span class="hljs-attr">extend</span>: extend
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">kind</span>(<span class="hljs-params">thing</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(thing).slice(<span class="hljs-number">8</span>, <span class="hljs-number">-1</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isA</span>(<span class="hljs-params">type</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thing</span>) </span>{
    <span class="hljs-keyword">return</span> kind(thing) === type;
  };
}

extend(H, {
  <span class="hljs-attr">isObject</span>: isA(<span class="hljs-string">"Object"</span>),
  <span class="hljs-attr">isObjectLoose</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thing</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> thing === <span class="hljs-string">"object"</span>; },
  <span class="hljs-attr">isFunction</span>: isA(<span class="hljs-string">"Function"</span>),
  <span class="hljs-attr">isArray</span>: isA(<span class="hljs-string">"Array"</span>),
  <span class="hljs-attr">isString</span>: isA(<span class="hljs-string">"String"</span>),
  <span class="hljs-attr">isNumber</span>: isA(<span class="hljs-string">"Number"</span>),
  <span class="hljs-attr">isArguments</span>: isA(<span class="hljs-string">"Arguments"</span>),
  <span class="hljs-attr">isUndefined</span>: isA(<span class="hljs-string">"Undefined"</span>)
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iterate</span>(<span class="hljs-params">thing, fn, thisVal</span>) </span>{
  <span class="hljs-keyword">if</span> (H.isArray(thing)) {
    thing.forEach(fn, thisVal);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (H.isObject(thing)) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> thing) {
      <span class="hljs-keyword">var</span> value = thing[key];
      fn.call(thisVal, value, key);
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pluck</span>(<span class="hljs-params">collection, key</span>) </span>{
  <span class="hljs-keyword">var</span> keys = [];

  iterate(collection, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object</span>) </span>{
    <span class="hljs-keyword">if</span> (H.isObject(object)) {
      <span class="hljs-keyword">if</span> (H.isFunction(object[key])) {
        keys.push(object[key].bind(object));
      } <span class="hljs-keyword">else</span> {
        keys.push(object[key]);
      }
    }
  });

  <span class="hljs-keyword">return</span> keys;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params">collection, fn, thisVal</span>) </span>{
  <span class="hljs-keyword">var</span> vals = [];

  <span class="hljs-keyword">if</span> (fn == <span class="hljs-literal">null</span>) {
    fn = identity;
  }

  iterate(collection, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, index</span>) </span>{
    vals.push(fn.call(thisVal, object, index));
  });

  <span class="hljs-keyword">return</span> vals;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">invoke</span>(<span class="hljs-params">collection, fn</span>) </span>{
  <span class="hljs-keyword">var</span> args = __slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span>),
      vals = [];

  iterate(collection, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object</span>) </span>{
    <span class="hljs-keyword">if</span> (H.isFunction(fn)) {
      vals.push(fn.apply(object, args));
      <span class="hljs-keyword">return</span>;
    }

    vals.push(object[fn].apply(object, <span class="hljs-built_in">arguments</span>));
  });

  <span class="hljs-keyword">return</span> vals;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reduce</span>(<span class="hljs-params">collection, iteratee, accumulator, thisVal</span>) </span>{
  <span class="hljs-keyword">var</span> isArray = H.isArray(collection);

  <span class="hljs-keyword">if</span> (!isArray &amp;&amp; !H.isObjectLoose(collection)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">if</span> (iteratee == <span class="hljs-literal">null</span>) {
    iteratee = identity;
  }

  <span class="hljs-keyword">if</span> (accumulator == <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">if</span> (isArray) {
      accumulator = collection.shift();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> collection) {
        accumulator = collection[key];
        <span class="hljs-keyword">delete</span> collection[key];
        <span class="hljs-keyword">break</span>;
      }
    }
  }

  iterate(collection, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, name</span>) </span>{
    accumulator = iteratee.call(thisVal, accumulator, object, name);
  });

  <span class="hljs-keyword">return</span> accumulator;
}

extend(H, {
  <span class="hljs-attr">pluck</span>: pluck,
  <span class="hljs-attr">each</span>: iterate,
  <span class="hljs-attr">map</span>: map,
  <span class="hljs-attr">invoke</span>: invoke,
  <span class="hljs-attr">reduce</span>: reduce
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arity</span>(<span class="hljs-params">fn, n</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> args = __slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>, n);
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, args);
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">partial</span>(<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-keyword">var</span> args = __slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, args.concat(__slice.call(<span class="hljs-built_in">arguments</span>)));
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">partialRight</span>(<span class="hljs-params">fn</span>) </span>{
  <span class="hljs-keyword">var</span> args = __slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">null</span>, __slice.call(<span class="hljs-built_in">arguments</span>).concat(args));
  };
}

extend(H, {
  <span class="hljs-attr">arity</span>: arity,
  <span class="hljs-attr">partial</span>: partial,
  <span class="hljs-attr">partialRight</span>: partialRight
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">includes</span>(<span class="hljs-params">arr, value</span>) </span>{
  <span class="hljs-keyword">return</span> !!~arr.indexOf(value);
}

extend(H, {
  <span class="hljs-attr">includes</span>: includes
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parallel</span>(<span class="hljs-params">functions, done</span>) </span>{
  <span class="hljs-keyword">var</span> total = functions.length,
      completed = <span class="hljs-number">0</span>,
      results = [],
      error;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> done !== <span class="hljs-string">"function"</span>) { done = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{}; }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">err, result</span>) </span>{
    <span class="hljs-keyword">if</span> (error) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (err || error) {
      error = err;
      done(err);
      <span class="hljs-keyword">return</span>;
    }

    completed++;
    results.push(result);

    <span class="hljs-keyword">if</span> (completed === total) {
      done(<span class="hljs-literal">null</span>, results);
    }
  }

  <span class="hljs-keyword">if</span> (!functions.length) { done(); }

  functions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn</span>) </span>{ fn(callback); });
}

extend(H, {
  <span class="hljs-attr">parallel</span>: parallel
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">series</span>(<span class="hljs-params">functions, done</span>) </span>{
  <span class="hljs-keyword">var</span> results = [],
      error;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> done !== <span class="hljs-string">"function"</span>) { done = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{}; }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">err, result</span>) </span>{
    <span class="hljs-keyword">if</span> (err || error) {
      error = err;
      <span class="hljs-keyword">return</span> done(err);
    }

    results.push(result);

    <span class="hljs-keyword">if</span> (!functions.length) {
      <span class="hljs-keyword">return</span> done(<span class="hljs-literal">null</span>, results);
    }

    next();
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params"></span>) </span>{
    functions.shift()(callback);
  }

  <span class="hljs-keyword">if</span> (!functions.length) { done(<span class="hljs-literal">null</span>, results); }
  next();
}

extend(H, {
  <span class="hljs-attr">series</span>: series
});

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
