<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/browser-serialport/README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#browser-serialport">browser-serialport</a>
      </div>

      <div class="heading h2">
        <a href="#why-not-node.js">Why not Node.js?</a>
      </div>

      <div class="heading h2">
        <a href="#restrictions">Restrictions</a>
      </div>

      <div class="heading h2">
        <a href="#known-incompatibilities-with-node-serialport">Known incompatibilities with node-serialport</a>
      </div>

      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#to-use">To Use</a>
      </div>

      <div class="heading h2">
        <a href="#open-event">open event</a>
      </div>

      <div class="heading h2">
        <a href="#list-ports">List Ports</a>
      </div>

      <div class="heading h2">
        <a href="#parsers">Parsers</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="browser-serialport">
  <h1>
    <a href="#browser-serialport" name="browser-serialport" class="pilcrow"></a>
browser-serialport
  </h1>
</div>
<p>Robots in the browser. Just like <a href="https://npmjs.org/package/serialport">node-serialport</a> but for browser apps.</p>
<div class="pilwrap" id="why-not-node.js">
  <h2>
    <a href="#why-not-node.js" name="why-not-node.js" class="pilcrow"></a>
Why not Node.js?
  </h2>
</div>
<p><a href="http://nodebots.io/">Nodebots</a> are awesome but HTML5 apps have access to a lot of APIs that make sense for robotics like the <a href="http://www.html5rocks.com/en/tutorials/doodles/gamepad/">GamepadAPI</a>, <a href="http://www.webrtc.org/">WebRTC Video and Data</a>, <a href="http://www.google.com/intl/en/chrome/demos/speech.html">Web Speech API</a>, etc. Also you get a nice GUI and its easier to run. I have also made a fork of <a href="https://github.com/garrows/johnny-five">Johnny-Five</a> to work with <a href="http://browserify.org/">Browserify</a> as well by modifying it's dependancy <a href="https://github.com/garrows/firmata">Firmata</a> to use browser-serialport.</p>
<div class="pilwrap" id="restrictions">
  <h2>
    <a href="#restrictions" name="restrictions" class="pilcrow"></a>
Restrictions
  </h2>
</div>
<p>You will not be able to add this to your normal website.</p>
<p>This library only works in a <a href="http://developer.chrome.com/apps/about_apps.html">Chrome Packaged App</a> as this is the only way to get access to the <a href="http://developer.chrome.com/apps/serial.html">serial ports API</a> in the browser.</p>
<p>If you want help making your first Chrome App, read the <a href="http://developer.chrome.com/apps/first_app.html">&quot;Create Your First App&quot;</a> tutorial.</p>
<p>There is currently no Firefox extension support but that might come soon if possible.</p>
<div class="pilwrap" id="known-incompatibilities-with-node-serialport">
  <h2>
    <a href="#known-incompatibilities-with-node-serialport" name="known-incompatibilities-with-node-serialport" class="pilcrow"></a>
Known incompatibilities with node-serialport
  </h2>
</div>
<ul>
<li>Parsers not implemented</li>
<li>Inconsistent error messages</li>
<li>Chrome has a slightly different options set:
<ul>
<li><strong>dataBits</strong>: 7, 8</li>
<li><strong>stopBits</strong>: 1, 2</li>
<li><strong>parity</strong>: 'none', 'even', 'mark', 'odd', 'space'</li>
<li><strong>flowControl</strong>: 'RTSCTS'</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h2>
</div>
<pre><code>npm install browser-serialport
</code></pre>
<div class="pilwrap" id="to-use">
  <h2>
    <a href="#to-use" name="to-use" class="pilcrow"></a>
To Use
  </h2>
</div>
<p>Opening a serial port:</p>
<pre><code class="js"><span class="hljs-keyword">var</span> SerialPort = <span class="hljs-built_in">require</span>(<span class="hljs-string">"browser-serialport"</span>).SerialPort
<span class="hljs-keyword">var</span> serialPort = <span class="hljs-keyword">new</span> SerialPort(<span class="hljs-string">"/dev/tty-usbserial1"</span>, {
  <span class="hljs-attr">baudrate</span>: <span class="hljs-number">57600</span>
});
</code></pre>
<p>When opening a serial port, you can specify (in this order).</p>
<ol>
<li>Path to Serial Port - required.</li>
<li>Options - optional and described below.</li>
</ol>
<p>The options object allows you to pass named options to the serial port during initialization. The valid attributes for the options object are the following:</p>
<ul>
<li>baudrate: Baud Rate, defaults to 9600. Should be one of: 115200, 57600, 38400, 19200, 9600, 4800, 2400, 1800, 1200, 600, 300, 200, 150, 134, 110, 75, or 50. Custom rates as allowed by hardware is supported.</li>
<li>databits: Data Bits, defaults to 8. Must be one of: 8, 7, <s>6</s>, or <s>5</s>.</li>
<li>stopbits: Stop Bits, defaults to 1. Must be one of: 1 or 2.</li>
<li>parity: Parity, defaults to 'none'. Must be one of: 'none', 'even', 'mark', 'odd', 'space'</li>
<li>buffersize: Size of read buffer, defaults to 255. Must be an integer value.</li>
<li>parser: The parser engine to use with read data, defaults to rawPacket strategy which just emits the raw buffer as a &quot;data&quot; event. Can be any function that accepts EventEmitter as first parameter and the raw buffer as the second parameter.</li>
</ul>
<p><strong>Note, we have added support for either all lowercase OR camelcase of the options (thanks @jagautier), use whichever style you prefer.</strong></p>
<div class="pilwrap" id="open-event">
  <h2>
    <a href="#open-event" name="open-event" class="pilcrow"></a>
open event
  </h2>
</div>
<p>You MUST wait for the open event to be emitted before reading/writing to the serial port. The open happens asynchronously so installing 'data' listeners and writing
before the open event might result in... nothing at all.</p>
<p>Assuming you are connected to a serial console, you would for example:</p>
<pre><code class="js">serialPort.on(<span class="hljs-string">"open"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'open'</span>);
  serialPort.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'data received: '</span> + data);
  });
  serialPort.write(<span class="hljs-string">"ls\n"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'err '</span> + err);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'results '</span> + results);
  });
});
</code></pre>
<p>You can also call the open function, in this case instanciate the serialport with an additional flag.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> SerialPort = <span class="hljs-built_in">require</span>(<span class="hljs-string">"browser-serialport"</span>).SerialPort
<span class="hljs-keyword">var</span> serialPort = <span class="hljs-keyword">new</span> SerialPort(<span class="hljs-string">"/dev/tty-usbserial1"</span>, {
  <span class="hljs-attr">baudrate</span>: <span class="hljs-number">57600</span>
}, <span class="hljs-literal">false</span>); <span class="hljs-comment">// this is the openImmediately flag [default is true]</span>

serialPort.open(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{
  <span class="hljs-keyword">if</span> ( error ) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'failed to open: '</span>+error);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'open'</span>);
    serialPort.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'data received: '</span> + data);
    });
    serialPort.write(<span class="hljs-string">"ls\n"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'err '</span> + err);
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'results '</span> + results);
    });
  }
});
</code></pre>
<div class="pilwrap" id="list-ports">
  <h2>
    <a href="#list-ports" name="list-ports" class="pilcrow"></a>
List Ports
  </h2>
</div>
<p>You can also list the ports along with some metadata as well.</p>
<pre><code class="js"><span class="hljs-keyword">var</span> serialPort = <span class="hljs-built_in">require</span>(<span class="hljs-string">"browser-serialport"</span>);
serialPort.list(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, ports</span>) </span>{
  ports.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">port</span>) </span>{
    <span class="hljs-built_in">console</span>.log(port.comName);
    <span class="hljs-built_in">console</span>.log(port.pnpId);
    <span class="hljs-built_in">console</span>.log(port.manufacturer);
  });
});
</code></pre>
<div class="pilwrap" id="parsers">
  <h2>
    <a href="#parsers" name="parsers" class="pilcrow"></a>
Parsers
  </h2>
</div>
<p>Browser-serialport doesn't as of 2.0.0 support parsers.</p>
<p>You can get updates of new data from the Serial Port as follows:</p>
<pre><code class="js">serialPort.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
  sys.puts(<span class="hljs-string">"here: "</span>+data);
});
</code></pre>
<p>You can write to the serial port by sending a string or buffer to the write method as follows:</p>
<pre><code class="js">serialPort.write(<span class="hljs-string">"OMG IT WORKS\r"</span>);
</code></pre>
<p>Enjoy and do cool things with this code.</p>
</div>
  </div>
</body>
</html>
